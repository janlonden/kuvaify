!function e(t,n,i){function s(r,l){if(!n[r]){if(!t[r]){var a="function"==typeof require&&require;if(!l&&a)return a(r,!0);if(o)return o(r,!0);var d=new Error("Cannot find module '"+r+"'");throw d.code="MODULE_NOT_FOUND",d}var v=n[r]={exports:{}};t[r][0].call(v.exports,function(e){var n=t[r][1][e];return s(n?n:e)},v,v.exports,e,t,n,i)}return n[r].exports}for(var o="function"==typeof require&&require,r=0;r<i.length;r++)s(i[r]);return s}({1:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var i={linkElement:"body",fileTypes:["jpg","jpeg","png","gif"],coverScreen:!0,showShortcuts:!0,transitionSpeed:400,transitionScale:.08,zoomRatio:.2,smallSize:768,mediumSize:1280},s=document.body,o=[],r=null,l=null,a=null,d=s.clientWidth,v=s.clientHeight,c=!1,u=function(){var e=arguments.length<=0||void 0===arguments[0]?{}:arguments[0];e.linkElement&&"string"==typeof e.linkElement&&(i.linkElement=e.linkElement),e.fileTypes&&e.fileTypes.constructor===Array&&(i.fileTypes=e.fileTypes),void 0!==e.coverScreen&&e.coverScreen===!1&&(i.coverScreen=!1),void 0!==e.showShortcuts&&e.showShortcuts===!1&&(i.showShortcuts=!1),e.transitionSpeed&&"number"==typeof e.transitionSpeed&&e.transitionSpeed>=100&&(i.transitionSpeed=e.transitionSpeed),e.transitionScale&&("number"==typeof e.transitionScale&&(i.transitionScale=e.transitionScale),0===e.transitionScale&&(i.transitionScale=0)),e.zoomScale&&("number"==typeof e.zoomScale&&(i.zoomScale=e.zoomScale),0===e.zoomScale&&(i.zoomScale=0)),e.smallSize&&"number"==typeof e.smallSize&&(i.smallSize=e.smallSize),e.mediumSize&&"number"==typeof e.mediumSize&&(i.mediumSize=e.mediumSize),f.get(),f.push(),f.addEventListeners()},m=function(e){u(e)},f={links:[],get:function(){var e=Array.from(document.querySelectorAll(i.linkElement+" a")),t=i.fileTypes.join("|"),n=new RegExp(".("+t+")$");e.forEach(function(e){e.pathname.match(n)&&f.links.push(e)})},push:function(){f.links.forEach(function(e){w.push(e)})},addEventListeners:function(){f.links.forEach(function(e){e.addEventListener("click",function(t){c=!1;var n=f.links.indexOf(e);w.current(n),p.append(),S.append(),h.append(),L.append(),E.append(),b.append(),setTimeout(function(){p.visibility("show"),h.visibility("show"),L.visibility("show"),E.visibility("depends"),w.prepare(n)},100),setTimeout(function(){p.addEventListeners(),S.addEventListeners(),L.addEventListeners(),h.addEventListeners(),E.addEventListeners()},200),t.preventDefault()})})}},p={element:document.createElement("div"),focusStarted:!1,focus:function(e){p.focusStarted===!1&&(p.visibility("focus"),setTimeout(function(){p.visibility("unfocus"),p.focusStarted=!1},2e3)),p.focusStarted=!0},append:function(){p.element.id="kuvaify",p.element.style.transition="opacity "+i.transitionSpeed+"ms ease, visibility "+i.transitionSpeed+"ms ease",s.appendChild(p.element)},visibility:function(e){"show"===e&&p.element.classList.add("visible"),"hide"===e&&p.element.classList.remove("visible"),"focus"===e&&p.element.classList.add("focused"),"unfocus"===e&&p.element.classList.remove("focused")},addEventListeners:function(){window.addEventListener("mousemove",p.focus)},removeEventListeners:function(){window.removeEventListener("mousemove",p.focus)}},w={push:function(e){var t={element:document.createElement("img"),href:e.pathname,smallHref:e.getAttribute("data-kuvaify-small")||null,mediumHref:e.getAttribute("data-kuvaify-medium")||null,caption:null,scale:1,scaleRatio:i.zoomRatio,rotate:0,offx:0,offy:0,transition:"width "+i.transitionSpeed+"ms ease, height "+i.transitionSpeed+"ms ease, transform "+i.transitionSpeed+"ms ease, opacity "+i.transitionSpeed+"ms ease, visibility "+i.transitionSpeed+"ms ease",loaded:!1};t.element.style.transition=t.transition,t.element.style.left=null,t.element.style.top=null,t.element.classList.add("kuvaify-img"),e.getAttribute("data-kuvaify-caption")&&(t.caption=document.createElement("div"),t.caption.innerHTML="<p>"+e.getAttribute("data-kuvaify-caption").replace(/<[^>]+>/gi,"")+"</p>",t.caption.id="kuvaify-caption",t.caption.style.transition="opacity "+i.transitionSpeed+"ms ease, visibility "+i.transitionSpeed+"ms ease"),o.push(t)},current:function(e){var t=o[e];r=o.indexOf(t),l=o[r+1]?r+1:null,a=o[r-1]?r-1:null},href:function(){return d<i.smallSize?o[r].smallHref:d<i.mediumSize?o[r].mediumHref:o[r].href},size:function(){var e=o[r].element.clientWidth,t=o[r].element.clientHeight,n=void 0;d=s.clientWidth,v=s.clientHeight,d>e&&v>t?n=e>t?"cover-vertically":"cover-horizontally":(d>e&&(n="cover-horizontally"),v>t&&(n="cover-vertically")),o[r].element.classList.add(n)},visibility:function(e){"show"===e&&(o[r].element.classList.add("visible"),i.transitionScale>0&&w.transform({scaleValue:o[r].scale-i.transitionScale}),o[r].caption&&o[r].caption.classList.add("visible")),"hide"===e&&(o[r].element.classList.remove("visible"),o[r].caption&&o[r].caption.classList.remove("visible")),"measure"===e&&o[r].element.classList.add("measure"),"measured"===e&&o[r].element.classList.remove("measure")},show:function(){w.visibility("measure"),i.transitionScale>0&&w.transform({scaleValue:o[r].scale+i.transitionScale}),i.coverScreen&&w.size(),setTimeout(function(){w.visibility("show"),setTimeout(function(){w.visibility("measured")},100)},i.transitionSpeed/4)},prepare:function(e){E.removeEventListeners(),w.visibility("hide"),w.current(e),E.visibility("depends"),w.addEventListeners(),o[r].element.src?o[r].loaded?(b.visibility("hide"),w.show()):b.visibility("show"):!function(e){var t=e;b.visibility("show"),p.element.appendChild(o[t].element),o[t].caption&&p.element.appendChild(o[t].caption),o[t].element.src=w.href(),o[t].element.addEventListener("load",function(){o[t].loaded=!0,b.visibility("hide"),t!==r||c||w.show()})}(r),setTimeout(function(){E.addEventListeners()},i.transitionSpeed/2)},transform:function(e){var t=e.scaleValue,n=void 0===t?o[r].scale:t,s=e.rotateValue,l=void 0===s?o[r].rotate:s;k.removeEventListeners();var a=void 0;0===arguments.rotateValue&&(l=0),a="translate(-50%, -50%) scale("+n+") rotate("+l+"deg)",o[r].scale=n,o[r].rotate=l,o[r].element.style.webkitTransform=a,o[r].element.style.msTransform=a,o[r].element.style.transform=a,setTimeout(function(){k.addEventListeners()},i.transitionSpeed/2)},reset:function(){o[r].element.style.transition=o[r].transition+", left "+i.transitionSpeed+"ms ease, top "+i.transitionSpeed+"ms ease",o[r].element.style.left=null,o[r].element.style.top=null,setTimeout(function(){o[r].element.style.transition=o[r].transition},i.transitionSpeed),w.transform({scaleValue:1,rotateValue:0})},click:function(e){L.div.classList.remove("visible"),e.preventDefault()},wheel:function(e){120===e.wheelDelta?o[r].scale+=o[r].scaleRatio:o[r].scale>=.4&&(o[r].scale-=o[r].scaleRatio),w.transform({scaleValue:o[r].scale}),e.preventDefault()},mousedown:function(e){o[r].offx=e.clientX-o[r].element.offsetLeft,o[r].offy=e.clientY-o[r].element.offsetTop,window.addEventListener("mousemove",w.mousemove),e.preventDefault()},mousemove:function(e){var t=function(){o[r].element.style.left=e.clientX-o[r].offx+"px",o[r].element.style.top=e.clientY-o[r].offy+"px"};window.requestAnimationFrame(t)},mouseup:function(e){window.removeEventListener("mousemove",w.mousemove)},addEventListeners:function(){o[r].element.addEventListener("mousedown",w.mousedown),o[r].element.addEventListener("click",w.click),window.addEventListener("wheel",w.wheel),window.addEventListener("mouseup",w.mouseup),i.coverScreen&&window.addEventListener("resize",w.size)},removeEventListeners:function(){o[r].element.removeEventListener("mousedown",w.mousedown),o[r].element.removeEventListener("click",w.click),window.removeEventListener("wheel",w.wheel),window.removeEventListener("mouseup",w.mouseup),i.coverScreen&&window.removeEventListener("resize",w.size)}},h={element:document.createElement("a"),append:function(){h.element.id="kuvaify-close-button",h.element.innerHTML='<svg xmlns="http://www.w3.org/2000/svg" width="50" height="50" viewBox="0 0 50.000001 50.000001"><g stroke="#fff" fill="none" stroke-width="2"><path d="M10 40l30-30M40 40L10 10"/></g></svg>',p.element.appendChild(h.element)},visibility:function(e){"show"===e&&h.element.classList.add("visible"),"hide"===e&&h.element.classList.remove("visible")},close:function(){c=!0,p.visibility("hide"),S.visibility("hide"),w.visibility("hide"),h.visibility("hide"),L.visibility("hide"),E.visibility("hide"),b.visibility("hide"),p.removeEventListeners(),S.removeEventListeners(),w.removeEventListeners(),L.removeEventListeners(),y.removeEventListeners(),g.removeEventListeners(),k.removeEventListeners(),E.removeEventListeners()},closeEvent:function(e){h.close(),e.preventDefault()},keydown:function(e){27===e.keyCode&&h.closeEvent(e)},addEventListeners:function(){h.element.addEventListener("click",h.closeEvent),window.addEventListener("keydown",h.keydown)},removeEventListeners:function(){h.element.removeEventListener("click",h.closeEvent),window.removeEventListener("keydown",h.keydown)}},L={button:document.createElement("a"),div:document.createElement("div"),help:document.createElement("p"),append:function(){L.button.id="kuvaify-menu-button",L.button.innerHTML='<svg xmlns="http://www.w3.org/2000/svg" width="50" height="50" viewBox="0 0 50.000001 50.000001"><g stroke="#fff" fill="none" stroke-width="2"><path d="M10 11h30M10 25h30M10 39h30"/></g></svg>',L.div.id="kuvaify-menu-div",L.help.id="kuvaify-help",L.help.innerHTML="Desktop users can use the <strong>left</strong> and <strong>right</strong> keys to navigate; <strong>up</strong> and <strong>down</strong> or <strong>scroll</strong> to zoom; <strong>page up</strong> and <strong>page down</strong> to rotate; <strong>click</strong> and <strong>drag</strong> to move; <strong>home</strong> to reset; and <strong>esc</strong> to close.",k.append(),g.append(),y.append(),i.showShortcuts&&d>1280&&L.div.appendChild(L.help),p.element.appendChild(L.button),p.element.appendChild(L.div)},visibility:function(e){"show"===e&&L.button.classList.add("visible"),"hide"===e&&(L.button.classList.remove("visible"),L.div.classList.remove("visible"))},click:function(e){L.div.classList.contains("visible")?L.div.classList.remove("visible"):L.div.classList.add("visible"),e.preventDefault()},divClick:function(e){L.div.classList.remove("visible"),e.preventDefault()},addEventListeners:function(){L.button.addEventListener("click",L.click),k.addEventListeners(),g.addEventListeners(),y.addEventListeners()},removeEventListeners:function(){L.button.removeEventListener("click",L.click),k.removeEventListeners(),g.removeEventListeners(),y.removeEventListeners()}},y={element:document.createElement("a"),append:function(){y.element.id="kuvaify-reset-button",y.element.innerHTML='<svg xmlns="http://www.w3.org/2000/svg" width="50" height="50" viewBox="0 0 50.000001 50.000001"><g stroke="#fff" fill="none" stroke-width="2"><path d="M21.62 28.38L10.31 39.69M12 28h10v10"/><g><path d="M28.38 21.62L39.69 10.31M38 22H28V12"/></g></g></svg>',L.div.appendChild(y.element)},reset:function(e){w.reset(),e.preventDefault()},keydown:function(e){36===e.keyCode&&y.reset(e)},addEventListeners:function(){y.element.addEventListener("click",y.reset),window.addEventListener("keydown",y.keydown)},removeEventListeners:function(){y.element.removeEventListener("click",y.reset),window.removeEventListener("keydown",y.keydown)}},g={_out:document.createElement("a"),_in:document.createElement("a"),append:function(){g._out.id="kuvaify-zoom-out-button",g._out.innerHTML='<svg xmlns="http://www.w3.org/2000/svg" width="50" height="50" viewBox="0 0 50.000001 50.000001"><path d="M40 25H10" fill="none" stroke="#fff" stroke-width="2"/></svg>',g._in.id="kuvaify-zoom-in-button",g._in.innerHTML='<svg xmlns="http://www.w3.org/2000/svg" width="50" height="50" viewBox="0 0 50.000001 50.000001"><g fill="none" stroke="#fff" stroke-width="2"><path d="M25 40V10M40 25H10"/></g></svg>',L.div.appendChild(g._out),L.div.appendChild(g._in)},zoomOut:function(e){o[r].scale>=.4&&(o[r].scale-=o[r].scaleRatio),w.transform({scaleValue:o[r].scale}),e.preventDefault()},zoomIn:function(e){o[r].scale+=o[r].scaleRatio,w.transform({scaleValue:o[r].scale}),e.preventDefault()},keydown:function(e){38===e.keyCode&&g.zoomIn(e),40===e.keyCode&&g.zoomOut(e)},addEventListeners:function(){g._out.addEventListener("click",g.zoomOut),g._in.addEventListener("click",g.zoomIn),window.addEventListener("keydown",g.keydown)},removeEventListeners:function(){g._out.removeEventListener("click",g.zoomOut),g._in.removeEventListener("click",g.zoomIn),window.removeEventListener("keydown",g.keydown)}},k={negative:document.createElement("a"),positive:document.createElement("a"),append:function(){k.negative.id="kuvaify-rotate-negative-button",k.negative.innerHTML='<svg xmlns="http://www.w3.org/2000/svg" width="50" height="50" viewBox="0 0 50.000001 50.000001"><g stroke="#fff" fill="none" stroke-width="2"><path d="M25 39c7.732 0 14-6.268 14-14s-6.268-14-14-14-14 6.268-14 14" stroke-linejoin="round"/><path d="M5.03 17.885l5.565 8.308 8.308-5.567"/></g></svg>',k.positive.id="kuvaify-rotate-positive-button",k.positive.innerHTML='<svg xmlns="http://www.w3.org/2000/svg" width="50" height="50" viewBox="0 0 50.000001 50.000001"><g stroke="#fff" fill="none" stroke-width="2"><path d="M25 39c-7.732 0-14-6.268-14-14s6.268-14 14-14 14 6.268 14 14" stroke-linejoin="round"/><path d="M44.97 17.885l-5.565 8.308-8.308-5.567"/></g></svg>',L.div.appendChild(k.negative),L.div.appendChild(k.positive)},negativeRotate:function(e){w.transform({rotateValue:o[r].rotate-90}),e.preventDefault()},positiveRotate:function(e){w.transform({rotateValue:o[r].rotate+90}),e.preventDefault()},keydown:function(e){33===e.keyCode&&k.positiveRotate(e),34===e.keyCode&&k.negativeRotate(e)},addEventListeners:function(){k.negative.addEventListener("click",k.negativeRotate),k.positive.addEventListener("click",k.positiveRotate),window.addEventListener("keydown",k.keydown)},removeEventListeners:function(){k.negative.removeEventListener("click",k.negativeRotate),k.positive.removeEventListener("click",k.positiveRotate),window.removeEventListener("keydown",k.keydown)}},E={next:document.createElement("a"),prev:document.createElement("a"),append:function(){E.next.id="kuvaify-next-button",E.next.innerHTML='<svg xmlns="http://www.w3.org/2000/svg" width="50" height="50" viewBox="0 0 50.000001 50.000001"><path d="M14.467 10l20 15-20 15" fill="none" stroke="#fff" stroke-width="2"/></svg>',E.prev.id="kuvaify-prev-button",E.prev.innerHTML='<svg xmlns="http://www.w3.org/2000/svg" width="50" height="50" viewBox="0 0 50.000001 50.000001"><path d="M35.533 10l-20 15 20 15" fill="none" stroke="#fff" stroke-width="2"/></svg>',p.element.appendChild(E.next),p.element.appendChild(E.prev)},visibility:function(e){"depends"===e&&(null===l?E.next.classList.remove("visible"):E.next.classList.add("visible"),null===a?E.prev.classList.remove("visible"):E.prev.classList.add("visible")),"hide"===e&&(E.next.classList.remove("visible"),E.prev.classList.remove("visible"))},getNext:function(){null!==l&&w.prepare(l)},getPrev:function(){null!==a&&w.prepare(a)},nextImg:function(e){E.getNext(),e.preventDefault()},prevImg:function(e){E.getPrev(),e.preventDefault()},keydown:function(e){39===e.keyCode&&E.getNext(e),37===e.keyCode&&E.getPrev(e)},addEventListeners:function(){E.next.addEventListener("click",E.nextImg),E.prev.addEventListener("click",E.prevImg),window.addEventListener("keydown",E.keydown)},removeEventListeners:function(){E.next.removeEventListener("click",E.nextImg),E.prev.removeEventListener("click",E.prevImg),window.removeEventListener("keydown",E.keydown)}},b={element:document.createElement("div"),append:function(){b.element.id="kuvaify-spinner",b.element.innerHTML='<div class="sk-folding-cube"><div class="sk-cube1 sk-cube"></div><div class="sk-cube2 sk-cube"></div><div class="sk-cube4 sk-cube"></div><div class="sk-cube3 sk-cube"></div></div>',b.element.style.transition="opacity "+i.transitionSpeed+"ms ease, visibility "+i.transitionSpeed+"ms ease",p.element.appendChild(b.element)},visibility:function(e){"show"===e&&b.element.classList.add("visible"),"hide"===e&&b.element.classList.remove("visible")}},S={element:document.createElement("div"),append:function(){S.element.id="kuvaify-close-div",p.element.appendChild(S.element)},visibility:function(e){"show"===e&&S.element.classList.add("visible"),"hide"===e&&S.element.classList.remove("visible")},click:function(e){h.close(),e.preventDefault()},addEventListeners:function(){S.element.addEventListener("click",S.click)},removeEventListeners:function(){S.element.removeEventListener("click",S.click)}};n["default"]=m},{}],2:[function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{"default":e}}var s=e("./kuvaify"),o=i(s),r=((0,o["default"])(),document.querySelector("#demo-button")),l=document.querySelector("#demo-link");r.addEventListener("click",function(e){l.click(),e.preventDefault()})},{"./kuvaify":1}]},{},[2]);
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIm5vZGVfbW9kdWxlcy9icm93c2VyaWZ5L25vZGVfbW9kdWxlcy9icm93c2VyLXBhY2svX3ByZWx1ZGUuanMiLCJzcmMvanMva3V2YWlmeS5qcyIsImFsbC5taW4uanMiLCJzcmMvanMvbWFpbi5qcyJdLCJuYW1lcyI6WyJlIiwidCIsIm4iLCJyIiwicyIsIm8iLCJ1IiwiYSIsInJlcXVpcmUiLCJpIiwiZiIsIkVycm9yIiwiY29kZSIsImwiLCJleHBvcnRzIiwiY2FsbCIsImxlbmd0aCIsMSwibW9kdWxlIiwiT2JqZWN0IiwiZGVmaW5lUHJvcGVydHkiLCJ2YWx1ZSIsIm9wdGlvbnMiLCJsaW5rRWxlbWVudCIsImZpbGVUeXBlcyIsImNvdmVyU2NyZWVuIiwic2hvd1Nob3J0Y3V0cyIsInRyYW5zaXRpb25TcGVlZCIsInRyYW5zaXRpb25TY2FsZSIsInpvb21SYXRpbyIsInNtYWxsU2l6ZSIsIm1lZGl1bVNpemUiLCJib2R5IiwiZG9jdW1lbnQiLCJpbWFnZXMiLCJjdXJyZW50SW5kZXgiLCJuZXh0SW5kZXgiLCJwcmV2SW5kZXgiLCJzY3JlZW5XaWR0aCIsImNsaWVudFdpZHRoIiwic2NyZWVuSGVpZ2h0IiwiY2xpZW50SGVpZ2h0IiwiY2xvc2VkIiwic2V0dXAiLCJzZXR0aW5ncyIsImFyZ3VtZW50cyIsInVuZGVmaW5lZCIsImNvbnN0cnVjdG9yIiwiQXJyYXkiLCJ6b29tU2NhbGUiLCJsaW5rcyIsImdldCIsInB1c2giLCJhZGRFdmVudExpc3RlbmVycyIsImluaXQiLCJ0ZW1wTGlua3MiLCJmcm9tIiwicXVlcnlTZWxlY3RvckFsbCIsImpvaW4iLCJyZWdleCIsIlJlZ0V4cCIsImZvckVhY2giLCJsaW5rIiwicGF0aG5hbWUiLCJtYXRjaCIsImltZyIsImFkZEV2ZW50TGlzdGVuZXIiLCJldmVudCIsImluZGV4IiwiaW5kZXhPZiIsImN1cnJlbnQiLCJvdmVybGF5IiwiYXBwZW5kIiwiY2xvc2VEaXYiLCJfY2xvc2UiLCJtZW51IiwibmF2aWdhdGlvbiIsInNwaW5uZXIiLCJzZXRUaW1lb3V0IiwidmlzaWJpbGl0eSIsInByZXBhcmUiLCJwcmV2ZW50RGVmYXVsdCIsImVsZW1lbnQiLCJjcmVhdGVFbGVtZW50IiwiZm9jdXNTdGFydGVkIiwiZm9jdXMiLCJpZCIsInN0eWxlIiwidHJhbnNpdGlvbiIsImFwcGVuZENoaWxkIiwid2hhdCIsImNsYXNzTGlzdCIsImFkZCIsInJlbW92ZSIsIndpbmRvdyIsInJlbW92ZUV2ZW50TGlzdGVuZXJzIiwicmVtb3ZlRXZlbnRMaXN0ZW5lciIsImhyZWYiLCJzbWFsbEhyZWYiLCJnZXRBdHRyaWJ1dGUiLCJtZWRpdW1IcmVmIiwiY2FwdGlvbiIsInNjYWxlIiwic2NhbGVSYXRpbyIsInJvdGF0ZSIsIm9mZngiLCJvZmZ5IiwibG9hZGVkIiwibGVmdCIsInRvcCIsImlubmVySFRNTCIsInJlcGxhY2UiLCJzaXplIiwiaW1nV2lkdGgiLCJpbWdIZWlnaHQiLCJ0cmFuc2Zvcm0iLCJzY2FsZVZhbHVlIiwic2hvdyIsInNyYyIsInRoaXNJbmRleCIsIl9yZWYiLCJfcmVmJHNjYWxlVmFsdWUiLCJfcmVmJHJvdGF0ZVZhbHVlIiwicm90YXRlVmFsdWUiLCJ0cmFuc2Zvcm1TdHJpbmciLCJ3ZWJraXRUcmFuc2Zvcm0iLCJtc1RyYW5zZm9ybSIsInJlc2V0IiwiY2xpY2siLCJkaXYiLCJ3aGVlbCIsIndoZWVsRGVsdGEiLCJtb3VzZWRvd24iLCJjbGllbnRYIiwib2Zmc2V0TGVmdCIsImNsaWVudFkiLCJvZmZzZXRUb3AiLCJtb3VzZW1vdmUiLCJtb3ZlIiwicmVxdWVzdEFuaW1hdGlvbkZyYW1lIiwibW91c2V1cCIsImNsb3NlIiwiem9vbSIsImNsb3NlRXZlbnQiLCJrZXlkb3duIiwia2V5Q29kZSIsImJ1dHRvbiIsImhlbHAiLCJjb250YWlucyIsImRpdkNsaWNrIiwiX291dCIsIl9pbiIsInpvb21PdXQiLCJ6b29tSW4iLCJuZWdhdGl2ZSIsInBvc2l0aXZlIiwibmVnYXRpdmVSb3RhdGUiLCJwb3NpdGl2ZVJvdGF0ZSIsIm5leHQiLCJwcmV2IiwiZ2V0TmV4dCIsImdldFByZXYiLCJuZXh0SW1nIiwicHJldkltZyIsMiwiX2ludGVyb3BSZXF1aXJlRGVmYXVsdCIsIm9iaiIsIl9fZXNNb2R1bGUiLCJkZWZhdWx0IiwiX2t1dmFpZnkiLCJfa3V2YWlmeTIiLCJkZW1vQnV0dG9uIiwicXVlcnlTZWxlY3RvciIsImRlbW9MaW5rIiwiLi9rdXZhaWZ5Il0sIm1hcHBpbmdzIjoiQ0FBQSxRQUFBQSxHQUFBQyxFQUFBQyxFQUFBQyxHQUFBLFFBQUFDLEdBQUFDLEVBQUFDLEdBQUEsSUFBQUosRUFBQUcsR0FBQSxDQUFBLElBQUFKLEVBQUFJLEdBQUEsQ0FBQSxHQUFBRSxHQUFBLGtCQUFBQyxVQUFBQSxPQUFBLEtBQUFGLEdBQUFDLEVBQUEsTUFBQUEsR0FBQUYsR0FBQSxFQUFBLElBQUFJLEVBQUEsTUFBQUEsR0FBQUosR0FBQSxFQUFBLElBQUFLLEdBQUEsR0FBQUMsT0FBQSx1QkFBQU4sRUFBQSxJQUFBLE1BQUFLLEdBQUFFLEtBQUEsbUJBQUFGLEVBQUEsR0FBQUcsR0FBQVgsRUFBQUcsSUFBQVMsV0FBQWIsR0FBQUksR0FBQSxHQUFBVSxLQUFBRixFQUFBQyxRQUFBLFNBQUFkLEdBQUEsR0FBQUUsR0FBQUQsRUFBQUksR0FBQSxHQUFBTCxFQUFBLE9BQUFJLEdBQUFGLEVBQUFBLEVBQUFGLElBQUFhLEVBQUFBLEVBQUFDLFFBQUFkLEVBQUFDLEVBQUFDLEVBQUFDLEdBQUEsTUFBQUQsR0FBQUcsR0FBQVMsUUFBQSxJQUFBLEdBQUFMLEdBQUEsa0JBQUFELFVBQUFBLFFBQUFILEVBQUEsRUFBQUEsRUFBQUYsRUFBQWEsT0FBQVgsSUFBQUQsRUFBQUQsRUFBQUUsR0FBQSxPQUFBRCxLQUFBYSxHQUFBLFNBQUFULEVBQUFVLEVBQUFKLEdDQUEsWUNHQUssUUFBT0MsZUFBZU4sRUFBUyxjQUM3Qk8sT0FBTyxHREZULElBQU1DLElBQ0pDLFlBQWEsT0FDYkMsV0FBWSxNQUFPLE9BQVEsTUFBTyxPQUNsQ0MsYUFBYSxFQUNiQyxlQUFlLEVBQ2ZDLGdCQUFpQixJQUNqQkMsZ0JBQWlCLElBQ2pCQyxVQUFXLEdBQ1hDLFVBQVcsSUFDWEMsV0FBWSxNQUdSQyxFQUFPQyxTQUFTRCxLQUNoQkUsS0FDRkMsRUFBZSxLQUNmQyxFQUFZLEtBQ1pDLEVBQVksS0FDWkMsRUFBY04sRUFBS08sWUFDbkJDLEVBQWVSLEVBQUtTLGFBQ3BCQyxHQUFTLEVBRVBDLEVBQVEsV0NLWixHRExhQyxHQUFBQyxVQUFBN0IsUUFBQSxHQUFBOEIsU0FBQUQsVUFBQSxNQUFXQSxVQUFBLEVBQ3BCRCxHQUFTckIsYUFDeUIsZ0JBQXpCcUIsR0FBU3JCLGNBQ2xCRCxFQUFRQyxZQUFjcUIsRUFBU3JCLGFBRy9CcUIsRUFBU3BCLFdBQ1BvQixFQUFTcEIsVUFBVXVCLGNBQWdCQyxRQUNyQzFCLEVBQVFFLFVBQVlvQixFQUFTcEIsV0FHSnNCLFNBQXpCRixFQUFTbkIsYUFDUG1CLEVBQVNuQixlQUFnQixJQUMzQkgsRUFBUUcsYUFBYyxHQUdLcUIsU0FBM0JGLEVBQVNsQixlQUNQa0IsRUFBU2xCLGlCQUFrQixJQUM3QkosRUFBUUksZUFBZ0IsR0FHeEJrQixFQUFTakIsaUJBQzZCLGdCQUE3QmlCLEdBQVNqQixpQkFBZ0NpQixFQUFTakIsaUJBQW1CLE1BQzlFTCxFQUFRSyxnQkFBa0JpQixFQUFTakIsaUJBR25DaUIsRUFBU2hCLGtCQUM2QixnQkFBN0JnQixHQUFTaEIsa0JBQ2xCTixFQUFRTSxnQkFBa0JnQixFQUFTaEIsaUJBRUosSUFBN0JnQixFQUFTaEIsa0JBQ1hOLEVBQVFNLGdCQUFrQixJQUcxQmdCLEVBQVNLLFlBQ3VCLGdCQUF2QkwsR0FBU0ssWUFDbEIzQixFQUFRMkIsVUFBWUwsRUFBU0ssV0FFSixJQUF2QkwsRUFBU0ssWUFDWDNCLEVBQVEyQixVQUFZLElBR3BCTCxFQUFTZCxXQUN1QixnQkFBdkJjLEdBQVNkLFlBQ2xCUixFQUFRUSxVQUFZYyxFQUFTZCxXQUc3QmMsRUFBU2IsWUFDd0IsZ0JBQXhCYSxHQUFTYixhQUNsQlQsRUFBUVMsV0FBYWEsRUFBU2IsWUFJbENtQixFQUFNQyxNQUNORCxFQUFNRSxPQUNORixFQUFNRyxxQkFHRkMsRUFBTyxTQUFBVixHQUNYRCxFQUFNQyxJQUdGTSxHQUNKQSxTQUVBQyxJQUFBLFdBQ0UsR0FBTUksR0FBWVAsTUFBTVEsS0FBS3ZCLFNBQVN3QixpQkFBaUJuQyxFQUFRQyxZQUFjLE9BQ3ZFQyxFQUFZRixFQUFRRSxVQUFVa0MsS0FBSyxLQUNuQ0MsRUFBUSxHQUFJQyxRQUFPLEtBQVFwQyxFQUFZLEtBRTdDK0IsR0FBVU0sUUFBUSxTQUFVQyxHQUN0QkEsRUFBS0MsU0FBU0MsTUFBTUwsSUFDdEJULEVBQU1BLE1BQU1FLEtBQUtVLE1BS3ZCVixLQUFBLFdBQ0VGLEVBQU1BLE1BQU1XLFFBQVEsU0FBQUMsR0FDbEJHLEVBQUliLEtBQUtVLE1BSWJULGtCQUFBLFdBQ0VILEVBQU1BLE1BQU1XLFFBQVEsU0FBQUMsR0FDbEJBLEVBQUtJLGlCQUFpQixRQUFTLFNBQUFDLEdBQzdCekIsR0FBUyxDQUVULElBQU0wQixHQUFRbEIsRUFBTUEsTUFBTW1CLFFBQVFQLEVBRWxDRyxHQUFJSyxRQUFRRixHQUVaRyxFQUFRQyxTQUNSQyxFQUFTRCxTQUNURSxFQUFNRixTQUNORyxFQUFLSCxTQUNMSSxFQUFXSixTQUNYSyxFQUFRTCxTQUVSTSxXQUFXLFdBQ1RQLEVBQVFRLFdBQVcsUUFDbkJMLEVBQU1LLFdBQVcsUUFDakJKLEVBQUtJLFdBQVcsUUFDaEJILEVBQVdHLFdBQVcsV0FFdEJkLEVBQUllLFFBQVFaLElBQ1gsS0FFSFUsV0FBVyxXQUNUUCxFQUFRbEIsb0JBQ1JvQixFQUFTcEIsb0JBQ1RzQixFQUFLdEIsb0JBQ0xxQixFQUFNckIsb0JBQ051QixFQUFXdkIscUJBQ1YsS0FFSGMsRUFBTWMsdUJBTVJWLEdBQ0pXLFFBQVNqRCxTQUFTa0QsY0FBYyxPQUNoQ0MsY0FBYyxFQUVkQyxNQUFBLFNBQU9sQixHQUNESSxFQUFRYSxnQkFBaUIsSUFDM0JiLEVBQVFRLFdBQVcsU0FFbkJELFdBQVcsV0FDVFAsRUFBUVEsV0FBVyxXQUVuQlIsRUFBUWEsY0FBZSxHQUN0QixNQUdMYixFQUFRYSxjQUFlLEdBR3pCWixPQUFBLFdBQ0VELEVBQVFXLFFBQVFJLEdBQUssVUFDckJmLEVBQVFXLFFBQVFLLE1BQU1DLFdBQWEsV0FBYWxFLEVBQVFLLGdCQUFrQix1QkFBeUJMLEVBQVFLLGdCQUFrQixVQUU3SEssRUFBS3lELFlBQVlsQixFQUFRVyxVQUczQkgsV0FBQSxTQUFZVyxHQUNHLFNBQVRBLEdBQ0ZuQixFQUFRVyxRQUFRUyxVQUFVQyxJQUFJLFdBRW5CLFNBQVRGLEdBQ0ZuQixFQUFRVyxRQUFRUyxVQUFVRSxPQUFPLFdBRXRCLFVBQVRILEdBQ0ZuQixFQUFRVyxRQUFRUyxVQUFVQyxJQUFJLFdBRW5CLFlBQVRGLEdBQ0ZuQixFQUFRVyxRQUFRUyxVQUFVRSxPQUFPLFlBSXJDeEMsa0JBQW1CLFdBQ2pCeUMsT0FBTzVCLGlCQUFpQixZQUFhSyxFQUFRYyxRQUcvQ1UscUJBQXNCLFdBQ3BCRCxPQUFPRSxvQkFBb0IsWUFBYXpCLEVBQVFjLFNBSTlDcEIsR0FDSmIsS0FBQSxTQUFNVSxHQUNKLEdBQU1HLElBQ0ppQixRQUFTakQsU0FBU2tELGNBQWMsT0FDaENjLEtBQU1uQyxFQUFLQyxTQUNYbUMsVUFBV3BDLEVBQUtxQyxhQUFhLHVCQUF5QixLQUN0REMsV0FBWXRDLEVBQUtxQyxhQUFhLHdCQUEwQixLQUN4REUsUUFBUyxLQUNUQyxNQUFPLEVBQ1BDLFdBQVlqRixFQUFRTyxVQUNwQjJFLE9BQVEsRUFDUkMsS0FBTSxFQUNOQyxLQUFNLEVBQ05sQixXQUFBLFNBQXFCbEUsRUFBUUssZ0JBQVIsbUJBQTBDTCxFQUFRSyxnQkFBUixzQkFBNkNMLEVBQVFLLGdCQUFSLG9CQUEyQ0wsRUFBUUssZ0JBQVIsdUJBQThDTCxFQUFRSyxnQkFBUixVQUNyTWdGLFFBQVEsRUFHVjFDLEdBQUlpQixRQUFRSyxNQUFNQyxXQUFhdkIsRUFBSXVCLFdBQ25DdkIsRUFBSWlCLFFBQVFLLE1BQU1xQixLQUFPLEtBQ3pCM0MsRUFBSWlCLFFBQVFLLE1BQU1zQixJQUFNLEtBQ3hCNUMsRUFBSWlCLFFBQVFTLFVBQVVDLElBQUksZUFFdEI5QixFQUFLcUMsYUFBYSwwQkFDcEJsQyxFQUFJb0MsUUFBVXBFLFNBQVNrRCxjQUFjLE9BQ3JDbEIsRUFBSW9DLFFBQVFTLFVBQVksTUFBUWhELEVBQUtxQyxhQUFhLHdCQUF3QlksUUFBUSxZQUFZLElBQU0sT0FDcEc5QyxFQUFJb0MsUUFBUWYsR0FBSyxrQkFDakJyQixFQUFJb0MsUUFBUWQsTUFBTUMsV0FBYSxXQUFhbEUsRUFBUUssZ0JBQWtCLHVCQUF5QkwsRUFBUUssZ0JBQWtCLFdBRzNITyxFQUFPa0IsS0FBS2EsSUFHZEssUUFBQSxTQUFTRixHQUNQLEdBQU1ILEdBQU0vQixFQUFPa0MsRUFFbkJqQyxHQUFlRCxFQUFPbUMsUUFBUUosR0FHNUI3QixFQURFRixFQUFPQyxFQUFlLEdBQ1pBLEVBQWUsRUFFZixLQUdaRSxFQURFSCxFQUFPQyxFQUFlLEdBQ1pBLEVBQWUsRUFFZixNQUloQjhELEtBQUEsV0FDRSxNQUFJM0QsR0FBY2hCLEVBQVFRLFVBQ2pCSSxFQUFPQyxHQUFjK0QsVUFFMUI1RCxFQUFjaEIsRUFBUVMsV0FDakJHLEVBQU9DLEdBQWNpRSxXQUd2QmxFLEVBQU9DLEdBQWM4RCxNQUc5QmUsS0FBQSxXQUNFLEdBQU1DLEdBQVcvRSxFQUFPQyxHQUFjK0MsUUFBUTNDLFlBQ3hDMkUsRUFBWWhGLEVBQU9DLEdBQWMrQyxRQUFRekMsYUFDM0NpRCxFQUFBNUMsTUFFSlIsR0FBY04sRUFBS08sWUFDbkJDLEVBQWVSLEVBQUtTLGFBRUxILEVBQVgyRSxHQUFzQ3pFLEVBQVowRSxFQUUxQnhCLEVBREV1QixFQUFXQyxFQUNOLG1CQUVBLHNCQUdNNUUsRUFBWDJFLElBQ0Z2QixFQUFPLHNCQUVPbEQsRUFBWjBFLElBQ0Z4QixFQUFPLHFCQUlYeEQsRUFBT0MsR0FBYytDLFFBQVFTLFVBQVVDLElBQUlGLElBRzdDWCxXQUFBLFNBQVlXLEdBQ0csU0FBVEEsSUFDRnhELEVBQU9DLEdBQWMrQyxRQUFRUyxVQUFVQyxJQUFJLFdBRXZDdEUsRUFBUU0sZ0JBQWtCLEdBQzVCcUMsRUFBSWtELFdBQ0ZDLFdBQVlsRixFQUFPQyxHQUFjbUUsTUFBUWhGLEVBQVFNLGtCQUlqRE0sRUFBT0MsR0FBY2tFLFNBQ3ZCbkUsRUFBT0MsR0FBY2tFLFFBQVFWLFVBQVVDLElBQUksWUFHbEMsU0FBVEYsSUFDRnhELEVBQU9DLEdBQWMrQyxRQUFRUyxVQUFVRSxPQUFPLFdBRTFDM0QsRUFBT0MsR0FBY2tFLFNBQ3ZCbkUsRUFBT0MsR0FBY2tFLFFBQVFWLFVBQVVFLE9BQU8sWUFHckMsWUFBVEgsR0FDRnhELEVBQU9DLEdBQWMrQyxRQUFRUyxVQUFVQyxJQUFJLFdBRWhDLGFBQVRGLEdBQ0Z4RCxFQUFPQyxHQUFjK0MsUUFBUVMsVUFBVUUsT0FBTyxZQUlsRHdCLEtBQUEsV0FDRXBELEVBQUljLFdBQVcsV0FFWHpELEVBQVFNLGdCQUFrQixHQUM1QnFDLEVBQUlrRCxXQUNGQyxXQUFZbEYsRUFBT0MsR0FBY21FLE1BQVFoRixFQUFRTSxrQkFHakROLEVBQVFHLGFBQ1Z3QyxFQUFJK0MsT0FHTmxDLFdBQVcsV0FDVGIsRUFBSWMsV0FBVyxRQUVmRCxXQUFXLFdBQ1RiLEVBQUljLFdBQVcsYUFDZCxNQUNGekQsRUFBUUssZ0JBQWtCLElBRy9CcUQsUUFBQSxTQUFTWixHQUNQUSxFQUFXbUIsdUJBRVg5QixFQUFJYyxXQUFXLFFBRWZkLEVBQUlLLFFBQVFGLEdBRVpRLEVBQVdHLFdBQVcsV0FFdEJkLEVBQUlaLG9CQUVDbkIsRUFBT0MsR0FBYytDLFFBQVFvQyxJQXlCNUJwRixFQUFPQyxHQUFjd0UsUUFDdkI5QixFQUFRRSxXQUFXLFFBRW5CZCxFQUFJb0QsUUFFSnhDLEVBQVFFLFdBQVcsU0E5QmdCLFNBQ25DWCxHQUNBLEdBQU1tRCxHQUFZbkQsQ0FFbEJTLEdBQVFFLFdBQVcsUUFFbkJSLEVBQVFXLFFBQVFPLFlBQVl2RCxFQUFPcUYsR0FBV3JDLFNBRTFDaEQsRUFBT3FGLEdBQVdsQixTQUNwQjlCLEVBQVFXLFFBQVFPLFlBQVl2RCxFQUFPcUYsR0FBV2xCLFNBR2hEbkUsRUFBT3FGLEdBQVdyQyxRQUFRb0MsSUFBTXJELEVBQUlnQyxPQUVwQy9ELEVBQU9xRixHQUFXckMsUUFBUWhCLGlCQUFpQixPQUFRLFdBQ2pEaEMsRUFBT3FGLEdBQVdaLFFBQVMsRUFFM0I5QixFQUFRRSxXQUFXLFFBRWZ3QyxJQUFjcEYsR0FBaUJPLEdBQ2pDdUIsRUFBSW9ELFVBR1BsRixHQVVMMkMsV0FBVyxXQUNURixFQUFXdkIscUJBQ1YvQixFQUFRSyxnQkFBa0IsSUFHL0J3RixVQUFBLFNBQUFLLEdDSEUsR0FBSUMsR0FBa0JELEVER1hKLFdBQUFBLEVBQUF0RSxTQUFBMkUsRUFBYXZGLEVBQU9DLEdBQWNtRSxNQUFyQm1CLEVDRHBCQyxFQUFtQkYsRURDNkJHLFlBQUFBLEVBQUE3RSxTQUFBNEUsRUFBY3hGLEVBQU9DLEdBQWNxRSxPQUFyQmtCLENBQ2xFbEIsR0FBT1Qsc0JBRVAsSUFBSTZCLEdBQUE5RSxNQUUwQixLQUExQkQsVUFBVThFLGNBQ1pBLEVBQWMsR0FHaEJDLEVBQWtCLCtCQUFpQ1IsRUFBYSxZQUFjTyxFQUFjLE9BRTVGekYsRUFBT0MsR0FBY21FLE1BQVFjLEVBQzdCbEYsRUFBT0MsR0FBY3FFLE9BQVNtQixFQUM5QnpGLEVBQU9DLEdBQWMrQyxRQUFRSyxNQUFNc0MsZ0JBQWtCRCxFQUNyRDFGLEVBQU9DLEdBQWMrQyxRQUFRSyxNQUFNdUMsWUFBY0YsRUFDakQxRixFQUFPQyxHQUFjK0MsUUFBUUssTUFBTTRCLFVBQVlTLEVBRS9DOUMsV0FBVyxXQUNUMEIsRUFBT25ELHFCQUNOL0IsRUFBUUssZ0JBQWtCLElBRy9Cb0csTUFBQSxXQUNFN0YsRUFBT0MsR0FBYytDLFFBQVFLLE1BQU1DLFdBQWF0RCxFQUFPQyxHQUFjcUQsV0FBYSxVQUFZbEUsRUFBUUssZ0JBQWtCLGdCQUFrQkwsRUFBUUssZ0JBQWtCLFVBQ3BLTyxFQUFPQyxHQUFjK0MsUUFBUUssTUFBTXFCLEtBQU8sS0FDMUMxRSxFQUFPQyxHQUFjK0MsUUFBUUssTUFBTXNCLElBQU0sS0FFekMvQixXQUFXLFdBQ1Q1QyxFQUFPQyxHQUFjK0MsUUFBUUssTUFBTUMsV0FBYXRELEVBQU9DLEdBQWNxRCxZQUNwRWxFLEVBQVFLLGlCQUVYc0MsRUFBSWtELFdBQ0ZDLFdBQVksRUFDWk8sWUFBYSxLQUlqQkssTUFBQSxTQUFPN0QsR0FDTFEsRUFBS3NELElBQUl0QyxVQUFVRSxPQUFPLFdBRTFCMUIsRUFBTWMsa0JBR1JpRCxNQUFBLFNBQU8vRCxHQUNvQixNQUFyQkEsRUFBTWdFLFdBQ1JqRyxFQUFPQyxHQUFjbUUsT0FBU3BFLEVBQU9DLEdBQWNvRSxXQUUvQ3JFLEVBQU9DLEdBQWNtRSxPQUFTLEtBQ2hDcEUsRUFBT0MsR0FBY21FLE9BQVNwRSxFQUFPQyxHQUFjb0UsWUFJdkR0QyxFQUFJa0QsV0FDRkMsV0FBWWxGLEVBQU9DLEdBQWNtRSxRQUduQ25DLEVBQU1jLGtCQUdSbUQsVUFBQSxTQUFXakUsR0FDVGpDLEVBQU9DLEdBQWNzRSxLQUFPdEMsRUFBTWtFLFFBQVVuRyxFQUFPQyxHQUFjK0MsUUFBUW9ELFdBQ3pFcEcsRUFBT0MsR0FBY3VFLEtBQU92QyxFQUFNb0UsUUFBVXJHLEVBQU9DLEdBQWMrQyxRQUFRc0QsVUFFekUxQyxPQUFPNUIsaUJBQWlCLFlBQWFELEVBQUl3RSxXQUV6Q3RFLEVBQU1jLGtCQUdSd0QsVUFBQSxTQUFXdEUsR0FDVCxHQUFNdUUsR0FBTyxXQUNYeEcsRUFBT0MsR0FBYytDLFFBQVFLLE1BQU1xQixLQUFPekMsRUFBTWtFLFFBQVVuRyxFQUFPQyxHQUFjc0UsS0FBTyxLQUN0RnZFLEVBQU9DLEdBQWMrQyxRQUFRSyxNQUFNc0IsSUFBTTFDLEVBQU1vRSxRQUFVckcsRUFBT0MsR0FBY3VFLEtBQU8sS0FHdkZaLFFBQU82QyxzQkFBc0JELElBRy9CRSxRQUFBLFNBQVN6RSxHQUNQMkIsT0FBT0Usb0JBQW9CLFlBQWEvQixFQUFJd0UsWUFHOUNwRixrQkFBQSxXQUNFbkIsRUFBT0MsR0FBYytDLFFBQVFoQixpQkFBaUIsWUFBYUQsRUFBSW1FLFdBQy9EbEcsRUFBT0MsR0FBYytDLFFBQVFoQixpQkFBaUIsUUFBU0QsRUFBSStELE9BRTNEbEMsT0FBTzVCLGlCQUFpQixRQUFTRCxFQUFJaUUsT0FDckNwQyxPQUFPNUIsaUJBQWlCLFVBQVdELEVBQUkyRSxTQUVuQ3RILEVBQVFHLGFBQ1ZxRSxPQUFPNUIsaUJBQWlCLFNBQVVELEVBQUkrQyxPQUkxQ2pCLHFCQUFBLFdBQ0U3RCxFQUFPQyxHQUFjK0MsUUFBUWMsb0JBQW9CLFlBQWEvQixFQUFJbUUsV0FDbEVsRyxFQUFPQyxHQUFjK0MsUUFBUWMsb0JBQW9CLFFBQVMvQixFQUFJK0QsT0FFOURsQyxPQUFPRSxvQkFBb0IsUUFBUy9CLEVBQUlpRSxPQUN4Q3BDLE9BQU9FLG9CQUFvQixVQUFXL0IsRUFBSTJFLFNBRXRDdEgsRUFBUUcsYUFDVnFFLE9BQU9FLG9CQUFvQixTQUFVL0IsRUFBSStDLFFBS3pDdEMsR0FDSlEsUUFBU2pELFNBQVNrRCxjQUFjLEtBRWhDWCxPQUFBLFdBQ0VFLEVBQU1RLFFBQVFJLEdBQUssdUJBQ25CWixFQUFNUSxRQUFRNEIsVUFBWSxnTUFFMUJ2QyxFQUFRVyxRQUFRTyxZQUFZZixFQUFNUSxVQUdwQ0gsV0FBQSxTQUFZVyxHQUNHLFNBQVRBLEdBQ0ZoQixFQUFNUSxRQUFRUyxVQUFVQyxJQUFJLFdBRWpCLFNBQVRGLEdBQ0ZoQixFQUFNUSxRQUFRUyxVQUFVRSxPQUFPLFlBSW5DZ0QsTUFBQSxXQUNFbkcsR0FBUyxFQUVUNkIsRUFBUVEsV0FBVyxRQUNuQk4sRUFBU00sV0FBVyxRQUNwQmQsRUFBSWMsV0FBVyxRQUNmTCxFQUFNSyxXQUFXLFFBQ2pCSixFQUFLSSxXQUFXLFFBQ2hCSCxFQUFXRyxXQUFXLFFBQ3RCRixFQUFRRSxXQUFXLFFBRW5CUixFQUFRd0IsdUJBQ1J0QixFQUFTc0IsdUJBQ1Q5QixFQUFJOEIsdUJBQ0pwQixFQUFLb0IsdUJBQ0xnQyxFQUFNaEMsdUJBQ04rQyxFQUFLL0MsdUJBQ0xTLEVBQU9ULHVCQUNQbkIsRUFBV21CLHdCQUdiZ0QsV0FBQSxTQUFZNUUsR0FDVk8sRUFBTW1FLFFBRU4xRSxFQUFNYyxrQkFHUitELFFBQUEsU0FBUzdFLEdBQ2UsS0FBbEJBLEVBQU04RSxTQUNSdkUsRUFBTXFFLFdBQVc1RSxJQUlyQmQsa0JBQUEsV0FDRXFCLEVBQU1RLFFBQVFoQixpQkFBaUIsUUFBU1EsRUFBTXFFLFlBRTlDakQsT0FBTzVCLGlCQUFpQixVQUFXUSxFQUFNc0UsVUFHM0NqRCxxQkFBQSxXQUNFckIsRUFBTVEsUUFBUWMsb0JBQW9CLFFBQVN0QixFQUFNcUUsWUFFakRqRCxPQUFPRSxvQkFBb0IsVUFBV3RCLEVBQU1zRSxXQUkxQ3JFLEdBQ0p1RSxPQUFRakgsU0FBU2tELGNBQWMsS0FDL0I4QyxJQUFLaEcsU0FBU2tELGNBQWMsT0FDNUJnRSxLQUFNbEgsU0FBU2tELGNBQWMsS0FFN0JYLE9BQUEsV0FDRUcsRUFBS3VFLE9BQU81RCxHQUFLLHNCQUNqQlgsRUFBS3VFLE9BQU9wQyxVQUFZLG1NQUN4Qm5DLEVBQUtzRCxJQUFJM0MsR0FBSyxtQkFDZFgsRUFBS3dFLEtBQUs3RCxHQUFLLGVBQ2ZYLEVBQUt3RSxLQUFLckMsVUFBWSxpWEFFdEJOLEVBQU9oQyxTQUNQc0UsRUFBS3RFLFNBQ0x1RCxFQUFNdkQsU0FFRmxELEVBQVFJLGVBQWlCWSxFQUFjLE1BQ3pDcUMsRUFBS3NELElBQUl4QyxZQUFZZCxFQUFLd0UsTUFHNUI1RSxFQUFRVyxRQUFRTyxZQUFZZCxFQUFLdUUsUUFDakMzRSxFQUFRVyxRQUFRTyxZQUFZZCxFQUFLc0QsTUFHbkNsRCxXQUFBLFNBQVlXLEdBQ0csU0FBVEEsR0FDRmYsRUFBS3VFLE9BQU92RCxVQUFVQyxJQUFJLFdBRWYsU0FBVEYsSUFDRmYsRUFBS3VFLE9BQU92RCxVQUFVRSxPQUFPLFdBQzdCbEIsRUFBS3NELElBQUl0QyxVQUFVRSxPQUFPLGFBSTlCbUMsTUFBQSxTQUFPN0QsR0FDQVEsRUFBS3NELElBQUl0QyxVQUFVeUQsU0FBUyxXQUcvQnpFLEVBQUtzRCxJQUFJdEMsVUFBVUUsT0FBTyxXQUYxQmxCLEVBQUtzRCxJQUFJdEMsVUFBVUMsSUFBSSxXQUt6QnpCLEVBQU1jLGtCQUdSb0UsU0FBQSxTQUFVbEYsR0FDUlEsRUFBS3NELElBQUl0QyxVQUFVRSxPQUFPLFdBRTFCMUIsRUFBTWMsa0JBR1I1QixrQkFBQSxXQUNFc0IsRUFBS3VFLE9BQU9oRixpQkFBaUIsUUFBU1MsRUFBS3FELE9BRTNDeEIsRUFBT25ELG9CQUNQeUYsRUFBS3pGLG9CQUNMMEUsRUFBTTFFLHFCQUdSMEMscUJBQUEsV0FDRXBCLEVBQUt1RSxPQUFPbEQsb0JBQW9CLFFBQVNyQixFQUFLcUQsT0FFOUN4QixFQUFPVCx1QkFDUCtDLEVBQUsvQyx1QkFDTGdDLEVBQU1oQyx5QkFJSmdDLEdBQ0o3QyxRQUFTakQsU0FBU2tELGNBQWMsS0FFaENYLE9BQUEsV0FDRXVELEVBQU03QyxRQUFRSSxHQUFLLHVCQUNuQnlDLEVBQU03QyxRQUFRNEIsVUFBWSxtUUFFMUJuQyxFQUFLc0QsSUFBSXhDLFlBQVlzQyxFQUFNN0MsVUFHN0I2QyxNQUFBLFNBQU81RCxHQUNMRixFQUFJOEQsUUFFSjVELEVBQU1jLGtCQUdSK0QsUUFBQSxTQUFTN0UsR0FDZSxLQUFsQkEsRUFBTThFLFNBQ1JsQixFQUFNQSxNQUFNNUQsSUFJaEJkLGtCQUFBLFdBQ0UwRSxFQUFNN0MsUUFBUWhCLGlCQUFpQixRQUFTNkQsRUFBTUEsT0FFOUNqQyxPQUFPNUIsaUJBQWlCLFVBQVc2RCxFQUFNaUIsVUFHM0NqRCxxQkFBQSxXQUNFZ0MsRUFBTTdDLFFBQVFjLG9CQUFvQixRQUFTK0IsRUFBTUEsT0FFakRqQyxPQUFPRSxvQkFBb0IsVUFBVytCLEVBQU1pQixXQUkxQ0YsR0FDSlEsS0FBTXJILFNBQVNrRCxjQUFjLEtBQzdCb0UsSUFBS3RILFNBQVNrRCxjQUFjLEtBRTVCWCxPQUFBLFdBQ0VzRSxFQUFLUSxLQUFLaEUsR0FBSywwQkFDZndELEVBQUtRLEtBQUt4QyxVQUFZLDBLQUN0QmdDLEVBQUtTLElBQUlqRSxHQUFLLHlCQUNkd0QsRUFBS1MsSUFBSXpDLFVBQVksMExBRXJCbkMsRUFBS3NELElBQUl4QyxZQUFZcUQsRUFBS1EsTUFDMUIzRSxFQUFLc0QsSUFBSXhDLFlBQVlxRCxFQUFLUyxNQUc1QkMsUUFBQSxTQUFTckYsR0FDSGpDLEVBQU9DLEdBQWNtRSxPQUFTLEtBQ2hDcEUsRUFBT0MsR0FBY21FLE9BQVNwRSxFQUFPQyxHQUFjb0UsWUFHckR0QyxFQUFJa0QsV0FDRkMsV0FBWWxGLEVBQU9DLEdBQWNtRSxRQUduQ25DLEVBQU1jLGtCQUdSd0UsT0FBQSxTQUFRdEYsR0FDTmpDLEVBQU9DLEdBQWNtRSxPQUFTcEUsRUFBT0MsR0FBY29FLFdBRW5EdEMsRUFBSWtELFdBQ0ZDLFdBQVlsRixFQUFPQyxHQUFjbUUsUUFHbkNuQyxFQUFNYyxrQkFHUitELFFBQUEsU0FBUzdFLEdBQ2UsS0FBbEJBLEVBQU04RSxTQUNSSCxFQUFLVyxPQUFPdEYsR0FFUSxLQUFsQkEsRUFBTThFLFNBQ1JILEVBQUtVLFFBQVFyRixJQUlqQmQsa0JBQUEsV0FDRXlGLEVBQUtRLEtBQUtwRixpQkFBaUIsUUFBUzRFLEVBQUtVLFNBQ3pDVixFQUFLUyxJQUFJckYsaUJBQWlCLFFBQVM0RSxFQUFLVyxRQUV4QzNELE9BQU81QixpQkFBaUIsVUFBVzRFLEVBQUtFLFVBRzFDakQscUJBQUEsV0FDRStDLEVBQUtRLEtBQUt0RCxvQkFBb0IsUUFBUzhDLEVBQUtVLFNBQzVDVixFQUFLUyxJQUFJdkQsb0JBQW9CLFFBQVM4QyxFQUFLVyxRQUUzQzNELE9BQU9FLG9CQUFvQixVQUFXOEMsRUFBS0UsV0FJekN4QyxHQUNKa0QsU0FBVXpILFNBQVNrRCxjQUFjLEtBQ2pDd0UsU0FBVTFILFNBQVNrRCxjQUFjLEtBRWpDWCxPQUFBLFdBQ0VnQyxFQUFPa0QsU0FBU3BFLEdBQUssaUNBQ3JCa0IsRUFBT2tELFNBQVM1QyxVQUFZLDRTQUM1Qk4sRUFBT21ELFNBQVNyRSxHQUFLLGlDQUNyQmtCLEVBQU9tRCxTQUFTN0MsVUFBWSw4U0FFNUJuQyxFQUFLc0QsSUFBSXhDLFlBQVllLEVBQU9rRCxVQUM1Qi9FLEVBQUtzRCxJQUFJeEMsWUFBWWUsRUFBT21ELFdBRzlCQyxlQUFBLFNBQWdCekYsR0FDZEYsRUFBSWtELFdBQ0ZRLFlBQWF6RixFQUFPQyxHQUFjcUUsT0FBUyxLQUc3Q3JDLEVBQU1jLGtCQUdSNEUsZUFBQSxTQUFnQjFGLEdBQ2RGLEVBQUlrRCxXQUNGUSxZQUFhekYsRUFBT0MsR0FBY3FFLE9BQVMsS0FHN0NyQyxFQUFNYyxrQkFHUitELFFBQUEsU0FBUzdFLEdBQ2UsS0FBbEJBLEVBQU04RSxTQUNSekMsRUFBT3FELGVBQWUxRixHQUVGLEtBQWxCQSxFQUFNOEUsU0FDUnpDLEVBQU9vRCxlQUFlekYsSUFJMUJkLGtCQUFBLFdBQ0VtRCxFQUFPa0QsU0FBU3hGLGlCQUFpQixRQUFTc0MsRUFBT29ELGdCQUNqRHBELEVBQU9tRCxTQUFTekYsaUJBQWlCLFFBQVNzQyxFQUFPcUQsZ0JBRWpEL0QsT0FBTzVCLGlCQUFpQixVQUFXc0MsRUFBT3dDLFVBRzVDakQscUJBQUEsV0FDRVMsRUFBT2tELFNBQVMxRCxvQkFBb0IsUUFBU1EsRUFBT29ELGdCQUNwRHBELEVBQU9tRCxTQUFTM0Qsb0JBQW9CLFFBQVNRLEVBQU9xRCxnQkFFcEQvRCxPQUFPRSxvQkFBb0IsVUFBV1EsRUFBT3dDLFdBSTNDcEUsR0FDSmtGLEtBQU03SCxTQUFTa0QsY0FBYyxLQUM3QjRFLEtBQU05SCxTQUFTa0QsY0FBYyxLQUU3QlgsT0FBQSxXQUNFSSxFQUFXa0YsS0FBS3hFLEdBQUssc0JBQ3JCVixFQUFXa0YsS0FBS2hELFVBQVksdUxBQzVCbEMsRUFBV21GLEtBQUt6RSxHQUFLLHNCQUNyQlYsRUFBV21GLEtBQUtqRCxVQUFZLHdMQUU1QnZDLEVBQVFXLFFBQVFPLFlBQVliLEVBQVdrRixNQUN2Q3ZGLEVBQVFXLFFBQVFPLFlBQVliLEVBQVdtRixPQUd6Q2hGLFdBQUEsU0FBWVcsR0FDRyxZQUFUQSxJQUNnQixPQUFkdEQsRUFDRndDLEVBQVdrRixLQUFLbkUsVUFBVUUsT0FBTyxXQUVqQ2pCLEVBQVdrRixLQUFLbkUsVUFBVUMsSUFBSSxXQUVkLE9BQWR2RCxFQUNGdUMsRUFBV21GLEtBQUtwRSxVQUFVRSxPQUFPLFdBRWpDakIsRUFBV21GLEtBQUtwRSxVQUFVQyxJQUFJLFlBR3JCLFNBQVRGLElBQ0ZkLEVBQVdrRixLQUFLbkUsVUFBVUUsT0FBTyxXQUNqQ2pCLEVBQVdtRixLQUFLcEUsVUFBVUUsT0FBTyxhQUlyQ21FLFFBQUEsV0FDb0IsT0FBZDVILEdBQ0Y2QixFQUFJZSxRQUFRNUMsSUFJaEI2SCxRQUFBLFdBQ29CLE9BQWQ1SCxHQUNGNEIsRUFBSWUsUUFBUTNDLElBSWhCNkgsUUFBQSxTQUFTL0YsR0FDUFMsRUFBV29GLFVBRVg3RixFQUFNYyxrQkFHUmtGLFFBQUEsU0FBU2hHLEdBQ1BTLEVBQVdxRixVQUVYOUYsRUFBTWMsa0JBR1IrRCxRQUFBLFNBQVM3RSxHQUNlLEtBQWxCQSxFQUFNOEUsU0FDUnJFLEVBQVdvRixRQUFRN0YsR0FFQyxLQUFsQkEsRUFBTThFLFNBQ1JyRSxFQUFXcUYsUUFBUTlGLElBSXZCZCxrQkFBQSxXQUNFdUIsRUFBV2tGLEtBQUs1RixpQkFBaUIsUUFBU1UsRUFBV3NGLFNBQ3JEdEYsRUFBV21GLEtBQUs3RixpQkFBaUIsUUFBU1UsRUFBV3VGLFNBRXJEckUsT0FBTzVCLGlCQUFpQixVQUFXVSxFQUFXb0UsVUFHaERqRCxxQkFBQSxXQUNFbkIsRUFBV2tGLEtBQUs5RCxvQkFBb0IsUUFBU3BCLEVBQVdzRixTQUN4RHRGLEVBQVdtRixLQUFLL0Qsb0JBQW9CLFFBQVNwQixFQUFXdUYsU0FFeERyRSxPQUFPRSxvQkFBb0IsVUFBV3BCLEVBQVdvRSxXQUkvQ25FLEdBQ0pLLFFBQVNqRCxTQUFTa0QsY0FBYyxPQUVoQ1gsT0FBQSxXQUNFSyxFQUFRSyxRQUFRSSxHQUFLLGtCQUNyQlQsRUFBUUssUUFBUTRCLFVBQVksc0xBQzVCakMsRUFBUUssUUFBUUssTUFBTUMsV0FBYSxXQUFhbEUsRUFBUUssZ0JBQWtCLHVCQUF5QkwsRUFBUUssZ0JBQWtCLFVBRTdINEMsRUFBUVcsUUFBUU8sWUFBWVosRUFBUUssVUFHdENILFdBQUEsU0FBWVcsR0FDRyxTQUFUQSxHQUNGYixFQUFRSyxRQUFRUyxVQUFVQyxJQUFJLFdBRW5CLFNBQVRGLEdBQ0ZiLEVBQVFLLFFBQVFTLFVBQVVFLE9BQU8sYUFLakNwQixHQUNKUyxRQUFTakQsU0FBU2tELGNBQWMsT0FFaENYLE9BQUEsV0FDRUMsRUFBU1MsUUFBUUksR0FBSyxvQkFFdEJmLEVBQVFXLFFBQVFPLFlBQVloQixFQUFTUyxVQUd2Q0gsV0FBQSxTQUFZVyxHQUNHLFNBQVRBLEdBQ0ZqQixFQUFTUyxRQUFRUyxVQUFVQyxJQUFJLFdBRXBCLFNBQVRGLEdBQ0ZqQixFQUFTUyxRQUFRUyxVQUFVRSxPQUFPLFlBSXRDbUMsTUFBQSxTQUFPN0QsR0FDTE8sRUFBTW1FLFFBRU4xRSxFQUFNYyxrQkFHUjVCLGtCQUFBLFdBQ0VvQixFQUFTUyxRQUFRaEIsaUJBQWlCLFFBQVNPLEVBQVN1RCxRQUd0RGpDLHFCQUFBLFdBQ0V0QixFQUFTUyxRQUFRYyxvQkFBb0IsUUFBU3ZCLEVBQVN1RCxRQy9DM0RsSCxHQUFBQSxXRG1EZXdDLE9DakRUOEcsR0FBRyxTQUFTNUosRUFBUVUsRUFBT0osR0NwMUJqQyxZRDIxQkEsU0FBU3VKLEdBQXVCQyxHQUFPLE1BQU9BLElBQU9BLEVBQUlDLFdBQWFELEdBQVFFLFVBQVNGLEdBSnZGLEdBQUlHLEdBQVdqSyxFQUFRLGFBRW5Ca0ssRUFBWUwsRUFBdUJJLEdDcDFCakNFLElBRFksRUFBQUQsRUFBQUEsY0FDQ3pJLFNBQVMySSxjQUFjLGlCQUNwQ0MsRUFBVzVJLFNBQVMySSxjQUFjLGFBRXhDRCxHQUFXekcsaUJBQWlCLFFBQVMsU0FBQUMsR0FDbkMwRyxFQUFTN0MsUUFFVDdELEVBQU1jLHFCRDQxQkw2RixZQUFZLFNBQVMiLCJmaWxlIjoiYWxsLm1pbi5qcyIsInNvdXJjZXNDb250ZW50IjpbIihmdW5jdGlvbiBlKHQsbixyKXtmdW5jdGlvbiBzKG8sdSl7aWYoIW5bb10pe2lmKCF0W29dKXt2YXIgYT10eXBlb2YgcmVxdWlyZT09XCJmdW5jdGlvblwiJiZyZXF1aXJlO2lmKCF1JiZhKXJldHVybiBhKG8sITApO2lmKGkpcmV0dXJuIGkobywhMCk7dmFyIGY9bmV3IEVycm9yKFwiQ2Fubm90IGZpbmQgbW9kdWxlICdcIitvK1wiJ1wiKTt0aHJvdyBmLmNvZGU9XCJNT0RVTEVfTk9UX0ZPVU5EXCIsZn12YXIgbD1uW29dPXtleHBvcnRzOnt9fTt0W29dWzBdLmNhbGwobC5leHBvcnRzLGZ1bmN0aW9uKGUpe3ZhciBuPXRbb11bMV1bZV07cmV0dXJuIHMobj9uOmUpfSxsLGwuZXhwb3J0cyxlLHQsbixyKX1yZXR1cm4gbltvXS5leHBvcnRzfXZhciBpPXR5cGVvZiByZXF1aXJlPT1cImZ1bmN0aW9uXCImJnJlcXVpcmU7Zm9yKHZhciBvPTA7bzxyLmxlbmd0aDtvKyspcyhyW29dKTtyZXR1cm4gc30pIiwiJ3VzZSBzdHJpY3QnXG5cbmNvbnN0IG9wdGlvbnMgPSB7XG4gIGxpbmtFbGVtZW50OiAnYm9keScsXG4gIGZpbGVUeXBlczogWydqcGcnLCAnanBlZycsICdwbmcnLCAnZ2lmJ10sXG4gIGNvdmVyU2NyZWVuOiB0cnVlLFxuICBzaG93U2hvcnRjdXRzOiB0cnVlLFxuICB0cmFuc2l0aW9uU3BlZWQ6IDQwMCxcbiAgdHJhbnNpdGlvblNjYWxlOiAwLjA4LFxuICB6b29tUmF0aW86IDAuMixcbiAgc21hbGxTaXplOiA3NjgsXG4gIG1lZGl1bVNpemU6IDEyODBcbn1cblxuY29uc3QgYm9keSA9IGRvY3VtZW50LmJvZHlcbmNvbnN0IGltYWdlcyA9IFtdXG5sZXQgY3VycmVudEluZGV4ID0gbnVsbFxubGV0IG5leHRJbmRleCA9IG51bGxcbmxldCBwcmV2SW5kZXggPSBudWxsXG5sZXQgc2NyZWVuV2lkdGggPSBib2R5LmNsaWVudFdpZHRoXG5sZXQgc2NyZWVuSGVpZ2h0ID0gYm9keS5jbGllbnRIZWlnaHRcbmxldCBjbG9zZWQgPSBmYWxzZVxuXG5jb25zdCBzZXR1cCA9IChzZXR0aW5ncyA9IHt9KSA9PiB7XG4gIGlmIChzZXR0aW5ncy5saW5rRWxlbWVudCkge1xuICAgIGlmICh0eXBlb2Ygc2V0dGluZ3MubGlua0VsZW1lbnQgPT09ICdzdHJpbmcnKSB7XG4gICAgICBvcHRpb25zLmxpbmtFbGVtZW50ID0gc2V0dGluZ3MubGlua0VsZW1lbnRcbiAgICB9XG4gIH1cbiAgaWYgKHNldHRpbmdzLmZpbGVUeXBlcykge1xuICAgIGlmIChzZXR0aW5ncy5maWxlVHlwZXMuY29uc3RydWN0b3IgPT09IEFycmF5KSB7XG4gICAgICBvcHRpb25zLmZpbGVUeXBlcyA9IHNldHRpbmdzLmZpbGVUeXBlc1xuICAgIH1cbiAgfVxuICBpZiAoc2V0dGluZ3MuY292ZXJTY3JlZW4gIT09IHVuZGVmaW5lZCkge1xuICAgIGlmIChzZXR0aW5ncy5jb3ZlclNjcmVlbiA9PT0gZmFsc2UpIHtcbiAgICAgIG9wdGlvbnMuY292ZXJTY3JlZW4gPSBmYWxzZVxuICAgIH1cbiAgfVxuICBpZiAoc2V0dGluZ3Muc2hvd1Nob3J0Y3V0cyAhPT0gdW5kZWZpbmVkKSB7XG4gICAgaWYgKHNldHRpbmdzLnNob3dTaG9ydGN1dHMgPT09IGZhbHNlKSB7XG4gICAgICBvcHRpb25zLnNob3dTaG9ydGN1dHMgPSBmYWxzZVxuICAgIH1cbiAgfVxuICBpZiAoc2V0dGluZ3MudHJhbnNpdGlvblNwZWVkKSB7XG4gICAgaWYgKHR5cGVvZiBzZXR0aW5ncy50cmFuc2l0aW9uU3BlZWQgPT09ICdudW1iZXInICYmIHNldHRpbmdzLnRyYW5zaXRpb25TcGVlZCA+PSAxMDApIHtcbiAgICAgIG9wdGlvbnMudHJhbnNpdGlvblNwZWVkID0gc2V0dGluZ3MudHJhbnNpdGlvblNwZWVkXG4gICAgfVxuICB9XG4gIGlmIChzZXR0aW5ncy50cmFuc2l0aW9uU2NhbGUpIHtcbiAgICBpZiAodHlwZW9mIHNldHRpbmdzLnRyYW5zaXRpb25TY2FsZSA9PT0gJ251bWJlcicpIHtcbiAgICAgIG9wdGlvbnMudHJhbnNpdGlvblNjYWxlID0gc2V0dGluZ3MudHJhbnNpdGlvblNjYWxlXG4gICAgfVxuICAgIGlmIChzZXR0aW5ncy50cmFuc2l0aW9uU2NhbGUgPT09IDApIHtcbiAgICAgIG9wdGlvbnMudHJhbnNpdGlvblNjYWxlID0gMFxuICAgIH1cbiAgfVxuICBpZiAoc2V0dGluZ3Muem9vbVNjYWxlKSB7XG4gICAgaWYgKHR5cGVvZiBzZXR0aW5ncy56b29tU2NhbGUgPT09ICdudW1iZXInKSB7XG4gICAgICBvcHRpb25zLnpvb21TY2FsZSA9IHNldHRpbmdzLnpvb21TY2FsZVxuICAgIH1cbiAgICBpZiAoc2V0dGluZ3Muem9vbVNjYWxlID09PSAwKSB7XG4gICAgICBvcHRpb25zLnpvb21TY2FsZSA9IDBcbiAgICB9XG4gIH1cbiAgaWYgKHNldHRpbmdzLnNtYWxsU2l6ZSkge1xuICAgIGlmICh0eXBlb2Ygc2V0dGluZ3Muc21hbGxTaXplID09PSAnbnVtYmVyJykge1xuICAgICAgb3B0aW9ucy5zbWFsbFNpemUgPSBzZXR0aW5ncy5zbWFsbFNpemVcbiAgICB9XG4gIH1cbiAgaWYgKHNldHRpbmdzLm1lZGl1bVNpemUpIHtcbiAgICBpZiAodHlwZW9mIHNldHRpbmdzLm1lZGl1bVNpemUgPT09ICdudW1iZXInKSB7XG4gICAgICBvcHRpb25zLm1lZGl1bVNpemUgPSBzZXR0aW5ncy5tZWRpdW1TaXplXG4gICAgfVxuICB9XG5cbiAgbGlua3MuZ2V0KClcbiAgbGlua3MucHVzaCgpXG4gIGxpbmtzLmFkZEV2ZW50TGlzdGVuZXJzKClcbn1cblxuY29uc3QgaW5pdCA9IHNldHRpbmdzID0+IHtcbiAgc2V0dXAoc2V0dGluZ3MpXG59XG5cbmNvbnN0IGxpbmtzID0ge1xuICBsaW5rczogW10sXG5cbiAgZ2V0ICgpIHtcbiAgICBjb25zdCB0ZW1wTGlua3MgPSBBcnJheS5mcm9tKGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwob3B0aW9ucy5saW5rRWxlbWVudCArICcgYScpKVxuICAgIGNvbnN0IGZpbGVUeXBlcyA9IG9wdGlvbnMuZmlsZVR5cGVzLmpvaW4oJ3wnKVxuICAgIGNvbnN0IHJlZ2V4ID0gbmV3IFJlZ0V4cCgnXFwuKCcgKyBmaWxlVHlwZXMgKyAnKSQnKTtcblxuICAgIHRlbXBMaW5rcy5mb3JFYWNoKGZ1bmN0aW9uIChsaW5rKSB7XG4gICAgICBpZiAobGluay5wYXRobmFtZS5tYXRjaChyZWdleCkpIHtcbiAgICAgICAgbGlua3MubGlua3MucHVzaChsaW5rKVxuICAgICAgfVxuICAgIH0pXG4gIH0sXG5cbiAgcHVzaCAoKSB7XG4gICAgbGlua3MubGlua3MuZm9yRWFjaChsaW5rID0+IHtcbiAgICAgIGltZy5wdXNoKGxpbmspXG4gICAgfSlcbiAgfSxcblxuICBhZGRFdmVudExpc3RlbmVycyAoKSB7XG4gICAgbGlua3MubGlua3MuZm9yRWFjaChsaW5rID0+IHtcbiAgICAgIGxpbmsuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCBldmVudCA9PiB7XG4gICAgICAgIGNsb3NlZCA9IGZhbHNlXG5cbiAgICAgICAgY29uc3QgaW5kZXggPSBsaW5rcy5saW5rcy5pbmRleE9mKGxpbmspXG5cbiAgICAgICAgaW1nLmN1cnJlbnQoaW5kZXgpXG5cbiAgICAgICAgb3ZlcmxheS5hcHBlbmQoKVxuICAgICAgICBjbG9zZURpdi5hcHBlbmQoKVxuICAgICAgICBjbG9zZS5hcHBlbmQoKVxuICAgICAgICBtZW51LmFwcGVuZCgpXG4gICAgICAgIG5hdmlnYXRpb24uYXBwZW5kKClcbiAgICAgICAgc3Bpbm5lci5hcHBlbmQoKVxuXG4gICAgICAgIHNldFRpbWVvdXQoKCkgPT4ge1xuICAgICAgICAgIG92ZXJsYXkudmlzaWJpbGl0eSgnc2hvdycpXG4gICAgICAgICAgY2xvc2UudmlzaWJpbGl0eSgnc2hvdycpXG4gICAgICAgICAgbWVudS52aXNpYmlsaXR5KCdzaG93JylcbiAgICAgICAgICBuYXZpZ2F0aW9uLnZpc2liaWxpdHkoJ2RlcGVuZHMnKVxuXG4gICAgICAgICAgaW1nLnByZXBhcmUoaW5kZXgpXG4gICAgICAgIH0sIDEwMClcblxuICAgICAgICBzZXRUaW1lb3V0KCgpID0+IHtcbiAgICAgICAgICBvdmVybGF5LmFkZEV2ZW50TGlzdGVuZXJzKClcbiAgICAgICAgICBjbG9zZURpdi5hZGRFdmVudExpc3RlbmVycygpXG4gICAgICAgICAgbWVudS5hZGRFdmVudExpc3RlbmVycygpXG4gICAgICAgICAgY2xvc2UuYWRkRXZlbnRMaXN0ZW5lcnMoKVxuICAgICAgICAgIG5hdmlnYXRpb24uYWRkRXZlbnRMaXN0ZW5lcnMoKVxuICAgICAgICB9LCAyMDApXG5cbiAgICAgICAgZXZlbnQucHJldmVudERlZmF1bHQoKVxuICAgICAgfSlcbiAgICB9KVxuICB9XG59XG5cbmNvbnN0IG92ZXJsYXkgPSB7XG4gIGVsZW1lbnQ6IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpLFxuICBmb2N1c1N0YXJ0ZWQ6IGZhbHNlLFxuXG4gIGZvY3VzIChldmVudCkge1xuICAgIGlmIChvdmVybGF5LmZvY3VzU3RhcnRlZCA9PT0gZmFsc2UpIHtcbiAgICAgIG92ZXJsYXkudmlzaWJpbGl0eSgnZm9jdXMnKVxuXG4gICAgICBzZXRUaW1lb3V0KCgpID0+IHtcbiAgICAgICAgb3ZlcmxheS52aXNpYmlsaXR5KCd1bmZvY3VzJylcblxuICAgICAgICBvdmVybGF5LmZvY3VzU3RhcnRlZCA9IGZhbHNlXG4gICAgICB9LCAyMDAwKVxuICAgIH1cblxuICAgIG92ZXJsYXkuZm9jdXNTdGFydGVkID0gdHJ1ZVxuICB9LFxuXG4gIGFwcGVuZCAoKSB7XG4gICAgb3ZlcmxheS5lbGVtZW50LmlkID0gJ2t1dmFpZnknXG4gICAgb3ZlcmxheS5lbGVtZW50LnN0eWxlLnRyYW5zaXRpb24gPSAnb3BhY2l0eSAnICsgb3B0aW9ucy50cmFuc2l0aW9uU3BlZWQgKyAnbXMgZWFzZSwgdmlzaWJpbGl0eSAnICsgb3B0aW9ucy50cmFuc2l0aW9uU3BlZWQgKyAnbXMgZWFzZSdcblxuICAgIGJvZHkuYXBwZW5kQ2hpbGQob3ZlcmxheS5lbGVtZW50KVxuICB9LFxuXG4gIHZpc2liaWxpdHkgKHdoYXQpIHtcbiAgICBpZiAod2hhdCA9PT0gJ3Nob3cnKSB7XG4gICAgICBvdmVybGF5LmVsZW1lbnQuY2xhc3NMaXN0LmFkZCgndmlzaWJsZScpXG4gICAgfVxuICAgIGlmICh3aGF0ID09PSAnaGlkZScpIHtcbiAgICAgIG92ZXJsYXkuZWxlbWVudC5jbGFzc0xpc3QucmVtb3ZlKCd2aXNpYmxlJylcbiAgICB9XG4gICAgaWYgKHdoYXQgPT09ICdmb2N1cycpIHtcbiAgICAgIG92ZXJsYXkuZWxlbWVudC5jbGFzc0xpc3QuYWRkKCdmb2N1c2VkJylcbiAgICB9XG4gICAgaWYgKHdoYXQgPT09ICd1bmZvY3VzJykge1xuICAgICAgb3ZlcmxheS5lbGVtZW50LmNsYXNzTGlzdC5yZW1vdmUoJ2ZvY3VzZWQnKVxuICAgIH1cbiAgfSxcblxuICBhZGRFdmVudExpc3RlbmVyczogKCkgPT4ge1xuICAgIHdpbmRvdy5hZGRFdmVudExpc3RlbmVyKCdtb3VzZW1vdmUnLCBvdmVybGF5LmZvY3VzKVxuICB9LFxuXG4gIHJlbW92ZUV2ZW50TGlzdGVuZXJzOiAoKSA9PiB7XG4gICAgd2luZG93LnJlbW92ZUV2ZW50TGlzdGVuZXIoJ21vdXNlbW92ZScsIG92ZXJsYXkuZm9jdXMpXG4gIH1cbn1cblxuY29uc3QgaW1nID0ge1xuICBwdXNoIChsaW5rKSB7XG4gICAgY29uc3QgaW1nID0ge1xuICAgICAgZWxlbWVudDogZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnaW1nJyksXG4gICAgICBocmVmOiBsaW5rLnBhdGhuYW1lLFxuICAgICAgc21hbGxIcmVmOiBsaW5rLmdldEF0dHJpYnV0ZSgnZGF0YS1rdXZhaWZ5LXNtYWxsJykgfHwgbnVsbCxcbiAgICAgIG1lZGl1bUhyZWY6IGxpbmsuZ2V0QXR0cmlidXRlKCdkYXRhLWt1dmFpZnktbWVkaXVtJykgfHwgbnVsbCxcbiAgICAgIGNhcHRpb246IG51bGwsXG4gICAgICBzY2FsZTogMSxcbiAgICAgIHNjYWxlUmF0aW86IG9wdGlvbnMuem9vbVJhdGlvLFxuICAgICAgcm90YXRlOiAwLFxuICAgICAgb2ZmeDogMCxcbiAgICAgIG9mZnk6IDAsXG4gICAgICB0cmFuc2l0aW9uOiBgd2lkdGggJHtvcHRpb25zLnRyYW5zaXRpb25TcGVlZH1tcyBlYXNlLCBoZWlnaHQgJHtvcHRpb25zLnRyYW5zaXRpb25TcGVlZH1tcyBlYXNlLCB0cmFuc2Zvcm0gJHtvcHRpb25zLnRyYW5zaXRpb25TcGVlZH1tcyBlYXNlLCBvcGFjaXR5ICR7b3B0aW9ucy50cmFuc2l0aW9uU3BlZWR9bXMgZWFzZSwgdmlzaWJpbGl0eSAke29wdGlvbnMudHJhbnNpdGlvblNwZWVkfW1zIGVhc2VgLFxuICAgICAgbG9hZGVkOiBmYWxzZVxuICAgIH1cblxuICAgIGltZy5lbGVtZW50LnN0eWxlLnRyYW5zaXRpb24gPSBpbWcudHJhbnNpdGlvblxuICAgIGltZy5lbGVtZW50LnN0eWxlLmxlZnQgPSBudWxsXG4gICAgaW1nLmVsZW1lbnQuc3R5bGUudG9wID0gbnVsbFxuICAgIGltZy5lbGVtZW50LmNsYXNzTGlzdC5hZGQoJ2t1dmFpZnktaW1nJylcblxuICAgIGlmIChsaW5rLmdldEF0dHJpYnV0ZSgnZGF0YS1rdXZhaWZ5LWNhcHRpb24nKSkge1xuICAgICAgaW1nLmNhcHRpb24gPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKVxuICAgICAgaW1nLmNhcHRpb24uaW5uZXJIVE1MID0gJzxwPicgKyBsaW5rLmdldEF0dHJpYnV0ZSgnZGF0YS1rdXZhaWZ5LWNhcHRpb24nKS5yZXBsYWNlKC88W14+XSs+L2lnLCcnKSArICc8L3A+J1xuICAgICAgaW1nLmNhcHRpb24uaWQgPSAna3V2YWlmeS1jYXB0aW9uJ1xuICAgICAgaW1nLmNhcHRpb24uc3R5bGUudHJhbnNpdGlvbiA9ICdvcGFjaXR5ICcgKyBvcHRpb25zLnRyYW5zaXRpb25TcGVlZCArICdtcyBlYXNlLCB2aXNpYmlsaXR5ICcgKyBvcHRpb25zLnRyYW5zaXRpb25TcGVlZCArICdtcyBlYXNlJ1xuICAgIH1cblxuICAgIGltYWdlcy5wdXNoKGltZylcbiAgfSxcblxuICBjdXJyZW50IChpbmRleCkge1xuICAgIGNvbnN0IGltZyA9IGltYWdlc1tpbmRleF1cblxuICAgIGN1cnJlbnRJbmRleCA9IGltYWdlcy5pbmRleE9mKGltZylcblxuICAgIGlmIChpbWFnZXNbY3VycmVudEluZGV4ICsgMV0pIHtcbiAgICAgIG5leHRJbmRleCA9IGN1cnJlbnRJbmRleCArIDFcbiAgICB9IGVsc2Uge1xuICAgICAgbmV4dEluZGV4ID0gbnVsbFxuICAgIH1cbiAgICBpZiAoaW1hZ2VzW2N1cnJlbnRJbmRleCAtIDFdKSB7XG4gICAgICBwcmV2SW5kZXggPSBjdXJyZW50SW5kZXggLSAxXG4gICAgfSBlbHNlIHtcbiAgICAgIHByZXZJbmRleCA9IG51bGxcbiAgICB9XG4gIH0sXG5cbiAgaHJlZiAoKSB7XG4gICAgaWYgKHNjcmVlbldpZHRoIDwgb3B0aW9ucy5zbWFsbFNpemUpIHtcbiAgICAgIHJldHVybiBpbWFnZXNbY3VycmVudEluZGV4XS5zbWFsbEhyZWZcbiAgICB9XG4gICAgaWYgKHNjcmVlbldpZHRoIDwgb3B0aW9ucy5tZWRpdW1TaXplKSB7XG4gICAgICByZXR1cm4gaW1hZ2VzW2N1cnJlbnRJbmRleF0ubWVkaXVtSHJlZlxuICAgIH1cblxuICAgIHJldHVybiBpbWFnZXNbY3VycmVudEluZGV4XS5ocmVmXG4gIH0sXG5cbiAgc2l6ZSAoKSB7XG4gICAgY29uc3QgaW1nV2lkdGggPSBpbWFnZXNbY3VycmVudEluZGV4XS5lbGVtZW50LmNsaWVudFdpZHRoXG4gICAgY29uc3QgaW1nSGVpZ2h0ID0gaW1hZ2VzW2N1cnJlbnRJbmRleF0uZWxlbWVudC5jbGllbnRIZWlnaHRcbiAgICBsZXQgd2hhdFxuXG4gICAgc2NyZWVuV2lkdGggPSBib2R5LmNsaWVudFdpZHRoXG4gICAgc2NyZWVuSGVpZ2h0ID0gYm9keS5jbGllbnRIZWlnaHRcblxuICAgIGlmIChpbWdXaWR0aCA8IHNjcmVlbldpZHRoICYmIGltZ0hlaWdodCA8IHNjcmVlbkhlaWdodCkge1xuICAgICAgaWYgKGltZ1dpZHRoID4gaW1nSGVpZ2h0KSB7XG4gICAgICAgIHdoYXQgPSAnY292ZXItdmVydGljYWxseSdcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHdoYXQgPSAnY292ZXItaG9yaXpvbnRhbGx5J1xuICAgICAgfVxuICAgIH0gZWxzZSB7XG4gICAgICBpZiAoaW1nV2lkdGggPCBzY3JlZW5XaWR0aCkge1xuICAgICAgICB3aGF0ID0gJ2NvdmVyLWhvcml6b250YWxseSdcbiAgICAgIH1cbiAgICAgIGlmIChpbWdIZWlnaHQgPCBzY3JlZW5IZWlnaHQpIHtcbiAgICAgICAgd2hhdCA9ICdjb3Zlci12ZXJ0aWNhbGx5J1xuICAgICAgfVxuICAgIH1cblxuICAgIGltYWdlc1tjdXJyZW50SW5kZXhdLmVsZW1lbnQuY2xhc3NMaXN0LmFkZCh3aGF0KVxuICB9LFxuXG4gIHZpc2liaWxpdHkgKHdoYXQpIHtcbiAgICBpZiAod2hhdCA9PT0gJ3Nob3cnKSB7XG4gICAgICBpbWFnZXNbY3VycmVudEluZGV4XS5lbGVtZW50LmNsYXNzTGlzdC5hZGQoJ3Zpc2libGUnKVxuXG4gICAgICBpZiAob3B0aW9ucy50cmFuc2l0aW9uU2NhbGUgPiAwKSB7XG4gICAgICAgIGltZy50cmFuc2Zvcm0oe1xuICAgICAgICAgIHNjYWxlVmFsdWU6IGltYWdlc1tjdXJyZW50SW5kZXhdLnNjYWxlIC0gb3B0aW9ucy50cmFuc2l0aW9uU2NhbGVcbiAgICAgICAgfSlcbiAgICAgIH1cblxuICAgICAgaWYgKGltYWdlc1tjdXJyZW50SW5kZXhdLmNhcHRpb24pIHtcbiAgICAgICAgaW1hZ2VzW2N1cnJlbnRJbmRleF0uY2FwdGlvbi5jbGFzc0xpc3QuYWRkKCd2aXNpYmxlJylcbiAgICAgIH1cbiAgICB9XG4gICAgaWYgKHdoYXQgPT09ICdoaWRlJykge1xuICAgICAgaW1hZ2VzW2N1cnJlbnRJbmRleF0uZWxlbWVudC5jbGFzc0xpc3QucmVtb3ZlKCd2aXNpYmxlJylcblxuICAgICAgaWYgKGltYWdlc1tjdXJyZW50SW5kZXhdLmNhcHRpb24pIHtcbiAgICAgICAgaW1hZ2VzW2N1cnJlbnRJbmRleF0uY2FwdGlvbi5jbGFzc0xpc3QucmVtb3ZlKCd2aXNpYmxlJylcbiAgICAgIH1cbiAgICB9XG4gICAgaWYgKHdoYXQgPT09ICdtZWFzdXJlJykge1xuICAgICAgaW1hZ2VzW2N1cnJlbnRJbmRleF0uZWxlbWVudC5jbGFzc0xpc3QuYWRkKCdtZWFzdXJlJylcbiAgICB9XG4gICAgaWYgKHdoYXQgPT09ICdtZWFzdXJlZCcpIHtcbiAgICAgIGltYWdlc1tjdXJyZW50SW5kZXhdLmVsZW1lbnQuY2xhc3NMaXN0LnJlbW92ZSgnbWVhc3VyZScpXG4gICAgfVxuICB9LFxuXG4gIHNob3cgKCkge1xuICAgIGltZy52aXNpYmlsaXR5KCdtZWFzdXJlJylcblxuICAgIGlmIChvcHRpb25zLnRyYW5zaXRpb25TY2FsZSA+IDApIHtcbiAgICAgIGltZy50cmFuc2Zvcm0oe1xuICAgICAgICBzY2FsZVZhbHVlOiBpbWFnZXNbY3VycmVudEluZGV4XS5zY2FsZSArIG9wdGlvbnMudHJhbnNpdGlvblNjYWxlXG4gICAgICB9KVxuICAgIH1cbiAgICBpZiAob3B0aW9ucy5jb3ZlclNjcmVlbikge1xuICAgICAgaW1nLnNpemUoKVxuICAgIH1cblxuICAgIHNldFRpbWVvdXQoKCkgPT4ge1xuICAgICAgaW1nLnZpc2liaWxpdHkoJ3Nob3cnKVxuXG4gICAgICBzZXRUaW1lb3V0KCgpID0+IHtcbiAgICAgICAgaW1nLnZpc2liaWxpdHkoJ21lYXN1cmVkJylcbiAgICAgIH0sIDEwMClcbiAgICB9LCBvcHRpb25zLnRyYW5zaXRpb25TcGVlZCAvIDQpXG4gIH0sXG5cbiAgcHJlcGFyZSAoaW5kZXgpIHtcbiAgICBuYXZpZ2F0aW9uLnJlbW92ZUV2ZW50TGlzdGVuZXJzKClcblxuICAgIGltZy52aXNpYmlsaXR5KCdoaWRlJylcblxuICAgIGltZy5jdXJyZW50KGluZGV4KVxuXG4gICAgbmF2aWdhdGlvbi52aXNpYmlsaXR5KCdkZXBlbmRzJylcblxuICAgIGltZy5hZGRFdmVudExpc3RlbmVycygpXG5cbiAgICBpZiAoIWltYWdlc1tjdXJyZW50SW5kZXhdLmVsZW1lbnQuc3JjKSB7XG4gICAgICA7KGluZGV4ID0+IHtcbiAgICAgICAgY29uc3QgdGhpc0luZGV4ID0gaW5kZXhcblxuICAgICAgICBzcGlubmVyLnZpc2liaWxpdHkoJ3Nob3cnKVxuXG4gICAgICAgIG92ZXJsYXkuZWxlbWVudC5hcHBlbmRDaGlsZChpbWFnZXNbdGhpc0luZGV4XS5lbGVtZW50KVxuXG4gICAgICAgIGlmIChpbWFnZXNbdGhpc0luZGV4XS5jYXB0aW9uKSB7XG4gICAgICAgICAgb3ZlcmxheS5lbGVtZW50LmFwcGVuZENoaWxkKGltYWdlc1t0aGlzSW5kZXhdLmNhcHRpb24pXG4gICAgICAgIH1cblxuICAgICAgICBpbWFnZXNbdGhpc0luZGV4XS5lbGVtZW50LnNyYyA9IGltZy5ocmVmKClcblxuICAgICAgICBpbWFnZXNbdGhpc0luZGV4XS5lbGVtZW50LmFkZEV2ZW50TGlzdGVuZXIoJ2xvYWQnLCAoKSA9PiB7XG4gICAgICAgICAgaW1hZ2VzW3RoaXNJbmRleF0ubG9hZGVkID0gdHJ1ZVxuXG4gICAgICAgICAgc3Bpbm5lci52aXNpYmlsaXR5KCdoaWRlJylcblxuICAgICAgICAgIGlmICh0aGlzSW5kZXggPT09IGN1cnJlbnRJbmRleCAmJiAhY2xvc2VkKSB7XG4gICAgICAgICAgICBpbWcuc2hvdygpXG4gICAgICAgICAgfVxuICAgICAgICB9KVxuICAgICAgfSkoY3VycmVudEluZGV4KVxuICAgIH0gZWxzZSB7XG4gICAgICBpZiAoaW1hZ2VzW2N1cnJlbnRJbmRleF0ubG9hZGVkKSB7XG4gICAgICAgIHNwaW5uZXIudmlzaWJpbGl0eSgnaGlkZScpXG5cbiAgICAgICAgaW1nLnNob3coKVxuICAgICAgfSBlbHNlIHtcbiAgICAgICAgc3Bpbm5lci52aXNpYmlsaXR5KCdzaG93JylcbiAgICAgIH1cbiAgICB9XG4gICAgc2V0VGltZW91dCgoKSA9PiB7XG4gICAgICBuYXZpZ2F0aW9uLmFkZEV2ZW50TGlzdGVuZXJzKClcbiAgICB9LCBvcHRpb25zLnRyYW5zaXRpb25TcGVlZCAvIDIpXG4gIH0sXG5cbiAgdHJhbnNmb3JtICh7IHNjYWxlVmFsdWUgPSBpbWFnZXNbY3VycmVudEluZGV4XS5zY2FsZSwgcm90YXRlVmFsdWUgPSBpbWFnZXNbY3VycmVudEluZGV4XS5yb3RhdGUgfSkge1xuICAgIHJvdGF0ZS5yZW1vdmVFdmVudExpc3RlbmVycygpXG5cbiAgICBsZXQgdHJhbnNmb3JtU3RyaW5nXG5cbiAgICBpZiAoYXJndW1lbnRzLnJvdGF0ZVZhbHVlID09PSAwKSB7XG4gICAgICByb3RhdGVWYWx1ZSA9IDBcbiAgICB9XG5cbiAgICB0cmFuc2Zvcm1TdHJpbmcgPSAndHJhbnNsYXRlKC01MCUsIC01MCUpIHNjYWxlKCcgKyBzY2FsZVZhbHVlICsgJykgcm90YXRlKCcgKyByb3RhdGVWYWx1ZSArICdkZWcpJ1xuXG4gICAgaW1hZ2VzW2N1cnJlbnRJbmRleF0uc2NhbGUgPSBzY2FsZVZhbHVlXG4gICAgaW1hZ2VzW2N1cnJlbnRJbmRleF0ucm90YXRlID0gcm90YXRlVmFsdWVcbiAgICBpbWFnZXNbY3VycmVudEluZGV4XS5lbGVtZW50LnN0eWxlLndlYmtpdFRyYW5zZm9ybSA9IHRyYW5zZm9ybVN0cmluZ1xuICAgIGltYWdlc1tjdXJyZW50SW5kZXhdLmVsZW1lbnQuc3R5bGUubXNUcmFuc2Zvcm0gPSB0cmFuc2Zvcm1TdHJpbmdcbiAgICBpbWFnZXNbY3VycmVudEluZGV4XS5lbGVtZW50LnN0eWxlLnRyYW5zZm9ybSA9IHRyYW5zZm9ybVN0cmluZ1xuXG4gICAgc2V0VGltZW91dCgoKSA9PiB7XG4gICAgICByb3RhdGUuYWRkRXZlbnRMaXN0ZW5lcnMoKVxuICAgIH0sIG9wdGlvbnMudHJhbnNpdGlvblNwZWVkIC8gMilcbiAgfSxcblxuICByZXNldCAoKSB7XG4gICAgaW1hZ2VzW2N1cnJlbnRJbmRleF0uZWxlbWVudC5zdHlsZS50cmFuc2l0aW9uID0gaW1hZ2VzW2N1cnJlbnRJbmRleF0udHJhbnNpdGlvbiArICcsIGxlZnQgJyArIG9wdGlvbnMudHJhbnNpdGlvblNwZWVkICsgJ21zIGVhc2UsIHRvcCAnICsgb3B0aW9ucy50cmFuc2l0aW9uU3BlZWQgKyAnbXMgZWFzZSdcbiAgICBpbWFnZXNbY3VycmVudEluZGV4XS5lbGVtZW50LnN0eWxlLmxlZnQgPSBudWxsXG4gICAgaW1hZ2VzW2N1cnJlbnRJbmRleF0uZWxlbWVudC5zdHlsZS50b3AgPSBudWxsXG5cbiAgICBzZXRUaW1lb3V0KCgpID0+IHtcbiAgICAgIGltYWdlc1tjdXJyZW50SW5kZXhdLmVsZW1lbnQuc3R5bGUudHJhbnNpdGlvbiA9IGltYWdlc1tjdXJyZW50SW5kZXhdLnRyYW5zaXRpb25cbiAgICB9LCBvcHRpb25zLnRyYW5zaXRpb25TcGVlZClcblxuICAgIGltZy50cmFuc2Zvcm0oe1xuICAgICAgc2NhbGVWYWx1ZTogMSxcbiAgICAgIHJvdGF0ZVZhbHVlOiAwXG4gICAgfSlcbiAgfSxcblxuICBjbGljayAoZXZlbnQpIHtcbiAgICBtZW51LmRpdi5jbGFzc0xpc3QucmVtb3ZlKCd2aXNpYmxlJylcblxuICAgIGV2ZW50LnByZXZlbnREZWZhdWx0KClcbiAgfSxcblxuICB3aGVlbCAoZXZlbnQpIHtcbiAgICBpZiAoZXZlbnQud2hlZWxEZWx0YSA9PT0gMTIwKSB7XG4gICAgICBpbWFnZXNbY3VycmVudEluZGV4XS5zY2FsZSArPSBpbWFnZXNbY3VycmVudEluZGV4XS5zY2FsZVJhdGlvXG4gICAgfSBlbHNlIHtcbiAgICAgIGlmIChpbWFnZXNbY3VycmVudEluZGV4XS5zY2FsZSA+PSAwLjQpIHtcbiAgICAgICAgaW1hZ2VzW2N1cnJlbnRJbmRleF0uc2NhbGUgLT0gaW1hZ2VzW2N1cnJlbnRJbmRleF0uc2NhbGVSYXRpb1xuICAgICAgfVxuICAgIH1cblxuICAgIGltZy50cmFuc2Zvcm0oe1xuICAgICAgc2NhbGVWYWx1ZTogaW1hZ2VzW2N1cnJlbnRJbmRleF0uc2NhbGVcbiAgICB9KVxuXG4gICAgZXZlbnQucHJldmVudERlZmF1bHQoKVxuICB9LFxuXG4gIG1vdXNlZG93biAoZXZlbnQpIHtcbiAgICBpbWFnZXNbY3VycmVudEluZGV4XS5vZmZ4ID0gZXZlbnQuY2xpZW50WCAtIGltYWdlc1tjdXJyZW50SW5kZXhdLmVsZW1lbnQub2Zmc2V0TGVmdFxuICAgIGltYWdlc1tjdXJyZW50SW5kZXhdLm9mZnkgPSBldmVudC5jbGllbnRZIC0gaW1hZ2VzW2N1cnJlbnRJbmRleF0uZWxlbWVudC5vZmZzZXRUb3BcblxuICAgIHdpbmRvdy5hZGRFdmVudExpc3RlbmVyKCdtb3VzZW1vdmUnLCBpbWcubW91c2Vtb3ZlKVxuXG4gICAgZXZlbnQucHJldmVudERlZmF1bHQoKVxuICB9LFxuXG4gIG1vdXNlbW92ZSAoZXZlbnQpIHtcbiAgICBjb25zdCBtb3ZlID0gKCkgPT4ge1xuICAgICAgaW1hZ2VzW2N1cnJlbnRJbmRleF0uZWxlbWVudC5zdHlsZS5sZWZ0ID0gZXZlbnQuY2xpZW50WCAtIGltYWdlc1tjdXJyZW50SW5kZXhdLm9mZnggKyAncHgnXG4gICAgICBpbWFnZXNbY3VycmVudEluZGV4XS5lbGVtZW50LnN0eWxlLnRvcCA9IGV2ZW50LmNsaWVudFkgLSBpbWFnZXNbY3VycmVudEluZGV4XS5vZmZ5ICsgJ3B4J1xuICAgIH1cblxuICAgIHdpbmRvdy5yZXF1ZXN0QW5pbWF0aW9uRnJhbWUobW92ZSlcbiAgfSxcblxuICBtb3VzZXVwIChldmVudCkge1xuICAgIHdpbmRvdy5yZW1vdmVFdmVudExpc3RlbmVyKCdtb3VzZW1vdmUnLCBpbWcubW91c2Vtb3ZlKVxuICB9LFxuXG4gIGFkZEV2ZW50TGlzdGVuZXJzICgpIHtcbiAgICBpbWFnZXNbY3VycmVudEluZGV4XS5lbGVtZW50LmFkZEV2ZW50TGlzdGVuZXIoJ21vdXNlZG93bicsIGltZy5tb3VzZWRvd24pXG4gICAgaW1hZ2VzW2N1cnJlbnRJbmRleF0uZWxlbWVudC5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIGltZy5jbGljaylcblxuICAgIHdpbmRvdy5hZGRFdmVudExpc3RlbmVyKCd3aGVlbCcsIGltZy53aGVlbClcbiAgICB3aW5kb3cuYWRkRXZlbnRMaXN0ZW5lcignbW91c2V1cCcsIGltZy5tb3VzZXVwKVxuXG4gICAgaWYgKG9wdGlvbnMuY292ZXJTY3JlZW4pIHtcbiAgICAgIHdpbmRvdy5hZGRFdmVudExpc3RlbmVyKCdyZXNpemUnLCBpbWcuc2l6ZSlcbiAgICB9XG4gIH0sXG5cbiAgcmVtb3ZlRXZlbnRMaXN0ZW5lcnMgKCkge1xuICAgIGltYWdlc1tjdXJyZW50SW5kZXhdLmVsZW1lbnQucmVtb3ZlRXZlbnRMaXN0ZW5lcignbW91c2Vkb3duJywgaW1nLm1vdXNlZG93bilcbiAgICBpbWFnZXNbY3VycmVudEluZGV4XS5lbGVtZW50LnJlbW92ZUV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgaW1nLmNsaWNrKVxuXG4gICAgd2luZG93LnJlbW92ZUV2ZW50TGlzdGVuZXIoJ3doZWVsJywgaW1nLndoZWVsKVxuICAgIHdpbmRvdy5yZW1vdmVFdmVudExpc3RlbmVyKCdtb3VzZXVwJywgaW1nLm1vdXNldXApXG5cbiAgICBpZiAob3B0aW9ucy5jb3ZlclNjcmVlbikge1xuICAgICAgd2luZG93LnJlbW92ZUV2ZW50TGlzdGVuZXIoJ3Jlc2l6ZScsIGltZy5zaXplKVxuICAgIH1cbiAgfVxufVxuXG5jb25zdCBjbG9zZSA9IHtcbiAgZWxlbWVudDogZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnYScpLFxuXG4gIGFwcGVuZCAoKSB7XG4gICAgY2xvc2UuZWxlbWVudC5pZCA9ICdrdXZhaWZ5LWNsb3NlLWJ1dHRvbicsXG4gICAgY2xvc2UuZWxlbWVudC5pbm5lckhUTUwgPSAnPHN2ZyB4bWxucz1cImh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnXCIgd2lkdGg9XCI1MFwiIGhlaWdodD1cIjUwXCIgdmlld0JveD1cIjAgMCA1MC4wMDAwMDEgNTAuMDAwMDAxXCI+PGcgc3Ryb2tlPVwiI2ZmZlwiIGZpbGw9XCJub25lXCIgc3Ryb2tlLXdpZHRoPVwiMlwiPjxwYXRoIGQ9XCJNMTAgNDBsMzAtMzBNNDAgNDBMMTAgMTBcIi8+PC9nPjwvc3ZnPidcblxuICAgIG92ZXJsYXkuZWxlbWVudC5hcHBlbmRDaGlsZChjbG9zZS5lbGVtZW50KVxuICB9LFxuXG4gIHZpc2liaWxpdHkgKHdoYXQpIHtcbiAgICBpZiAod2hhdCA9PT0gJ3Nob3cnKSB7XG4gICAgICBjbG9zZS5lbGVtZW50LmNsYXNzTGlzdC5hZGQoJ3Zpc2libGUnKVxuICAgIH1cbiAgICBpZiAod2hhdCA9PT0gJ2hpZGUnKSB7XG4gICAgICBjbG9zZS5lbGVtZW50LmNsYXNzTGlzdC5yZW1vdmUoJ3Zpc2libGUnKVxuICAgIH1cbiAgfSxcblxuICBjbG9zZSAoKSB7XG4gICAgY2xvc2VkID0gdHJ1ZVxuXG4gICAgb3ZlcmxheS52aXNpYmlsaXR5KCdoaWRlJylcbiAgICBjbG9zZURpdi52aXNpYmlsaXR5KCdoaWRlJylcbiAgICBpbWcudmlzaWJpbGl0eSgnaGlkZScpXG4gICAgY2xvc2UudmlzaWJpbGl0eSgnaGlkZScpXG4gICAgbWVudS52aXNpYmlsaXR5KCdoaWRlJylcbiAgICBuYXZpZ2F0aW9uLnZpc2liaWxpdHkoJ2hpZGUnKVxuICAgIHNwaW5uZXIudmlzaWJpbGl0eSgnaGlkZScpXG5cbiAgICBvdmVybGF5LnJlbW92ZUV2ZW50TGlzdGVuZXJzKClcbiAgICBjbG9zZURpdi5yZW1vdmVFdmVudExpc3RlbmVycygpXG4gICAgaW1nLnJlbW92ZUV2ZW50TGlzdGVuZXJzKClcbiAgICBtZW51LnJlbW92ZUV2ZW50TGlzdGVuZXJzKClcbiAgICByZXNldC5yZW1vdmVFdmVudExpc3RlbmVycygpXG4gICAgem9vbS5yZW1vdmVFdmVudExpc3RlbmVycygpXG4gICAgcm90YXRlLnJlbW92ZUV2ZW50TGlzdGVuZXJzKClcbiAgICBuYXZpZ2F0aW9uLnJlbW92ZUV2ZW50TGlzdGVuZXJzKClcbiAgfSxcblxuICBjbG9zZUV2ZW50IChldmVudCkge1xuICAgIGNsb3NlLmNsb3NlKClcblxuICAgIGV2ZW50LnByZXZlbnREZWZhdWx0KClcbiAgfSxcblxuICBrZXlkb3duIChldmVudCkge1xuICAgIGlmIChldmVudC5rZXlDb2RlID09PSAyNykge1xuICAgICAgY2xvc2UuY2xvc2VFdmVudChldmVudClcbiAgICB9XG4gIH0sXG5cbiAgYWRkRXZlbnRMaXN0ZW5lcnMgKCkge1xuICAgIGNsb3NlLmVsZW1lbnQuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCBjbG9zZS5jbG9zZUV2ZW50KVxuXG4gICAgd2luZG93LmFkZEV2ZW50TGlzdGVuZXIoJ2tleWRvd24nLCBjbG9zZS5rZXlkb3duKVxuICB9LFxuXG4gIHJlbW92ZUV2ZW50TGlzdGVuZXJzICgpIHtcbiAgICBjbG9zZS5lbGVtZW50LnJlbW92ZUV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgY2xvc2UuY2xvc2VFdmVudClcblxuICAgIHdpbmRvdy5yZW1vdmVFdmVudExpc3RlbmVyKCdrZXlkb3duJywgY2xvc2Uua2V5ZG93bilcbiAgfVxufVxuXG5jb25zdCBtZW51ID0ge1xuICBidXR0b246IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2EnKSxcbiAgZGl2OiBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKSxcbiAgaGVscDogZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgncCcpLFxuXG4gIGFwcGVuZCAoKSB7XG4gICAgbWVudS5idXR0b24uaWQgPSAna3V2YWlmeS1tZW51LWJ1dHRvbidcbiAgICBtZW51LmJ1dHRvbi5pbm5lckhUTUwgPSAnPHN2ZyB4bWxucz1cImh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnXCIgd2lkdGg9XCI1MFwiIGhlaWdodD1cIjUwXCIgdmlld0JveD1cIjAgMCA1MC4wMDAwMDEgNTAuMDAwMDAxXCI+PGcgc3Ryb2tlPVwiI2ZmZlwiIGZpbGw9XCJub25lXCIgc3Ryb2tlLXdpZHRoPVwiMlwiPjxwYXRoIGQ9XCJNMTAgMTFoMzBNMTAgMjVoMzBNMTAgMzloMzBcIi8+PC9nPjwvc3ZnPidcbiAgICBtZW51LmRpdi5pZCA9ICdrdXZhaWZ5LW1lbnUtZGl2J1xuICAgIG1lbnUuaGVscC5pZCA9ICdrdXZhaWZ5LWhlbHAnXG4gICAgbWVudS5oZWxwLmlubmVySFRNTCA9ICdEZXNrdG9wIHVzZXJzIGNhbiB1c2UgdGhlIDxzdHJvbmc+bGVmdDwvc3Ryb25nPiBhbmQgPHN0cm9uZz5yaWdodDwvc3Ryb25nPiBrZXlzIHRvIG5hdmlnYXRlOyA8c3Ryb25nPnVwPC9zdHJvbmc+IGFuZCA8c3Ryb25nPmRvd248L3N0cm9uZz4gb3IgPHN0cm9uZz5zY3JvbGw8L3N0cm9uZz4gdG8gem9vbTsgPHN0cm9uZz5wYWdlIHVwPC9zdHJvbmc+IGFuZCA8c3Ryb25nPnBhZ2UgZG93bjwvc3Ryb25nPiB0byByb3RhdGU7IDxzdHJvbmc+Y2xpY2s8L3N0cm9uZz4gYW5kIDxzdHJvbmc+ZHJhZzwvc3Ryb25nPiB0byBtb3ZlOyA8c3Ryb25nPmhvbWU8L3N0cm9uZz4gdG8gcmVzZXQ7IGFuZCA8c3Ryb25nPmVzYzwvc3Ryb25nPiB0byBjbG9zZS4nXG5cbiAgICByb3RhdGUuYXBwZW5kKClcbiAgICB6b29tLmFwcGVuZCgpXG4gICAgcmVzZXQuYXBwZW5kKClcblxuICAgIGlmIChvcHRpb25zLnNob3dTaG9ydGN1dHMgJiYgc2NyZWVuV2lkdGggPiAxMjgwKSB7XG4gICAgICBtZW51LmRpdi5hcHBlbmRDaGlsZChtZW51LmhlbHApXG4gICAgfVxuXG4gICAgb3ZlcmxheS5lbGVtZW50LmFwcGVuZENoaWxkKG1lbnUuYnV0dG9uKVxuICAgIG92ZXJsYXkuZWxlbWVudC5hcHBlbmRDaGlsZChtZW51LmRpdilcbiAgfSxcblxuICB2aXNpYmlsaXR5ICh3aGF0KSB7XG4gICAgaWYgKHdoYXQgPT09ICdzaG93Jykge1xuICAgICAgbWVudS5idXR0b24uY2xhc3NMaXN0LmFkZCgndmlzaWJsZScpXG4gICAgfVxuICAgIGlmICh3aGF0ID09PSAnaGlkZScpIHtcbiAgICAgIG1lbnUuYnV0dG9uLmNsYXNzTGlzdC5yZW1vdmUoJ3Zpc2libGUnKVxuICAgICAgbWVudS5kaXYuY2xhc3NMaXN0LnJlbW92ZSgndmlzaWJsZScpXG4gICAgfVxuICB9LFxuXG4gIGNsaWNrIChldmVudCkge1xuICAgIGlmICghbWVudS5kaXYuY2xhc3NMaXN0LmNvbnRhaW5zKCd2aXNpYmxlJykpIHtcbiAgICAgIG1lbnUuZGl2LmNsYXNzTGlzdC5hZGQoJ3Zpc2libGUnKVxuICAgIH0gZWxzZSB7XG4gICAgICBtZW51LmRpdi5jbGFzc0xpc3QucmVtb3ZlKCd2aXNpYmxlJylcbiAgICB9XG5cbiAgICBldmVudC5wcmV2ZW50RGVmYXVsdCgpXG4gIH0sXG5cbiAgZGl2Q2xpY2sgKGV2ZW50KSB7XG4gICAgbWVudS5kaXYuY2xhc3NMaXN0LnJlbW92ZSgndmlzaWJsZScpXG5cbiAgICBldmVudC5wcmV2ZW50RGVmYXVsdCgpXG4gIH0sXG5cbiAgYWRkRXZlbnRMaXN0ZW5lcnMgKCkge1xuICAgIG1lbnUuYnV0dG9uLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgbWVudS5jbGljaylcblxuICAgIHJvdGF0ZS5hZGRFdmVudExpc3RlbmVycygpXG4gICAgem9vbS5hZGRFdmVudExpc3RlbmVycygpXG4gICAgcmVzZXQuYWRkRXZlbnRMaXN0ZW5lcnMoKVxuICB9LFxuXG4gIHJlbW92ZUV2ZW50TGlzdGVuZXJzICgpIHtcbiAgICBtZW51LmJ1dHRvbi5yZW1vdmVFdmVudExpc3RlbmVyKCdjbGljaycsIG1lbnUuY2xpY2spXG5cbiAgICByb3RhdGUucmVtb3ZlRXZlbnRMaXN0ZW5lcnMoKVxuICAgIHpvb20ucmVtb3ZlRXZlbnRMaXN0ZW5lcnMoKVxuICAgIHJlc2V0LnJlbW92ZUV2ZW50TGlzdGVuZXJzKClcbiAgfVxufVxuXG5jb25zdCByZXNldCA9IHtcbiAgZWxlbWVudDogZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnYScpLFxuXG4gIGFwcGVuZCAoKSB7XG4gICAgcmVzZXQuZWxlbWVudC5pZCA9ICdrdXZhaWZ5LXJlc2V0LWJ1dHRvbicsXG4gICAgcmVzZXQuZWxlbWVudC5pbm5lckhUTUwgPSAnPHN2ZyB4bWxucz1cImh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnXCIgd2lkdGg9XCI1MFwiIGhlaWdodD1cIjUwXCIgdmlld0JveD1cIjAgMCA1MC4wMDAwMDEgNTAuMDAwMDAxXCI+PGcgc3Ryb2tlPVwiI2ZmZlwiIGZpbGw9XCJub25lXCIgc3Ryb2tlLXdpZHRoPVwiMlwiPjxwYXRoIGQ9XCJNMjEuNjIgMjguMzhMMTAuMzEgMzkuNjlNMTIgMjhoMTB2MTBcIi8+PGc+PHBhdGggZD1cIk0yOC4zOCAyMS42MkwzOS42OSAxMC4zMU0zOCAyMkgyOFYxMlwiLz48L2c+PC9nPjwvc3ZnPidcblxuICAgIG1lbnUuZGl2LmFwcGVuZENoaWxkKHJlc2V0LmVsZW1lbnQpXG4gIH0sXG5cbiAgcmVzZXQgKGV2ZW50KSB7XG4gICAgaW1nLnJlc2V0KClcblxuICAgIGV2ZW50LnByZXZlbnREZWZhdWx0KClcbiAgfSxcblxuICBrZXlkb3duIChldmVudCkge1xuICAgIGlmIChldmVudC5rZXlDb2RlID09PSAzNikge1xuICAgICAgcmVzZXQucmVzZXQoZXZlbnQpXG4gICAgfVxuICB9LFxuXG4gIGFkZEV2ZW50TGlzdGVuZXJzICgpIHtcbiAgICByZXNldC5lbGVtZW50LmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgcmVzZXQucmVzZXQpXG5cbiAgICB3aW5kb3cuYWRkRXZlbnRMaXN0ZW5lcigna2V5ZG93bicsIHJlc2V0LmtleWRvd24pXG4gIH0sXG5cbiAgcmVtb3ZlRXZlbnRMaXN0ZW5lcnMgKCkge1xuICAgIHJlc2V0LmVsZW1lbnQucmVtb3ZlRXZlbnRMaXN0ZW5lcignY2xpY2snLCByZXNldC5yZXNldClcblxuICAgIHdpbmRvdy5yZW1vdmVFdmVudExpc3RlbmVyKCdrZXlkb3duJywgcmVzZXQua2V5ZG93bilcbiAgfVxufVxuXG5jb25zdCB6b29tID0ge1xuICBfb3V0OiBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdhJyksXG4gIF9pbjogZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnYScpLFxuXG4gIGFwcGVuZCAoKSB7XG4gICAgem9vbS5fb3V0LmlkID0gJ2t1dmFpZnktem9vbS1vdXQtYnV0dG9uJyxcbiAgICB6b29tLl9vdXQuaW5uZXJIVE1MID0gJzxzdmcgeG1sbnM9XCJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2Z1wiIHdpZHRoPVwiNTBcIiBoZWlnaHQ9XCI1MFwiIHZpZXdCb3g9XCIwIDAgNTAuMDAwMDAxIDUwLjAwMDAwMVwiPjxwYXRoIGQ9XCJNNDAgMjVIMTBcIiBmaWxsPVwibm9uZVwiIHN0cm9rZT1cIiNmZmZcIiBzdHJva2Utd2lkdGg9XCIyXCIvPjwvc3ZnPidcbiAgICB6b29tLl9pbi5pZCA9ICdrdXZhaWZ5LXpvb20taW4tYnV0dG9uJyxcbiAgICB6b29tLl9pbi5pbm5lckhUTUwgPSAnPHN2ZyB4bWxucz1cImh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnXCIgd2lkdGg9XCI1MFwiIGhlaWdodD1cIjUwXCIgdmlld0JveD1cIjAgMCA1MC4wMDAwMDEgNTAuMDAwMDAxXCI+PGcgZmlsbD1cIm5vbmVcIiBzdHJva2U9XCIjZmZmXCIgc3Ryb2tlLXdpZHRoPVwiMlwiPjxwYXRoIGQ9XCJNMjUgNDBWMTBNNDAgMjVIMTBcIi8+PC9nPjwvc3ZnPidcblxuICAgIG1lbnUuZGl2LmFwcGVuZENoaWxkKHpvb20uX291dClcbiAgICBtZW51LmRpdi5hcHBlbmRDaGlsZCh6b29tLl9pbilcbiAgfSxcblxuICB6b29tT3V0IChldmVudCkge1xuICAgIGlmIChpbWFnZXNbY3VycmVudEluZGV4XS5zY2FsZSA+PSAwLjQpIHtcbiAgICAgIGltYWdlc1tjdXJyZW50SW5kZXhdLnNjYWxlIC09IGltYWdlc1tjdXJyZW50SW5kZXhdLnNjYWxlUmF0aW9cbiAgICB9XG5cbiAgICBpbWcudHJhbnNmb3JtKHtcbiAgICAgIHNjYWxlVmFsdWU6IGltYWdlc1tjdXJyZW50SW5kZXhdLnNjYWxlXG4gICAgfSlcblxuICAgIGV2ZW50LnByZXZlbnREZWZhdWx0KClcbiAgfSxcblxuICB6b29tSW4gKGV2ZW50KSB7XG4gICAgaW1hZ2VzW2N1cnJlbnRJbmRleF0uc2NhbGUgKz0gaW1hZ2VzW2N1cnJlbnRJbmRleF0uc2NhbGVSYXRpb1xuXG4gICAgaW1nLnRyYW5zZm9ybSh7XG4gICAgICBzY2FsZVZhbHVlOiBpbWFnZXNbY3VycmVudEluZGV4XS5zY2FsZVxuICAgIH0pXG5cbiAgICBldmVudC5wcmV2ZW50RGVmYXVsdCgpXG4gIH0sXG5cbiAga2V5ZG93biAoZXZlbnQpIHtcbiAgICBpZiAoZXZlbnQua2V5Q29kZSA9PT0gMzgpIHtcbiAgICAgIHpvb20uem9vbUluKGV2ZW50KVxuICAgIH1cbiAgICBpZiAoZXZlbnQua2V5Q29kZSA9PT0gNDApIHtcbiAgICAgIHpvb20uem9vbU91dChldmVudClcbiAgICB9XG4gIH0sXG5cbiAgYWRkRXZlbnRMaXN0ZW5lcnMgKCkge1xuICAgIHpvb20uX291dC5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIHpvb20uem9vbU91dClcbiAgICB6b29tLl9pbi5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIHpvb20uem9vbUluKVxuXG4gICAgd2luZG93LmFkZEV2ZW50TGlzdGVuZXIoJ2tleWRvd24nLCB6b29tLmtleWRvd24pXG4gIH0sXG5cbiAgcmVtb3ZlRXZlbnRMaXN0ZW5lcnMgKCkge1xuICAgIHpvb20uX291dC5yZW1vdmVFdmVudExpc3RlbmVyKCdjbGljaycsIHpvb20uem9vbU91dClcbiAgICB6b29tLl9pbi5yZW1vdmVFdmVudExpc3RlbmVyKCdjbGljaycsIHpvb20uem9vbUluKVxuXG4gICAgd2luZG93LnJlbW92ZUV2ZW50TGlzdGVuZXIoJ2tleWRvd24nLCB6b29tLmtleWRvd24pXG4gIH1cbn1cblxuY29uc3Qgcm90YXRlID0ge1xuICBuZWdhdGl2ZTogZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnYScpLFxuICBwb3NpdGl2ZTogZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnYScpLFxuXG4gIGFwcGVuZCAoKSB7XG4gICAgcm90YXRlLm5lZ2F0aXZlLmlkID0gJ2t1dmFpZnktcm90YXRlLW5lZ2F0aXZlLWJ1dHRvbicsXG4gICAgcm90YXRlLm5lZ2F0aXZlLmlubmVySFRNTCA9ICc8c3ZnIHhtbG5zPVwiaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmdcIiB3aWR0aD1cIjUwXCIgaGVpZ2h0PVwiNTBcIiB2aWV3Qm94PVwiMCAwIDUwLjAwMDAwMSA1MC4wMDAwMDFcIj48ZyBzdHJva2U9XCIjZmZmXCIgZmlsbD1cIm5vbmVcIiBzdHJva2Utd2lkdGg9XCIyXCI+PHBhdGggZD1cIk0yNSAzOWM3LjczMiAwIDE0LTYuMjY4IDE0LTE0cy02LjI2OC0xNC0xNC0xNC0xNCA2LjI2OC0xNCAxNFwiIHN0cm9rZS1saW5lam9pbj1cInJvdW5kXCIvPjxwYXRoIGQ9XCJNNS4wMyAxNy44ODVsNS41NjUgOC4zMDggOC4zMDgtNS41NjdcIi8+PC9nPjwvc3ZnPidcbiAgICByb3RhdGUucG9zaXRpdmUuaWQgPSAna3V2YWlmeS1yb3RhdGUtcG9zaXRpdmUtYnV0dG9uJyxcbiAgICByb3RhdGUucG9zaXRpdmUuaW5uZXJIVE1MID0gJzxzdmcgeG1sbnM9XCJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2Z1wiIHdpZHRoPVwiNTBcIiBoZWlnaHQ9XCI1MFwiIHZpZXdCb3g9XCIwIDAgNTAuMDAwMDAxIDUwLjAwMDAwMVwiPjxnIHN0cm9rZT1cIiNmZmZcIiBmaWxsPVwibm9uZVwiIHN0cm9rZS13aWR0aD1cIjJcIj48cGF0aCBkPVwiTTI1IDM5Yy03LjczMiAwLTE0LTYuMjY4LTE0LTE0czYuMjY4LTE0IDE0LTE0IDE0IDYuMjY4IDE0IDE0XCIgc3Ryb2tlLWxpbmVqb2luPVwicm91bmRcIi8+PHBhdGggZD1cIk00NC45NyAxNy44ODVsLTUuNTY1IDguMzA4LTguMzA4LTUuNTY3XCIvPjwvZz48L3N2Zz4nXG5cbiAgICBtZW51LmRpdi5hcHBlbmRDaGlsZChyb3RhdGUubmVnYXRpdmUpXG4gICAgbWVudS5kaXYuYXBwZW5kQ2hpbGQocm90YXRlLnBvc2l0aXZlKVxuICB9LFxuXG4gIG5lZ2F0aXZlUm90YXRlIChldmVudCkge1xuICAgIGltZy50cmFuc2Zvcm0oe1xuICAgICAgcm90YXRlVmFsdWU6IGltYWdlc1tjdXJyZW50SW5kZXhdLnJvdGF0ZSAtIDkwXG4gICAgfSlcblxuICAgIGV2ZW50LnByZXZlbnREZWZhdWx0KClcbiAgfSxcblxuICBwb3NpdGl2ZVJvdGF0ZSAoZXZlbnQpIHtcbiAgICBpbWcudHJhbnNmb3JtKHtcbiAgICAgIHJvdGF0ZVZhbHVlOiBpbWFnZXNbY3VycmVudEluZGV4XS5yb3RhdGUgKyA5MFxuICAgIH0pXG5cbiAgICBldmVudC5wcmV2ZW50RGVmYXVsdCgpXG4gIH0sXG5cbiAga2V5ZG93biAoZXZlbnQpIHtcbiAgICBpZiAoZXZlbnQua2V5Q29kZSA9PT0gMzMpIHtcbiAgICAgIHJvdGF0ZS5wb3NpdGl2ZVJvdGF0ZShldmVudClcbiAgICB9XG4gICAgaWYgKGV2ZW50LmtleUNvZGUgPT09IDM0KSB7XG4gICAgICByb3RhdGUubmVnYXRpdmVSb3RhdGUoZXZlbnQpXG4gICAgfVxuICB9LFxuXG4gIGFkZEV2ZW50TGlzdGVuZXJzICgpIHtcbiAgICByb3RhdGUubmVnYXRpdmUuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCByb3RhdGUubmVnYXRpdmVSb3RhdGUpXG4gICAgcm90YXRlLnBvc2l0aXZlLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgcm90YXRlLnBvc2l0aXZlUm90YXRlKVxuXG4gICAgd2luZG93LmFkZEV2ZW50TGlzdGVuZXIoJ2tleWRvd24nLCByb3RhdGUua2V5ZG93bilcbiAgfSxcblxuICByZW1vdmVFdmVudExpc3RlbmVycyAoKSB7XG4gICAgcm90YXRlLm5lZ2F0aXZlLnJlbW92ZUV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgcm90YXRlLm5lZ2F0aXZlUm90YXRlKVxuICAgIHJvdGF0ZS5wb3NpdGl2ZS5yZW1vdmVFdmVudExpc3RlbmVyKCdjbGljaycsIHJvdGF0ZS5wb3NpdGl2ZVJvdGF0ZSlcblxuICAgIHdpbmRvdy5yZW1vdmVFdmVudExpc3RlbmVyKCdrZXlkb3duJywgcm90YXRlLmtleWRvd24pXG4gIH1cbn1cblxuY29uc3QgbmF2aWdhdGlvbiA9IHtcbiAgbmV4dDogZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnYScpLFxuICBwcmV2OiBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdhJyksXG5cbiAgYXBwZW5kICgpIHtcbiAgICBuYXZpZ2F0aW9uLm5leHQuaWQgPSAna3V2YWlmeS1uZXh0LWJ1dHRvbidcbiAgICBuYXZpZ2F0aW9uLm5leHQuaW5uZXJIVE1MID0gJzxzdmcgeG1sbnM9XCJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2Z1wiIHdpZHRoPVwiNTBcIiBoZWlnaHQ9XCI1MFwiIHZpZXdCb3g9XCIwIDAgNTAuMDAwMDAxIDUwLjAwMDAwMVwiPjxwYXRoIGQ9XCJNMTQuNDY3IDEwbDIwIDE1LTIwIDE1XCIgZmlsbD1cIm5vbmVcIiBzdHJva2U9XCIjZmZmXCIgc3Ryb2tlLXdpZHRoPVwiMlwiLz48L3N2Zz4nXG4gICAgbmF2aWdhdGlvbi5wcmV2LmlkID0gJ2t1dmFpZnktcHJldi1idXR0b24nXG4gICAgbmF2aWdhdGlvbi5wcmV2LmlubmVySFRNTCA9ICc8c3ZnIHhtbG5zPVwiaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmdcIiB3aWR0aD1cIjUwXCIgaGVpZ2h0PVwiNTBcIiB2aWV3Qm94PVwiMCAwIDUwLjAwMDAwMSA1MC4wMDAwMDFcIj48cGF0aCBkPVwiTTM1LjUzMyAxMGwtMjAgMTUgMjAgMTVcIiBmaWxsPVwibm9uZVwiIHN0cm9rZT1cIiNmZmZcIiBzdHJva2Utd2lkdGg9XCIyXCIvPjwvc3ZnPidcblxuICAgIG92ZXJsYXkuZWxlbWVudC5hcHBlbmRDaGlsZChuYXZpZ2F0aW9uLm5leHQpXG4gICAgb3ZlcmxheS5lbGVtZW50LmFwcGVuZENoaWxkKG5hdmlnYXRpb24ucHJldilcbiAgfSxcblxuICB2aXNpYmlsaXR5ICh3aGF0KSB7XG4gICAgaWYgKHdoYXQgPT09ICdkZXBlbmRzJykge1xuICAgICAgaWYgKG5leHRJbmRleCA9PT0gbnVsbCkge1xuICAgICAgICBuYXZpZ2F0aW9uLm5leHQuY2xhc3NMaXN0LnJlbW92ZSgndmlzaWJsZScpXG4gICAgICB9IGVsc2Uge1xuICAgICAgICBuYXZpZ2F0aW9uLm5leHQuY2xhc3NMaXN0LmFkZCgndmlzaWJsZScpXG4gICAgICB9XG4gICAgICBpZiAocHJldkluZGV4ID09PSBudWxsKSB7XG4gICAgICAgIG5hdmlnYXRpb24ucHJldi5jbGFzc0xpc3QucmVtb3ZlKCd2aXNpYmxlJylcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIG5hdmlnYXRpb24ucHJldi5jbGFzc0xpc3QuYWRkKCd2aXNpYmxlJylcbiAgICAgIH1cbiAgICB9XG4gICAgaWYgKHdoYXQgPT09ICdoaWRlJykge1xuICAgICAgbmF2aWdhdGlvbi5uZXh0LmNsYXNzTGlzdC5yZW1vdmUoJ3Zpc2libGUnKVxuICAgICAgbmF2aWdhdGlvbi5wcmV2LmNsYXNzTGlzdC5yZW1vdmUoJ3Zpc2libGUnKVxuICAgIH1cbiAgfSxcblxuICBnZXROZXh0ICgpIHtcbiAgICBpZiAobmV4dEluZGV4ICE9PSBudWxsKSB7XG4gICAgICBpbWcucHJlcGFyZShuZXh0SW5kZXgpXG4gICAgfVxuICB9LFxuXG4gIGdldFByZXYgKCkge1xuICAgIGlmIChwcmV2SW5kZXggIT09IG51bGwpIHtcbiAgICAgIGltZy5wcmVwYXJlKHByZXZJbmRleClcbiAgICB9XG4gIH0sXG5cbiAgbmV4dEltZyAoZXZlbnQpIHtcbiAgICBuYXZpZ2F0aW9uLmdldE5leHQoKVxuXG4gICAgZXZlbnQucHJldmVudERlZmF1bHQoKVxuICB9LFxuXG4gIHByZXZJbWcgKGV2ZW50KSB7XG4gICAgbmF2aWdhdGlvbi5nZXRQcmV2KClcblxuICAgIGV2ZW50LnByZXZlbnREZWZhdWx0KClcbiAgfSxcblxuICBrZXlkb3duIChldmVudCkge1xuICAgIGlmIChldmVudC5rZXlDb2RlID09PSAzOSkge1xuICAgICAgbmF2aWdhdGlvbi5nZXROZXh0KGV2ZW50KVxuICAgIH1cbiAgICBpZiAoZXZlbnQua2V5Q29kZSA9PT0gMzcpIHtcbiAgICAgIG5hdmlnYXRpb24uZ2V0UHJldihldmVudClcbiAgICB9XG4gIH0sXG5cbiAgYWRkRXZlbnRMaXN0ZW5lcnMgKCkge1xuICAgIG5hdmlnYXRpb24ubmV4dC5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIG5hdmlnYXRpb24ubmV4dEltZylcbiAgICBuYXZpZ2F0aW9uLnByZXYuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCBuYXZpZ2F0aW9uLnByZXZJbWcpXG5cbiAgICB3aW5kb3cuYWRkRXZlbnRMaXN0ZW5lcigna2V5ZG93bicsIG5hdmlnYXRpb24ua2V5ZG93bilcbiAgfSxcblxuICByZW1vdmVFdmVudExpc3RlbmVycyAoKSB7XG4gICAgbmF2aWdhdGlvbi5uZXh0LnJlbW92ZUV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgbmF2aWdhdGlvbi5uZXh0SW1nKVxuICAgIG5hdmlnYXRpb24ucHJldi5yZW1vdmVFdmVudExpc3RlbmVyKCdjbGljaycsIG5hdmlnYXRpb24ucHJldkltZylcblxuICAgIHdpbmRvdy5yZW1vdmVFdmVudExpc3RlbmVyKCdrZXlkb3duJywgbmF2aWdhdGlvbi5rZXlkb3duKVxuICB9XG59XG5cbmNvbnN0IHNwaW5uZXIgPSB7XG4gIGVsZW1lbnQ6IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpLFxuXG4gIGFwcGVuZCAoKSB7XG4gICAgc3Bpbm5lci5lbGVtZW50LmlkID0gJ2t1dmFpZnktc3Bpbm5lcidcbiAgICBzcGlubmVyLmVsZW1lbnQuaW5uZXJIVE1MID0gJzxkaXYgY2xhc3M9XCJzay1mb2xkaW5nLWN1YmVcIj48ZGl2IGNsYXNzPVwic2stY3ViZTEgc2stY3ViZVwiPjwvZGl2PjxkaXYgY2xhc3M9XCJzay1jdWJlMiBzay1jdWJlXCI+PC9kaXY+PGRpdiBjbGFzcz1cInNrLWN1YmU0IHNrLWN1YmVcIj48L2Rpdj48ZGl2IGNsYXNzPVwic2stY3ViZTMgc2stY3ViZVwiPjwvZGl2PjwvZGl2PidcbiAgICBzcGlubmVyLmVsZW1lbnQuc3R5bGUudHJhbnNpdGlvbiA9ICdvcGFjaXR5ICcgKyBvcHRpb25zLnRyYW5zaXRpb25TcGVlZCArICdtcyBlYXNlLCB2aXNpYmlsaXR5ICcgKyBvcHRpb25zLnRyYW5zaXRpb25TcGVlZCArICdtcyBlYXNlJ1xuXG4gICAgb3ZlcmxheS5lbGVtZW50LmFwcGVuZENoaWxkKHNwaW5uZXIuZWxlbWVudClcbiAgfSxcblxuICB2aXNpYmlsaXR5ICh3aGF0KSB7XG4gICAgaWYgKHdoYXQgPT09ICdzaG93Jykge1xuICAgICAgc3Bpbm5lci5lbGVtZW50LmNsYXNzTGlzdC5hZGQoJ3Zpc2libGUnKVxuICAgIH1cbiAgICBpZiAod2hhdCA9PT0gJ2hpZGUnKSB7XG4gICAgICBzcGlubmVyLmVsZW1lbnQuY2xhc3NMaXN0LnJlbW92ZSgndmlzaWJsZScpXG4gICAgfVxuICB9XG59XG5cbmNvbnN0IGNsb3NlRGl2ID0ge1xuICBlbGVtZW50OiBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKSxcblxuICBhcHBlbmQgKCkge1xuICAgIGNsb3NlRGl2LmVsZW1lbnQuaWQgPSAna3V2YWlmeS1jbG9zZS1kaXYnXG5cbiAgICBvdmVybGF5LmVsZW1lbnQuYXBwZW5kQ2hpbGQoY2xvc2VEaXYuZWxlbWVudClcbiAgfSxcblxuICB2aXNpYmlsaXR5ICh3aGF0KSB7XG4gICAgaWYgKHdoYXQgPT09ICdzaG93Jykge1xuICAgICAgY2xvc2VEaXYuZWxlbWVudC5jbGFzc0xpc3QuYWRkKCd2aXNpYmxlJylcbiAgICB9XG4gICAgaWYgKHdoYXQgPT09ICdoaWRlJykge1xuICAgICAgY2xvc2VEaXYuZWxlbWVudC5jbGFzc0xpc3QucmVtb3ZlKCd2aXNpYmxlJylcbiAgICB9XG4gIH0sXG5cbiAgY2xpY2sgKGV2ZW50KSB7XG4gICAgY2xvc2UuY2xvc2UoKVxuXG4gICAgZXZlbnQucHJldmVudERlZmF1bHQoKVxuICB9LFxuXG4gIGFkZEV2ZW50TGlzdGVuZXJzICgpIHtcbiAgICBjbG9zZURpdi5lbGVtZW50LmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgY2xvc2VEaXYuY2xpY2spXG4gIH0sXG5cbiAgcmVtb3ZlRXZlbnRMaXN0ZW5lcnMgKCkge1xuICAgIGNsb3NlRGl2LmVsZW1lbnQucmVtb3ZlRXZlbnRMaXN0ZW5lcignY2xpY2snLCBjbG9zZURpdi5jbGljaylcbiAgfVxufVxuXG5leHBvcnQgZGVmYXVsdCBpbml0IiwiKGZ1bmN0aW9uIGUodCxuLHIpe2Z1bmN0aW9uIHMobyx1KXtpZighbltvXSl7aWYoIXRbb10pe3ZhciBhPXR5cGVvZiByZXF1aXJlPT1cImZ1bmN0aW9uXCImJnJlcXVpcmU7aWYoIXUmJmEpcmV0dXJuIGEobywhMCk7aWYoaSlyZXR1cm4gaShvLCEwKTt2YXIgZj1uZXcgRXJyb3IoXCJDYW5ub3QgZmluZCBtb2R1bGUgJ1wiK28rXCInXCIpO3Rocm93IGYuY29kZT1cIk1PRFVMRV9OT1RfRk9VTkRcIixmfXZhciBsPW5bb109e2V4cG9ydHM6e319O3Rbb11bMF0uY2FsbChsLmV4cG9ydHMsZnVuY3Rpb24oZSl7dmFyIG49dFtvXVsxXVtlXTtyZXR1cm4gcyhuP246ZSl9LGwsbC5leHBvcnRzLGUsdCxuLHIpfXJldHVybiBuW29dLmV4cG9ydHN9dmFyIGk9dHlwZW9mIHJlcXVpcmU9PVwiZnVuY3Rpb25cIiYmcmVxdWlyZTtmb3IodmFyIG89MDtvPHIubGVuZ3RoO28rKylzKHJbb10pO3JldHVybiBzfSkoezE6W2Z1bmN0aW9uKHJlcXVpcmUsbW9kdWxlLGV4cG9ydHMpe1xuJ3VzZSBzdHJpY3QnO1xuXG5PYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgXCJfX2VzTW9kdWxlXCIsIHtcbiAgdmFsdWU6IHRydWVcbn0pO1xudmFyIG9wdGlvbnMgPSB7XG4gIGxpbmtFbGVtZW50OiAnYm9keScsXG4gIGZpbGVUeXBlczogWydqcGcnLCAnanBlZycsICdwbmcnLCAnZ2lmJ10sXG4gIGNvdmVyU2NyZWVuOiB0cnVlLFxuICBzaG93U2hvcnRjdXRzOiB0cnVlLFxuICB0cmFuc2l0aW9uU3BlZWQ6IDQwMCxcbiAgdHJhbnNpdGlvblNjYWxlOiAwLjA4LFxuICB6b29tUmF0aW86IDAuMixcbiAgc21hbGxTaXplOiA3NjgsXG4gIG1lZGl1bVNpemU6IDEyODBcbn07XG5cbnZhciBib2R5ID0gZG9jdW1lbnQuYm9keTtcbnZhciBpbWFnZXMgPSBbXTtcbnZhciBjdXJyZW50SW5kZXggPSBudWxsO1xudmFyIG5leHRJbmRleCA9IG51bGw7XG52YXIgcHJldkluZGV4ID0gbnVsbDtcbnZhciBzY3JlZW5XaWR0aCA9IGJvZHkuY2xpZW50V2lkdGg7XG52YXIgc2NyZWVuSGVpZ2h0ID0gYm9keS5jbGllbnRIZWlnaHQ7XG52YXIgY2xvc2VkID0gZmFsc2U7XG5cbnZhciBzZXR1cCA9IGZ1bmN0aW9uIHNldHVwKCkge1xuICB2YXIgc2V0dGluZ3MgPSBhcmd1bWVudHMubGVuZ3RoIDw9IDAgfHwgYXJndW1lbnRzWzBdID09PSB1bmRlZmluZWQgPyB7fSA6IGFyZ3VtZW50c1swXTtcblxuICBpZiAoc2V0dGluZ3MubGlua0VsZW1lbnQpIHtcbiAgICBpZiAodHlwZW9mIHNldHRpbmdzLmxpbmtFbGVtZW50ID09PSAnc3RyaW5nJykge1xuICAgICAgb3B0aW9ucy5saW5rRWxlbWVudCA9IHNldHRpbmdzLmxpbmtFbGVtZW50O1xuICAgIH1cbiAgfVxuICBpZiAoc2V0dGluZ3MuZmlsZVR5cGVzKSB7XG4gICAgaWYgKHNldHRpbmdzLmZpbGVUeXBlcy5jb25zdHJ1Y3RvciA9PT0gQXJyYXkpIHtcbiAgICAgIG9wdGlvbnMuZmlsZVR5cGVzID0gc2V0dGluZ3MuZmlsZVR5cGVzO1xuICAgIH1cbiAgfVxuICBpZiAoc2V0dGluZ3MuY292ZXJTY3JlZW4gIT09IHVuZGVmaW5lZCkge1xuICAgIGlmIChzZXR0aW5ncy5jb3ZlclNjcmVlbiA9PT0gZmFsc2UpIHtcbiAgICAgIG9wdGlvbnMuY292ZXJTY3JlZW4gPSBmYWxzZTtcbiAgICB9XG4gIH1cbiAgaWYgKHNldHRpbmdzLnNob3dTaG9ydGN1dHMgIT09IHVuZGVmaW5lZCkge1xuICAgIGlmIChzZXR0aW5ncy5zaG93U2hvcnRjdXRzID09PSBmYWxzZSkge1xuICAgICAgb3B0aW9ucy5zaG93U2hvcnRjdXRzID0gZmFsc2U7XG4gICAgfVxuICB9XG4gIGlmIChzZXR0aW5ncy50cmFuc2l0aW9uU3BlZWQpIHtcbiAgICBpZiAodHlwZW9mIHNldHRpbmdzLnRyYW5zaXRpb25TcGVlZCA9PT0gJ251bWJlcicgJiYgc2V0dGluZ3MudHJhbnNpdGlvblNwZWVkID49IDEwMCkge1xuICAgICAgb3B0aW9ucy50cmFuc2l0aW9uU3BlZWQgPSBzZXR0aW5ncy50cmFuc2l0aW9uU3BlZWQ7XG4gICAgfVxuICB9XG4gIGlmIChzZXR0aW5ncy50cmFuc2l0aW9uU2NhbGUpIHtcbiAgICBpZiAodHlwZW9mIHNldHRpbmdzLnRyYW5zaXRpb25TY2FsZSA9PT0gJ251bWJlcicpIHtcbiAgICAgIG9wdGlvbnMudHJhbnNpdGlvblNjYWxlID0gc2V0dGluZ3MudHJhbnNpdGlvblNjYWxlO1xuICAgIH1cbiAgICBpZiAoc2V0dGluZ3MudHJhbnNpdGlvblNjYWxlID09PSAwKSB7XG4gICAgICBvcHRpb25zLnRyYW5zaXRpb25TY2FsZSA9IDA7XG4gICAgfVxuICB9XG4gIGlmIChzZXR0aW5ncy56b29tU2NhbGUpIHtcbiAgICBpZiAodHlwZW9mIHNldHRpbmdzLnpvb21TY2FsZSA9PT0gJ251bWJlcicpIHtcbiAgICAgIG9wdGlvbnMuem9vbVNjYWxlID0gc2V0dGluZ3Muem9vbVNjYWxlO1xuICAgIH1cbiAgICBpZiAoc2V0dGluZ3Muem9vbVNjYWxlID09PSAwKSB7XG4gICAgICBvcHRpb25zLnpvb21TY2FsZSA9IDA7XG4gICAgfVxuICB9XG4gIGlmIChzZXR0aW5ncy5zbWFsbFNpemUpIHtcbiAgICBpZiAodHlwZW9mIHNldHRpbmdzLnNtYWxsU2l6ZSA9PT0gJ251bWJlcicpIHtcbiAgICAgIG9wdGlvbnMuc21hbGxTaXplID0gc2V0dGluZ3Muc21hbGxTaXplO1xuICAgIH1cbiAgfVxuICBpZiAoc2V0dGluZ3MubWVkaXVtU2l6ZSkge1xuICAgIGlmICh0eXBlb2Ygc2V0dGluZ3MubWVkaXVtU2l6ZSA9PT0gJ251bWJlcicpIHtcbiAgICAgIG9wdGlvbnMubWVkaXVtU2l6ZSA9IHNldHRpbmdzLm1lZGl1bVNpemU7XG4gICAgfVxuICB9XG5cbiAgbGlua3MuZ2V0KCk7XG4gIGxpbmtzLnB1c2goKTtcbiAgbGlua3MuYWRkRXZlbnRMaXN0ZW5lcnMoKTtcbn07XG5cbnZhciBpbml0ID0gZnVuY3Rpb24gaW5pdChzZXR0aW5ncykge1xuICBzZXR1cChzZXR0aW5ncyk7XG59O1xuXG52YXIgbGlua3MgPSB7XG4gIGxpbmtzOiBbXSxcblxuICBnZXQ6IGZ1bmN0aW9uIGdldCgpIHtcbiAgICB2YXIgdGVtcExpbmtzID0gQXJyYXkuZnJvbShkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKG9wdGlvbnMubGlua0VsZW1lbnQgKyAnIGEnKSk7XG4gICAgdmFyIGZpbGVUeXBlcyA9IG9wdGlvbnMuZmlsZVR5cGVzLmpvaW4oJ3wnKTtcbiAgICB2YXIgcmVnZXggPSBuZXcgUmVnRXhwKCdcXC4oJyArIGZpbGVUeXBlcyArICcpJCcpO1xuXG4gICAgdGVtcExpbmtzLmZvckVhY2goZnVuY3Rpb24gKGxpbmspIHtcbiAgICAgIGlmIChsaW5rLnBhdGhuYW1lLm1hdGNoKHJlZ2V4KSkge1xuICAgICAgICBsaW5rcy5saW5rcy5wdXNoKGxpbmspO1xuICAgICAgfVxuICAgIH0pO1xuICB9LFxuICBwdXNoOiBmdW5jdGlvbiBwdXNoKCkge1xuICAgIGxpbmtzLmxpbmtzLmZvckVhY2goZnVuY3Rpb24gKGxpbmspIHtcbiAgICAgIGltZy5wdXNoKGxpbmspO1xuICAgIH0pO1xuICB9LFxuICBhZGRFdmVudExpc3RlbmVyczogZnVuY3Rpb24gYWRkRXZlbnRMaXN0ZW5lcnMoKSB7XG4gICAgbGlua3MubGlua3MuZm9yRWFjaChmdW5jdGlvbiAobGluaykge1xuICAgICAgbGluay5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIGZ1bmN0aW9uIChldmVudCkge1xuICAgICAgICBjbG9zZWQgPSBmYWxzZTtcblxuICAgICAgICB2YXIgaW5kZXggPSBsaW5rcy5saW5rcy5pbmRleE9mKGxpbmspO1xuXG4gICAgICAgIGltZy5jdXJyZW50KGluZGV4KTtcblxuICAgICAgICBvdmVybGF5LmFwcGVuZCgpO1xuICAgICAgICBjbG9zZURpdi5hcHBlbmQoKTtcbiAgICAgICAgX2Nsb3NlLmFwcGVuZCgpO1xuICAgICAgICBtZW51LmFwcGVuZCgpO1xuICAgICAgICBuYXZpZ2F0aW9uLmFwcGVuZCgpO1xuICAgICAgICBzcGlubmVyLmFwcGVuZCgpO1xuXG4gICAgICAgIHNldFRpbWVvdXQoZnVuY3Rpb24gKCkge1xuICAgICAgICAgIG92ZXJsYXkudmlzaWJpbGl0eSgnc2hvdycpO1xuICAgICAgICAgIF9jbG9zZS52aXNpYmlsaXR5KCdzaG93Jyk7XG4gICAgICAgICAgbWVudS52aXNpYmlsaXR5KCdzaG93Jyk7XG4gICAgICAgICAgbmF2aWdhdGlvbi52aXNpYmlsaXR5KCdkZXBlbmRzJyk7XG5cbiAgICAgICAgICBpbWcucHJlcGFyZShpbmRleCk7XG4gICAgICAgIH0sIDEwMCk7XG5cbiAgICAgICAgc2V0VGltZW91dChmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgb3ZlcmxheS5hZGRFdmVudExpc3RlbmVycygpO1xuICAgICAgICAgIGNsb3NlRGl2LmFkZEV2ZW50TGlzdGVuZXJzKCk7XG4gICAgICAgICAgbWVudS5hZGRFdmVudExpc3RlbmVycygpO1xuICAgICAgICAgIF9jbG9zZS5hZGRFdmVudExpc3RlbmVycygpO1xuICAgICAgICAgIG5hdmlnYXRpb24uYWRkRXZlbnRMaXN0ZW5lcnMoKTtcbiAgICAgICAgfSwgMjAwKTtcblxuICAgICAgICBldmVudC5wcmV2ZW50RGVmYXVsdCgpO1xuICAgICAgfSk7XG4gICAgfSk7XG4gIH1cbn07XG5cbnZhciBvdmVybGF5ID0ge1xuICBlbGVtZW50OiBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKSxcbiAgZm9jdXNTdGFydGVkOiBmYWxzZSxcblxuICBmb2N1czogZnVuY3Rpb24gZm9jdXMoZXZlbnQpIHtcbiAgICBpZiAob3ZlcmxheS5mb2N1c1N0YXJ0ZWQgPT09IGZhbHNlKSB7XG4gICAgICBvdmVybGF5LnZpc2liaWxpdHkoJ2ZvY3VzJyk7XG5cbiAgICAgIHNldFRpbWVvdXQoZnVuY3Rpb24gKCkge1xuICAgICAgICBvdmVybGF5LnZpc2liaWxpdHkoJ3VuZm9jdXMnKTtcblxuICAgICAgICBvdmVybGF5LmZvY3VzU3RhcnRlZCA9IGZhbHNlO1xuICAgICAgfSwgMjAwMCk7XG4gICAgfVxuXG4gICAgb3ZlcmxheS5mb2N1c1N0YXJ0ZWQgPSB0cnVlO1xuICB9LFxuICBhcHBlbmQ6IGZ1bmN0aW9uIGFwcGVuZCgpIHtcbiAgICBvdmVybGF5LmVsZW1lbnQuaWQgPSAna3V2YWlmeSc7XG4gICAgb3ZlcmxheS5lbGVtZW50LnN0eWxlLnRyYW5zaXRpb24gPSAnb3BhY2l0eSAnICsgb3B0aW9ucy50cmFuc2l0aW9uU3BlZWQgKyAnbXMgZWFzZSwgdmlzaWJpbGl0eSAnICsgb3B0aW9ucy50cmFuc2l0aW9uU3BlZWQgKyAnbXMgZWFzZSc7XG5cbiAgICBib2R5LmFwcGVuZENoaWxkKG92ZXJsYXkuZWxlbWVudCk7XG4gIH0sXG4gIHZpc2liaWxpdHk6IGZ1bmN0aW9uIHZpc2liaWxpdHkod2hhdCkge1xuICAgIGlmICh3aGF0ID09PSAnc2hvdycpIHtcbiAgICAgIG92ZXJsYXkuZWxlbWVudC5jbGFzc0xpc3QuYWRkKCd2aXNpYmxlJyk7XG4gICAgfVxuICAgIGlmICh3aGF0ID09PSAnaGlkZScpIHtcbiAgICAgIG92ZXJsYXkuZWxlbWVudC5jbGFzc0xpc3QucmVtb3ZlKCd2aXNpYmxlJyk7XG4gICAgfVxuICAgIGlmICh3aGF0ID09PSAnZm9jdXMnKSB7XG4gICAgICBvdmVybGF5LmVsZW1lbnQuY2xhc3NMaXN0LmFkZCgnZm9jdXNlZCcpO1xuICAgIH1cbiAgICBpZiAod2hhdCA9PT0gJ3VuZm9jdXMnKSB7XG4gICAgICBvdmVybGF5LmVsZW1lbnQuY2xhc3NMaXN0LnJlbW92ZSgnZm9jdXNlZCcpO1xuICAgIH1cbiAgfSxcblxuXG4gIGFkZEV2ZW50TGlzdGVuZXJzOiBmdW5jdGlvbiBhZGRFdmVudExpc3RlbmVycygpIHtcbiAgICB3aW5kb3cuYWRkRXZlbnRMaXN0ZW5lcignbW91c2Vtb3ZlJywgb3ZlcmxheS5mb2N1cyk7XG4gIH0sXG5cbiAgcmVtb3ZlRXZlbnRMaXN0ZW5lcnM6IGZ1bmN0aW9uIHJlbW92ZUV2ZW50TGlzdGVuZXJzKCkge1xuICAgIHdpbmRvdy5yZW1vdmVFdmVudExpc3RlbmVyKCdtb3VzZW1vdmUnLCBvdmVybGF5LmZvY3VzKTtcbiAgfVxufTtcblxudmFyIGltZyA9IHtcbiAgcHVzaDogZnVuY3Rpb24gcHVzaChsaW5rKSB7XG4gICAgdmFyIGltZyA9IHtcbiAgICAgIGVsZW1lbnQ6IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2ltZycpLFxuICAgICAgaHJlZjogbGluay5wYXRobmFtZSxcbiAgICAgIHNtYWxsSHJlZjogbGluay5nZXRBdHRyaWJ1dGUoJ2RhdGEta3V2YWlmeS1zbWFsbCcpIHx8IG51bGwsXG4gICAgICBtZWRpdW1IcmVmOiBsaW5rLmdldEF0dHJpYnV0ZSgnZGF0YS1rdXZhaWZ5LW1lZGl1bScpIHx8IG51bGwsXG4gICAgICBjYXB0aW9uOiBudWxsLFxuICAgICAgc2NhbGU6IDEsXG4gICAgICBzY2FsZVJhdGlvOiBvcHRpb25zLnpvb21SYXRpbyxcbiAgICAgIHJvdGF0ZTogMCxcbiAgICAgIG9mZng6IDAsXG4gICAgICBvZmZ5OiAwLFxuICAgICAgdHJhbnNpdGlvbjogJ3dpZHRoICcgKyBvcHRpb25zLnRyYW5zaXRpb25TcGVlZCArICdtcyBlYXNlLCBoZWlnaHQgJyArIG9wdGlvbnMudHJhbnNpdGlvblNwZWVkICsgJ21zIGVhc2UsIHRyYW5zZm9ybSAnICsgb3B0aW9ucy50cmFuc2l0aW9uU3BlZWQgKyAnbXMgZWFzZSwgb3BhY2l0eSAnICsgb3B0aW9ucy50cmFuc2l0aW9uU3BlZWQgKyAnbXMgZWFzZSwgdmlzaWJpbGl0eSAnICsgb3B0aW9ucy50cmFuc2l0aW9uU3BlZWQgKyAnbXMgZWFzZScsXG4gICAgICBsb2FkZWQ6IGZhbHNlXG4gICAgfTtcblxuICAgIGltZy5lbGVtZW50LnN0eWxlLnRyYW5zaXRpb24gPSBpbWcudHJhbnNpdGlvbjtcbiAgICBpbWcuZWxlbWVudC5zdHlsZS5sZWZ0ID0gbnVsbDtcbiAgICBpbWcuZWxlbWVudC5zdHlsZS50b3AgPSBudWxsO1xuICAgIGltZy5lbGVtZW50LmNsYXNzTGlzdC5hZGQoJ2t1dmFpZnktaW1nJyk7XG5cbiAgICBpZiAobGluay5nZXRBdHRyaWJ1dGUoJ2RhdGEta3V2YWlmeS1jYXB0aW9uJykpIHtcbiAgICAgIGltZy5jYXB0aW9uID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2Jyk7XG4gICAgICBpbWcuY2FwdGlvbi5pbm5lckhUTUwgPSAnPHA+JyArIGxpbmsuZ2V0QXR0cmlidXRlKCdkYXRhLWt1dmFpZnktY2FwdGlvbicpLnJlcGxhY2UoLzxbXj5dKz4vaWcsICcnKSArICc8L3A+JztcbiAgICAgIGltZy5jYXB0aW9uLmlkID0gJ2t1dmFpZnktY2FwdGlvbic7XG4gICAgICBpbWcuY2FwdGlvbi5zdHlsZS50cmFuc2l0aW9uID0gJ29wYWNpdHkgJyArIG9wdGlvbnMudHJhbnNpdGlvblNwZWVkICsgJ21zIGVhc2UsIHZpc2liaWxpdHkgJyArIG9wdGlvbnMudHJhbnNpdGlvblNwZWVkICsgJ21zIGVhc2UnO1xuICAgIH1cblxuICAgIGltYWdlcy5wdXNoKGltZyk7XG4gIH0sXG4gIGN1cnJlbnQ6IGZ1bmN0aW9uIGN1cnJlbnQoaW5kZXgpIHtcbiAgICB2YXIgaW1nID0gaW1hZ2VzW2luZGV4XTtcblxuICAgIGN1cnJlbnRJbmRleCA9IGltYWdlcy5pbmRleE9mKGltZyk7XG5cbiAgICBpZiAoaW1hZ2VzW2N1cnJlbnRJbmRleCArIDFdKSB7XG4gICAgICBuZXh0SW5kZXggPSBjdXJyZW50SW5kZXggKyAxO1xuICAgIH0gZWxzZSB7XG4gICAgICBuZXh0SW5kZXggPSBudWxsO1xuICAgIH1cbiAgICBpZiAoaW1hZ2VzW2N1cnJlbnRJbmRleCAtIDFdKSB7XG4gICAgICBwcmV2SW5kZXggPSBjdXJyZW50SW5kZXggLSAxO1xuICAgIH0gZWxzZSB7XG4gICAgICBwcmV2SW5kZXggPSBudWxsO1xuICAgIH1cbiAgfSxcbiAgaHJlZjogZnVuY3Rpb24gaHJlZigpIHtcbiAgICBpZiAoc2NyZWVuV2lkdGggPCBvcHRpb25zLnNtYWxsU2l6ZSkge1xuICAgICAgcmV0dXJuIGltYWdlc1tjdXJyZW50SW5kZXhdLnNtYWxsSHJlZjtcbiAgICB9XG4gICAgaWYgKHNjcmVlbldpZHRoIDwgb3B0aW9ucy5tZWRpdW1TaXplKSB7XG4gICAgICByZXR1cm4gaW1hZ2VzW2N1cnJlbnRJbmRleF0ubWVkaXVtSHJlZjtcbiAgICB9XG5cbiAgICByZXR1cm4gaW1hZ2VzW2N1cnJlbnRJbmRleF0uaHJlZjtcbiAgfSxcbiAgc2l6ZTogZnVuY3Rpb24gc2l6ZSgpIHtcbiAgICB2YXIgaW1nV2lkdGggPSBpbWFnZXNbY3VycmVudEluZGV4XS5lbGVtZW50LmNsaWVudFdpZHRoO1xuICAgIHZhciBpbWdIZWlnaHQgPSBpbWFnZXNbY3VycmVudEluZGV4XS5lbGVtZW50LmNsaWVudEhlaWdodDtcbiAgICB2YXIgd2hhdCA9IHVuZGVmaW5lZDtcblxuICAgIHNjcmVlbldpZHRoID0gYm9keS5jbGllbnRXaWR0aDtcbiAgICBzY3JlZW5IZWlnaHQgPSBib2R5LmNsaWVudEhlaWdodDtcblxuICAgIGlmIChpbWdXaWR0aCA8IHNjcmVlbldpZHRoICYmIGltZ0hlaWdodCA8IHNjcmVlbkhlaWdodCkge1xuICAgICAgaWYgKGltZ1dpZHRoID4gaW1nSGVpZ2h0KSB7XG4gICAgICAgIHdoYXQgPSAnY292ZXItdmVydGljYWxseSc7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICB3aGF0ID0gJ2NvdmVyLWhvcml6b250YWxseSc7XG4gICAgICB9XG4gICAgfSBlbHNlIHtcbiAgICAgIGlmIChpbWdXaWR0aCA8IHNjcmVlbldpZHRoKSB7XG4gICAgICAgIHdoYXQgPSAnY292ZXItaG9yaXpvbnRhbGx5JztcbiAgICAgIH1cbiAgICAgIGlmIChpbWdIZWlnaHQgPCBzY3JlZW5IZWlnaHQpIHtcbiAgICAgICAgd2hhdCA9ICdjb3Zlci12ZXJ0aWNhbGx5JztcbiAgICAgIH1cbiAgICB9XG5cbiAgICBpbWFnZXNbY3VycmVudEluZGV4XS5lbGVtZW50LmNsYXNzTGlzdC5hZGQod2hhdCk7XG4gIH0sXG4gIHZpc2liaWxpdHk6IGZ1bmN0aW9uIHZpc2liaWxpdHkod2hhdCkge1xuICAgIGlmICh3aGF0ID09PSAnc2hvdycpIHtcbiAgICAgIGltYWdlc1tjdXJyZW50SW5kZXhdLmVsZW1lbnQuY2xhc3NMaXN0LmFkZCgndmlzaWJsZScpO1xuXG4gICAgICBpZiAob3B0aW9ucy50cmFuc2l0aW9uU2NhbGUgPiAwKSB7XG4gICAgICAgIGltZy50cmFuc2Zvcm0oe1xuICAgICAgICAgIHNjYWxlVmFsdWU6IGltYWdlc1tjdXJyZW50SW5kZXhdLnNjYWxlIC0gb3B0aW9ucy50cmFuc2l0aW9uU2NhbGVcbiAgICAgICAgfSk7XG4gICAgICB9XG5cbiAgICAgIGlmIChpbWFnZXNbY3VycmVudEluZGV4XS5jYXB0aW9uKSB7XG4gICAgICAgIGltYWdlc1tjdXJyZW50SW5kZXhdLmNhcHRpb24uY2xhc3NMaXN0LmFkZCgndmlzaWJsZScpO1xuICAgICAgfVxuICAgIH1cbiAgICBpZiAod2hhdCA9PT0gJ2hpZGUnKSB7XG4gICAgICBpbWFnZXNbY3VycmVudEluZGV4XS5lbGVtZW50LmNsYXNzTGlzdC5yZW1vdmUoJ3Zpc2libGUnKTtcblxuICAgICAgaWYgKGltYWdlc1tjdXJyZW50SW5kZXhdLmNhcHRpb24pIHtcbiAgICAgICAgaW1hZ2VzW2N1cnJlbnRJbmRleF0uY2FwdGlvbi5jbGFzc0xpc3QucmVtb3ZlKCd2aXNpYmxlJyk7XG4gICAgICB9XG4gICAgfVxuICAgIGlmICh3aGF0ID09PSAnbWVhc3VyZScpIHtcbiAgICAgIGltYWdlc1tjdXJyZW50SW5kZXhdLmVsZW1lbnQuY2xhc3NMaXN0LmFkZCgnbWVhc3VyZScpO1xuICAgIH1cbiAgICBpZiAod2hhdCA9PT0gJ21lYXN1cmVkJykge1xuICAgICAgaW1hZ2VzW2N1cnJlbnRJbmRleF0uZWxlbWVudC5jbGFzc0xpc3QucmVtb3ZlKCdtZWFzdXJlJyk7XG4gICAgfVxuICB9LFxuICBzaG93OiBmdW5jdGlvbiBzaG93KCkge1xuICAgIGltZy52aXNpYmlsaXR5KCdtZWFzdXJlJyk7XG5cbiAgICBpZiAob3B0aW9ucy50cmFuc2l0aW9uU2NhbGUgPiAwKSB7XG4gICAgICBpbWcudHJhbnNmb3JtKHtcbiAgICAgICAgc2NhbGVWYWx1ZTogaW1hZ2VzW2N1cnJlbnRJbmRleF0uc2NhbGUgKyBvcHRpb25zLnRyYW5zaXRpb25TY2FsZVxuICAgICAgfSk7XG4gICAgfVxuICAgIGlmIChvcHRpb25zLmNvdmVyU2NyZWVuKSB7XG4gICAgICBpbWcuc2l6ZSgpO1xuICAgIH1cblxuICAgIHNldFRpbWVvdXQoZnVuY3Rpb24gKCkge1xuICAgICAgaW1nLnZpc2liaWxpdHkoJ3Nob3cnKTtcblxuICAgICAgc2V0VGltZW91dChmdW5jdGlvbiAoKSB7XG4gICAgICAgIGltZy52aXNpYmlsaXR5KCdtZWFzdXJlZCcpO1xuICAgICAgfSwgMTAwKTtcbiAgICB9LCBvcHRpb25zLnRyYW5zaXRpb25TcGVlZCAvIDQpO1xuICB9LFxuICBwcmVwYXJlOiBmdW5jdGlvbiBwcmVwYXJlKGluZGV4KSB7XG4gICAgbmF2aWdhdGlvbi5yZW1vdmVFdmVudExpc3RlbmVycygpO1xuXG4gICAgaW1nLnZpc2liaWxpdHkoJ2hpZGUnKTtcblxuICAgIGltZy5jdXJyZW50KGluZGV4KTtcblxuICAgIG5hdmlnYXRpb24udmlzaWJpbGl0eSgnZGVwZW5kcycpO1xuXG4gICAgaW1nLmFkZEV2ZW50TGlzdGVuZXJzKCk7XG5cbiAgICBpZiAoIWltYWdlc1tjdXJyZW50SW5kZXhdLmVsZW1lbnQuc3JjKSB7XG4gICAgICA7KGZ1bmN0aW9uIChpbmRleCkge1xuICAgICAgICB2YXIgdGhpc0luZGV4ID0gaW5kZXg7XG5cbiAgICAgICAgc3Bpbm5lci52aXNpYmlsaXR5KCdzaG93Jyk7XG5cbiAgICAgICAgb3ZlcmxheS5lbGVtZW50LmFwcGVuZENoaWxkKGltYWdlc1t0aGlzSW5kZXhdLmVsZW1lbnQpO1xuXG4gICAgICAgIGlmIChpbWFnZXNbdGhpc0luZGV4XS5jYXB0aW9uKSB7XG4gICAgICAgICAgb3ZlcmxheS5lbGVtZW50LmFwcGVuZENoaWxkKGltYWdlc1t0aGlzSW5kZXhdLmNhcHRpb24pO1xuICAgICAgICB9XG5cbiAgICAgICAgaW1hZ2VzW3RoaXNJbmRleF0uZWxlbWVudC5zcmMgPSBpbWcuaHJlZigpO1xuXG4gICAgICAgIGltYWdlc1t0aGlzSW5kZXhdLmVsZW1lbnQuYWRkRXZlbnRMaXN0ZW5lcignbG9hZCcsIGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICBpbWFnZXNbdGhpc0luZGV4XS5sb2FkZWQgPSB0cnVlO1xuXG4gICAgICAgICAgc3Bpbm5lci52aXNpYmlsaXR5KCdoaWRlJyk7XG5cbiAgICAgICAgICBpZiAodGhpc0luZGV4ID09PSBjdXJyZW50SW5kZXggJiYgIWNsb3NlZCkge1xuICAgICAgICAgICAgaW1nLnNob3coKTtcbiAgICAgICAgICB9XG4gICAgICAgIH0pO1xuICAgICAgfSkoY3VycmVudEluZGV4KTtcbiAgICB9IGVsc2Uge1xuICAgICAgaWYgKGltYWdlc1tjdXJyZW50SW5kZXhdLmxvYWRlZCkge1xuICAgICAgICBzcGlubmVyLnZpc2liaWxpdHkoJ2hpZGUnKTtcblxuICAgICAgICBpbWcuc2hvdygpO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgc3Bpbm5lci52aXNpYmlsaXR5KCdzaG93Jyk7XG4gICAgICB9XG4gICAgfVxuICAgIHNldFRpbWVvdXQoZnVuY3Rpb24gKCkge1xuICAgICAgbmF2aWdhdGlvbi5hZGRFdmVudExpc3RlbmVycygpO1xuICAgIH0sIG9wdGlvbnMudHJhbnNpdGlvblNwZWVkIC8gMik7XG4gIH0sXG4gIHRyYW5zZm9ybTogZnVuY3Rpb24gdHJhbnNmb3JtKF9yZWYpIHtcbiAgICB2YXIgX3JlZiRzY2FsZVZhbHVlID0gX3JlZi5zY2FsZVZhbHVlO1xuICAgIHZhciBzY2FsZVZhbHVlID0gX3JlZiRzY2FsZVZhbHVlID09PSB1bmRlZmluZWQgPyBpbWFnZXNbY3VycmVudEluZGV4XS5zY2FsZSA6IF9yZWYkc2NhbGVWYWx1ZTtcbiAgICB2YXIgX3JlZiRyb3RhdGVWYWx1ZSA9IF9yZWYucm90YXRlVmFsdWU7XG4gICAgdmFyIHJvdGF0ZVZhbHVlID0gX3JlZiRyb3RhdGVWYWx1ZSA9PT0gdW5kZWZpbmVkID8gaW1hZ2VzW2N1cnJlbnRJbmRleF0ucm90YXRlIDogX3JlZiRyb3RhdGVWYWx1ZTtcblxuICAgIHJvdGF0ZS5yZW1vdmVFdmVudExpc3RlbmVycygpO1xuXG4gICAgdmFyIHRyYW5zZm9ybVN0cmluZyA9IHVuZGVmaW5lZDtcblxuICAgIGlmIChhcmd1bWVudHMucm90YXRlVmFsdWUgPT09IDApIHtcbiAgICAgIHJvdGF0ZVZhbHVlID0gMDtcbiAgICB9XG5cbiAgICB0cmFuc2Zvcm1TdHJpbmcgPSAndHJhbnNsYXRlKC01MCUsIC01MCUpIHNjYWxlKCcgKyBzY2FsZVZhbHVlICsgJykgcm90YXRlKCcgKyByb3RhdGVWYWx1ZSArICdkZWcpJztcblxuICAgIGltYWdlc1tjdXJyZW50SW5kZXhdLnNjYWxlID0gc2NhbGVWYWx1ZTtcbiAgICBpbWFnZXNbY3VycmVudEluZGV4XS5yb3RhdGUgPSByb3RhdGVWYWx1ZTtcbiAgICBpbWFnZXNbY3VycmVudEluZGV4XS5lbGVtZW50LnN0eWxlLndlYmtpdFRyYW5zZm9ybSA9IHRyYW5zZm9ybVN0cmluZztcbiAgICBpbWFnZXNbY3VycmVudEluZGV4XS5lbGVtZW50LnN0eWxlLm1zVHJhbnNmb3JtID0gdHJhbnNmb3JtU3RyaW5nO1xuICAgIGltYWdlc1tjdXJyZW50SW5kZXhdLmVsZW1lbnQuc3R5bGUudHJhbnNmb3JtID0gdHJhbnNmb3JtU3RyaW5nO1xuXG4gICAgc2V0VGltZW91dChmdW5jdGlvbiAoKSB7XG4gICAgICByb3RhdGUuYWRkRXZlbnRMaXN0ZW5lcnMoKTtcbiAgICB9LCBvcHRpb25zLnRyYW5zaXRpb25TcGVlZCAvIDIpO1xuICB9LFxuICByZXNldDogZnVuY3Rpb24gcmVzZXQoKSB7XG4gICAgaW1hZ2VzW2N1cnJlbnRJbmRleF0uZWxlbWVudC5zdHlsZS50cmFuc2l0aW9uID0gaW1hZ2VzW2N1cnJlbnRJbmRleF0udHJhbnNpdGlvbiArICcsIGxlZnQgJyArIG9wdGlvbnMudHJhbnNpdGlvblNwZWVkICsgJ21zIGVhc2UsIHRvcCAnICsgb3B0aW9ucy50cmFuc2l0aW9uU3BlZWQgKyAnbXMgZWFzZSc7XG4gICAgaW1hZ2VzW2N1cnJlbnRJbmRleF0uZWxlbWVudC5zdHlsZS5sZWZ0ID0gbnVsbDtcbiAgICBpbWFnZXNbY3VycmVudEluZGV4XS5lbGVtZW50LnN0eWxlLnRvcCA9IG51bGw7XG5cbiAgICBzZXRUaW1lb3V0KGZ1bmN0aW9uICgpIHtcbiAgICAgIGltYWdlc1tjdXJyZW50SW5kZXhdLmVsZW1lbnQuc3R5bGUudHJhbnNpdGlvbiA9IGltYWdlc1tjdXJyZW50SW5kZXhdLnRyYW5zaXRpb247XG4gICAgfSwgb3B0aW9ucy50cmFuc2l0aW9uU3BlZWQpO1xuXG4gICAgaW1nLnRyYW5zZm9ybSh7XG4gICAgICBzY2FsZVZhbHVlOiAxLFxuICAgICAgcm90YXRlVmFsdWU6IDBcbiAgICB9KTtcbiAgfSxcbiAgY2xpY2s6IGZ1bmN0aW9uIGNsaWNrKGV2ZW50KSB7XG4gICAgbWVudS5kaXYuY2xhc3NMaXN0LnJlbW92ZSgndmlzaWJsZScpO1xuXG4gICAgZXZlbnQucHJldmVudERlZmF1bHQoKTtcbiAgfSxcbiAgd2hlZWw6IGZ1bmN0aW9uIHdoZWVsKGV2ZW50KSB7XG4gICAgaWYgKGV2ZW50LndoZWVsRGVsdGEgPT09IDEyMCkge1xuICAgICAgaW1hZ2VzW2N1cnJlbnRJbmRleF0uc2NhbGUgKz0gaW1hZ2VzW2N1cnJlbnRJbmRleF0uc2NhbGVSYXRpbztcbiAgICB9IGVsc2Uge1xuICAgICAgaWYgKGltYWdlc1tjdXJyZW50SW5kZXhdLnNjYWxlID49IDAuNCkge1xuICAgICAgICBpbWFnZXNbY3VycmVudEluZGV4XS5zY2FsZSAtPSBpbWFnZXNbY3VycmVudEluZGV4XS5zY2FsZVJhdGlvO1xuICAgICAgfVxuICAgIH1cblxuICAgIGltZy50cmFuc2Zvcm0oe1xuICAgICAgc2NhbGVWYWx1ZTogaW1hZ2VzW2N1cnJlbnRJbmRleF0uc2NhbGVcbiAgICB9KTtcblxuICAgIGV2ZW50LnByZXZlbnREZWZhdWx0KCk7XG4gIH0sXG4gIG1vdXNlZG93bjogZnVuY3Rpb24gbW91c2Vkb3duKGV2ZW50KSB7XG4gICAgaW1hZ2VzW2N1cnJlbnRJbmRleF0ub2ZmeCA9IGV2ZW50LmNsaWVudFggLSBpbWFnZXNbY3VycmVudEluZGV4XS5lbGVtZW50Lm9mZnNldExlZnQ7XG4gICAgaW1hZ2VzW2N1cnJlbnRJbmRleF0ub2ZmeSA9IGV2ZW50LmNsaWVudFkgLSBpbWFnZXNbY3VycmVudEluZGV4XS5lbGVtZW50Lm9mZnNldFRvcDtcblxuICAgIHdpbmRvdy5hZGRFdmVudExpc3RlbmVyKCdtb3VzZW1vdmUnLCBpbWcubW91c2Vtb3ZlKTtcblxuICAgIGV2ZW50LnByZXZlbnREZWZhdWx0KCk7XG4gIH0sXG4gIG1vdXNlbW92ZTogZnVuY3Rpb24gbW91c2Vtb3ZlKGV2ZW50KSB7XG4gICAgdmFyIG1vdmUgPSBmdW5jdGlvbiBtb3ZlKCkge1xuICAgICAgaW1hZ2VzW2N1cnJlbnRJbmRleF0uZWxlbWVudC5zdHlsZS5sZWZ0ID0gZXZlbnQuY2xpZW50WCAtIGltYWdlc1tjdXJyZW50SW5kZXhdLm9mZnggKyAncHgnO1xuICAgICAgaW1hZ2VzW2N1cnJlbnRJbmRleF0uZWxlbWVudC5zdHlsZS50b3AgPSBldmVudC5jbGllbnRZIC0gaW1hZ2VzW2N1cnJlbnRJbmRleF0ub2ZmeSArICdweCc7XG4gICAgfTtcblxuICAgIHdpbmRvdy5yZXF1ZXN0QW5pbWF0aW9uRnJhbWUobW92ZSk7XG4gIH0sXG4gIG1vdXNldXA6IGZ1bmN0aW9uIG1vdXNldXAoZXZlbnQpIHtcbiAgICB3aW5kb3cucmVtb3ZlRXZlbnRMaXN0ZW5lcignbW91c2Vtb3ZlJywgaW1nLm1vdXNlbW92ZSk7XG4gIH0sXG4gIGFkZEV2ZW50TGlzdGVuZXJzOiBmdW5jdGlvbiBhZGRFdmVudExpc3RlbmVycygpIHtcbiAgICBpbWFnZXNbY3VycmVudEluZGV4XS5lbGVtZW50LmFkZEV2ZW50TGlzdGVuZXIoJ21vdXNlZG93bicsIGltZy5tb3VzZWRvd24pO1xuICAgIGltYWdlc1tjdXJyZW50SW5kZXhdLmVsZW1lbnQuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCBpbWcuY2xpY2spO1xuXG4gICAgd2luZG93LmFkZEV2ZW50TGlzdGVuZXIoJ3doZWVsJywgaW1nLndoZWVsKTtcbiAgICB3aW5kb3cuYWRkRXZlbnRMaXN0ZW5lcignbW91c2V1cCcsIGltZy5tb3VzZXVwKTtcblxuICAgIGlmIChvcHRpb25zLmNvdmVyU2NyZWVuKSB7XG4gICAgICB3aW5kb3cuYWRkRXZlbnRMaXN0ZW5lcigncmVzaXplJywgaW1nLnNpemUpO1xuICAgIH1cbiAgfSxcbiAgcmVtb3ZlRXZlbnRMaXN0ZW5lcnM6IGZ1bmN0aW9uIHJlbW92ZUV2ZW50TGlzdGVuZXJzKCkge1xuICAgIGltYWdlc1tjdXJyZW50SW5kZXhdLmVsZW1lbnQucmVtb3ZlRXZlbnRMaXN0ZW5lcignbW91c2Vkb3duJywgaW1nLm1vdXNlZG93bik7XG4gICAgaW1hZ2VzW2N1cnJlbnRJbmRleF0uZWxlbWVudC5yZW1vdmVFdmVudExpc3RlbmVyKCdjbGljaycsIGltZy5jbGljayk7XG5cbiAgICB3aW5kb3cucmVtb3ZlRXZlbnRMaXN0ZW5lcignd2hlZWwnLCBpbWcud2hlZWwpO1xuICAgIHdpbmRvdy5yZW1vdmVFdmVudExpc3RlbmVyKCdtb3VzZXVwJywgaW1nLm1vdXNldXApO1xuXG4gICAgaWYgKG9wdGlvbnMuY292ZXJTY3JlZW4pIHtcbiAgICAgIHdpbmRvdy5yZW1vdmVFdmVudExpc3RlbmVyKCdyZXNpemUnLCBpbWcuc2l6ZSk7XG4gICAgfVxuICB9XG59O1xuXG52YXIgX2Nsb3NlID0ge1xuICBlbGVtZW50OiBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdhJyksXG5cbiAgYXBwZW5kOiBmdW5jdGlvbiBhcHBlbmQoKSB7XG4gICAgX2Nsb3NlLmVsZW1lbnQuaWQgPSAna3V2YWlmeS1jbG9zZS1idXR0b24nLCBfY2xvc2UuZWxlbWVudC5pbm5lckhUTUwgPSAnPHN2ZyB4bWxucz1cImh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnXCIgd2lkdGg9XCI1MFwiIGhlaWdodD1cIjUwXCIgdmlld0JveD1cIjAgMCA1MC4wMDAwMDEgNTAuMDAwMDAxXCI+PGcgc3Ryb2tlPVwiI2ZmZlwiIGZpbGw9XCJub25lXCIgc3Ryb2tlLXdpZHRoPVwiMlwiPjxwYXRoIGQ9XCJNMTAgNDBsMzAtMzBNNDAgNDBMMTAgMTBcIi8+PC9nPjwvc3ZnPic7XG5cbiAgICBvdmVybGF5LmVsZW1lbnQuYXBwZW5kQ2hpbGQoX2Nsb3NlLmVsZW1lbnQpO1xuICB9LFxuICB2aXNpYmlsaXR5OiBmdW5jdGlvbiB2aXNpYmlsaXR5KHdoYXQpIHtcbiAgICBpZiAod2hhdCA9PT0gJ3Nob3cnKSB7XG4gICAgICBfY2xvc2UuZWxlbWVudC5jbGFzc0xpc3QuYWRkKCd2aXNpYmxlJyk7XG4gICAgfVxuICAgIGlmICh3aGF0ID09PSAnaGlkZScpIHtcbiAgICAgIF9jbG9zZS5lbGVtZW50LmNsYXNzTGlzdC5yZW1vdmUoJ3Zpc2libGUnKTtcbiAgICB9XG4gIH0sXG4gIGNsb3NlOiBmdW5jdGlvbiBjbG9zZSgpIHtcbiAgICBjbG9zZWQgPSB0cnVlO1xuXG4gICAgb3ZlcmxheS52aXNpYmlsaXR5KCdoaWRlJyk7XG4gICAgY2xvc2VEaXYudmlzaWJpbGl0eSgnaGlkZScpO1xuICAgIGltZy52aXNpYmlsaXR5KCdoaWRlJyk7XG4gICAgX2Nsb3NlLnZpc2liaWxpdHkoJ2hpZGUnKTtcbiAgICBtZW51LnZpc2liaWxpdHkoJ2hpZGUnKTtcbiAgICBuYXZpZ2F0aW9uLnZpc2liaWxpdHkoJ2hpZGUnKTtcbiAgICBzcGlubmVyLnZpc2liaWxpdHkoJ2hpZGUnKTtcblxuICAgIG92ZXJsYXkucmVtb3ZlRXZlbnRMaXN0ZW5lcnMoKTtcbiAgICBjbG9zZURpdi5yZW1vdmVFdmVudExpc3RlbmVycygpO1xuICAgIGltZy5yZW1vdmVFdmVudExpc3RlbmVycygpO1xuICAgIG1lbnUucmVtb3ZlRXZlbnRMaXN0ZW5lcnMoKTtcbiAgICByZXNldC5yZW1vdmVFdmVudExpc3RlbmVycygpO1xuICAgIHpvb20ucmVtb3ZlRXZlbnRMaXN0ZW5lcnMoKTtcbiAgICByb3RhdGUucmVtb3ZlRXZlbnRMaXN0ZW5lcnMoKTtcbiAgICBuYXZpZ2F0aW9uLnJlbW92ZUV2ZW50TGlzdGVuZXJzKCk7XG4gIH0sXG4gIGNsb3NlRXZlbnQ6IGZ1bmN0aW9uIGNsb3NlRXZlbnQoZXZlbnQpIHtcbiAgICBfY2xvc2UuY2xvc2UoKTtcblxuICAgIGV2ZW50LnByZXZlbnREZWZhdWx0KCk7XG4gIH0sXG4gIGtleWRvd246IGZ1bmN0aW9uIGtleWRvd24oZXZlbnQpIHtcbiAgICBpZiAoZXZlbnQua2V5Q29kZSA9PT0gMjcpIHtcbiAgICAgIF9jbG9zZS5jbG9zZUV2ZW50KGV2ZW50KTtcbiAgICB9XG4gIH0sXG4gIGFkZEV2ZW50TGlzdGVuZXJzOiBmdW5jdGlvbiBhZGRFdmVudExpc3RlbmVycygpIHtcbiAgICBfY2xvc2UuZWxlbWVudC5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIF9jbG9zZS5jbG9zZUV2ZW50KTtcblxuICAgIHdpbmRvdy5hZGRFdmVudExpc3RlbmVyKCdrZXlkb3duJywgX2Nsb3NlLmtleWRvd24pO1xuICB9LFxuICByZW1vdmVFdmVudExpc3RlbmVyczogZnVuY3Rpb24gcmVtb3ZlRXZlbnRMaXN0ZW5lcnMoKSB7XG4gICAgX2Nsb3NlLmVsZW1lbnQucmVtb3ZlRXZlbnRMaXN0ZW5lcignY2xpY2snLCBfY2xvc2UuY2xvc2VFdmVudCk7XG5cbiAgICB3aW5kb3cucmVtb3ZlRXZlbnRMaXN0ZW5lcigna2V5ZG93bicsIF9jbG9zZS5rZXlkb3duKTtcbiAgfVxufTtcblxudmFyIG1lbnUgPSB7XG4gIGJ1dHRvbjogZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnYScpLFxuICBkaXY6IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpLFxuICBoZWxwOiBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdwJyksXG5cbiAgYXBwZW5kOiBmdW5jdGlvbiBhcHBlbmQoKSB7XG4gICAgbWVudS5idXR0b24uaWQgPSAna3V2YWlmeS1tZW51LWJ1dHRvbic7XG4gICAgbWVudS5idXR0b24uaW5uZXJIVE1MID0gJzxzdmcgeG1sbnM9XCJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2Z1wiIHdpZHRoPVwiNTBcIiBoZWlnaHQ9XCI1MFwiIHZpZXdCb3g9XCIwIDAgNTAuMDAwMDAxIDUwLjAwMDAwMVwiPjxnIHN0cm9rZT1cIiNmZmZcIiBmaWxsPVwibm9uZVwiIHN0cm9rZS13aWR0aD1cIjJcIj48cGF0aCBkPVwiTTEwIDExaDMwTTEwIDI1aDMwTTEwIDM5aDMwXCIvPjwvZz48L3N2Zz4nO1xuICAgIG1lbnUuZGl2LmlkID0gJ2t1dmFpZnktbWVudS1kaXYnO1xuICAgIG1lbnUuaGVscC5pZCA9ICdrdXZhaWZ5LWhlbHAnO1xuICAgIG1lbnUuaGVscC5pbm5lckhUTUwgPSAnRGVza3RvcCB1c2VycyBjYW4gdXNlIHRoZSA8c3Ryb25nPmxlZnQ8L3N0cm9uZz4gYW5kIDxzdHJvbmc+cmlnaHQ8L3N0cm9uZz4ga2V5cyB0byBuYXZpZ2F0ZTsgPHN0cm9uZz51cDwvc3Ryb25nPiBhbmQgPHN0cm9uZz5kb3duPC9zdHJvbmc+IG9yIDxzdHJvbmc+c2Nyb2xsPC9zdHJvbmc+IHRvIHpvb207IDxzdHJvbmc+cGFnZSB1cDwvc3Ryb25nPiBhbmQgPHN0cm9uZz5wYWdlIGRvd248L3N0cm9uZz4gdG8gcm90YXRlOyA8c3Ryb25nPmNsaWNrPC9zdHJvbmc+IGFuZCA8c3Ryb25nPmRyYWc8L3N0cm9uZz4gdG8gbW92ZTsgPHN0cm9uZz5ob21lPC9zdHJvbmc+IHRvIHJlc2V0OyBhbmQgPHN0cm9uZz5lc2M8L3N0cm9uZz4gdG8gY2xvc2UuJztcblxuICAgIHJvdGF0ZS5hcHBlbmQoKTtcbiAgICB6b29tLmFwcGVuZCgpO1xuICAgIHJlc2V0LmFwcGVuZCgpO1xuXG4gICAgaWYgKG9wdGlvbnMuc2hvd1Nob3J0Y3V0cyAmJiBzY3JlZW5XaWR0aCA+IDEyODApIHtcbiAgICAgIG1lbnUuZGl2LmFwcGVuZENoaWxkKG1lbnUuaGVscCk7XG4gICAgfVxuXG4gICAgb3ZlcmxheS5lbGVtZW50LmFwcGVuZENoaWxkKG1lbnUuYnV0dG9uKTtcbiAgICBvdmVybGF5LmVsZW1lbnQuYXBwZW5kQ2hpbGQobWVudS5kaXYpO1xuICB9LFxuICB2aXNpYmlsaXR5OiBmdW5jdGlvbiB2aXNpYmlsaXR5KHdoYXQpIHtcbiAgICBpZiAod2hhdCA9PT0gJ3Nob3cnKSB7XG4gICAgICBtZW51LmJ1dHRvbi5jbGFzc0xpc3QuYWRkKCd2aXNpYmxlJyk7XG4gICAgfVxuICAgIGlmICh3aGF0ID09PSAnaGlkZScpIHtcbiAgICAgIG1lbnUuYnV0dG9uLmNsYXNzTGlzdC5yZW1vdmUoJ3Zpc2libGUnKTtcbiAgICAgIG1lbnUuZGl2LmNsYXNzTGlzdC5yZW1vdmUoJ3Zpc2libGUnKTtcbiAgICB9XG4gIH0sXG4gIGNsaWNrOiBmdW5jdGlvbiBjbGljayhldmVudCkge1xuICAgIGlmICghbWVudS5kaXYuY2xhc3NMaXN0LmNvbnRhaW5zKCd2aXNpYmxlJykpIHtcbiAgICAgIG1lbnUuZGl2LmNsYXNzTGlzdC5hZGQoJ3Zpc2libGUnKTtcbiAgICB9IGVsc2Uge1xuICAgICAgbWVudS5kaXYuY2xhc3NMaXN0LnJlbW92ZSgndmlzaWJsZScpO1xuICAgIH1cblxuICAgIGV2ZW50LnByZXZlbnREZWZhdWx0KCk7XG4gIH0sXG4gIGRpdkNsaWNrOiBmdW5jdGlvbiBkaXZDbGljayhldmVudCkge1xuICAgIG1lbnUuZGl2LmNsYXNzTGlzdC5yZW1vdmUoJ3Zpc2libGUnKTtcblxuICAgIGV2ZW50LnByZXZlbnREZWZhdWx0KCk7XG4gIH0sXG4gIGFkZEV2ZW50TGlzdGVuZXJzOiBmdW5jdGlvbiBhZGRFdmVudExpc3RlbmVycygpIHtcbiAgICBtZW51LmJ1dHRvbi5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIG1lbnUuY2xpY2spO1xuXG4gICAgcm90YXRlLmFkZEV2ZW50TGlzdGVuZXJzKCk7XG4gICAgem9vbS5hZGRFdmVudExpc3RlbmVycygpO1xuICAgIHJlc2V0LmFkZEV2ZW50TGlzdGVuZXJzKCk7XG4gIH0sXG4gIHJlbW92ZUV2ZW50TGlzdGVuZXJzOiBmdW5jdGlvbiByZW1vdmVFdmVudExpc3RlbmVycygpIHtcbiAgICBtZW51LmJ1dHRvbi5yZW1vdmVFdmVudExpc3RlbmVyKCdjbGljaycsIG1lbnUuY2xpY2spO1xuXG4gICAgcm90YXRlLnJlbW92ZUV2ZW50TGlzdGVuZXJzKCk7XG4gICAgem9vbS5yZW1vdmVFdmVudExpc3RlbmVycygpO1xuICAgIHJlc2V0LnJlbW92ZUV2ZW50TGlzdGVuZXJzKCk7XG4gIH1cbn07XG5cbnZhciByZXNldCA9IHtcbiAgZWxlbWVudDogZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnYScpLFxuXG4gIGFwcGVuZDogZnVuY3Rpb24gYXBwZW5kKCkge1xuICAgIHJlc2V0LmVsZW1lbnQuaWQgPSAna3V2YWlmeS1yZXNldC1idXR0b24nLCByZXNldC5lbGVtZW50LmlubmVySFRNTCA9ICc8c3ZnIHhtbG5zPVwiaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmdcIiB3aWR0aD1cIjUwXCIgaGVpZ2h0PVwiNTBcIiB2aWV3Qm94PVwiMCAwIDUwLjAwMDAwMSA1MC4wMDAwMDFcIj48ZyBzdHJva2U9XCIjZmZmXCIgZmlsbD1cIm5vbmVcIiBzdHJva2Utd2lkdGg9XCIyXCI+PHBhdGggZD1cIk0yMS42MiAyOC4zOEwxMC4zMSAzOS42OU0xMiAyOGgxMHYxMFwiLz48Zz48cGF0aCBkPVwiTTI4LjM4IDIxLjYyTDM5LjY5IDEwLjMxTTM4IDIySDI4VjEyXCIvPjwvZz48L2c+PC9zdmc+JztcblxuICAgIG1lbnUuZGl2LmFwcGVuZENoaWxkKHJlc2V0LmVsZW1lbnQpO1xuICB9LFxuICByZXNldDogZnVuY3Rpb24gcmVzZXQoZXZlbnQpIHtcbiAgICBpbWcucmVzZXQoKTtcblxuICAgIGV2ZW50LnByZXZlbnREZWZhdWx0KCk7XG4gIH0sXG4gIGtleWRvd246IGZ1bmN0aW9uIGtleWRvd24oZXZlbnQpIHtcbiAgICBpZiAoZXZlbnQua2V5Q29kZSA9PT0gMzYpIHtcbiAgICAgIHJlc2V0LnJlc2V0KGV2ZW50KTtcbiAgICB9XG4gIH0sXG4gIGFkZEV2ZW50TGlzdGVuZXJzOiBmdW5jdGlvbiBhZGRFdmVudExpc3RlbmVycygpIHtcbiAgICByZXNldC5lbGVtZW50LmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgcmVzZXQucmVzZXQpO1xuXG4gICAgd2luZG93LmFkZEV2ZW50TGlzdGVuZXIoJ2tleWRvd24nLCByZXNldC5rZXlkb3duKTtcbiAgfSxcbiAgcmVtb3ZlRXZlbnRMaXN0ZW5lcnM6IGZ1bmN0aW9uIHJlbW92ZUV2ZW50TGlzdGVuZXJzKCkge1xuICAgIHJlc2V0LmVsZW1lbnQucmVtb3ZlRXZlbnRMaXN0ZW5lcignY2xpY2snLCByZXNldC5yZXNldCk7XG5cbiAgICB3aW5kb3cucmVtb3ZlRXZlbnRMaXN0ZW5lcigna2V5ZG93bicsIHJlc2V0LmtleWRvd24pO1xuICB9XG59O1xuXG52YXIgem9vbSA9IHtcbiAgX291dDogZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnYScpLFxuICBfaW46IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2EnKSxcblxuICBhcHBlbmQ6IGZ1bmN0aW9uIGFwcGVuZCgpIHtcbiAgICB6b29tLl9vdXQuaWQgPSAna3V2YWlmeS16b29tLW91dC1idXR0b24nLCB6b29tLl9vdXQuaW5uZXJIVE1MID0gJzxzdmcgeG1sbnM9XCJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2Z1wiIHdpZHRoPVwiNTBcIiBoZWlnaHQ9XCI1MFwiIHZpZXdCb3g9XCIwIDAgNTAuMDAwMDAxIDUwLjAwMDAwMVwiPjxwYXRoIGQ9XCJNNDAgMjVIMTBcIiBmaWxsPVwibm9uZVwiIHN0cm9rZT1cIiNmZmZcIiBzdHJva2Utd2lkdGg9XCIyXCIvPjwvc3ZnPic7XG4gICAgem9vbS5faW4uaWQgPSAna3V2YWlmeS16b29tLWluLWJ1dHRvbicsIHpvb20uX2luLmlubmVySFRNTCA9ICc8c3ZnIHhtbG5zPVwiaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmdcIiB3aWR0aD1cIjUwXCIgaGVpZ2h0PVwiNTBcIiB2aWV3Qm94PVwiMCAwIDUwLjAwMDAwMSA1MC4wMDAwMDFcIj48ZyBmaWxsPVwibm9uZVwiIHN0cm9rZT1cIiNmZmZcIiBzdHJva2Utd2lkdGg9XCIyXCI+PHBhdGggZD1cIk0yNSA0MFYxME00MCAyNUgxMFwiLz48L2c+PC9zdmc+JztcblxuICAgIG1lbnUuZGl2LmFwcGVuZENoaWxkKHpvb20uX291dCk7XG4gICAgbWVudS5kaXYuYXBwZW5kQ2hpbGQoem9vbS5faW4pO1xuICB9LFxuICB6b29tT3V0OiBmdW5jdGlvbiB6b29tT3V0KGV2ZW50KSB7XG4gICAgaWYgKGltYWdlc1tjdXJyZW50SW5kZXhdLnNjYWxlID49IDAuNCkge1xuICAgICAgaW1hZ2VzW2N1cnJlbnRJbmRleF0uc2NhbGUgLT0gaW1hZ2VzW2N1cnJlbnRJbmRleF0uc2NhbGVSYXRpbztcbiAgICB9XG5cbiAgICBpbWcudHJhbnNmb3JtKHtcbiAgICAgIHNjYWxlVmFsdWU6IGltYWdlc1tjdXJyZW50SW5kZXhdLnNjYWxlXG4gICAgfSk7XG5cbiAgICBldmVudC5wcmV2ZW50RGVmYXVsdCgpO1xuICB9LFxuICB6b29tSW46IGZ1bmN0aW9uIHpvb21JbihldmVudCkge1xuICAgIGltYWdlc1tjdXJyZW50SW5kZXhdLnNjYWxlICs9IGltYWdlc1tjdXJyZW50SW5kZXhdLnNjYWxlUmF0aW87XG5cbiAgICBpbWcudHJhbnNmb3JtKHtcbiAgICAgIHNjYWxlVmFsdWU6IGltYWdlc1tjdXJyZW50SW5kZXhdLnNjYWxlXG4gICAgfSk7XG5cbiAgICBldmVudC5wcmV2ZW50RGVmYXVsdCgpO1xuICB9LFxuICBrZXlkb3duOiBmdW5jdGlvbiBrZXlkb3duKGV2ZW50KSB7XG4gICAgaWYgKGV2ZW50LmtleUNvZGUgPT09IDM4KSB7XG4gICAgICB6b29tLnpvb21JbihldmVudCk7XG4gICAgfVxuICAgIGlmIChldmVudC5rZXlDb2RlID09PSA0MCkge1xuICAgICAgem9vbS56b29tT3V0KGV2ZW50KTtcbiAgICB9XG4gIH0sXG4gIGFkZEV2ZW50TGlzdGVuZXJzOiBmdW5jdGlvbiBhZGRFdmVudExpc3RlbmVycygpIHtcbiAgICB6b29tLl9vdXQuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCB6b29tLnpvb21PdXQpO1xuICAgIHpvb20uX2luLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgem9vbS56b29tSW4pO1xuXG4gICAgd2luZG93LmFkZEV2ZW50TGlzdGVuZXIoJ2tleWRvd24nLCB6b29tLmtleWRvd24pO1xuICB9LFxuICByZW1vdmVFdmVudExpc3RlbmVyczogZnVuY3Rpb24gcmVtb3ZlRXZlbnRMaXN0ZW5lcnMoKSB7XG4gICAgem9vbS5fb3V0LnJlbW92ZUV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgem9vbS56b29tT3V0KTtcbiAgICB6b29tLl9pbi5yZW1vdmVFdmVudExpc3RlbmVyKCdjbGljaycsIHpvb20uem9vbUluKTtcblxuICAgIHdpbmRvdy5yZW1vdmVFdmVudExpc3RlbmVyKCdrZXlkb3duJywgem9vbS5rZXlkb3duKTtcbiAgfVxufTtcblxudmFyIHJvdGF0ZSA9IHtcbiAgbmVnYXRpdmU6IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2EnKSxcbiAgcG9zaXRpdmU6IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2EnKSxcblxuICBhcHBlbmQ6IGZ1bmN0aW9uIGFwcGVuZCgpIHtcbiAgICByb3RhdGUubmVnYXRpdmUuaWQgPSAna3V2YWlmeS1yb3RhdGUtbmVnYXRpdmUtYnV0dG9uJywgcm90YXRlLm5lZ2F0aXZlLmlubmVySFRNTCA9ICc8c3ZnIHhtbG5zPVwiaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmdcIiB3aWR0aD1cIjUwXCIgaGVpZ2h0PVwiNTBcIiB2aWV3Qm94PVwiMCAwIDUwLjAwMDAwMSA1MC4wMDAwMDFcIj48ZyBzdHJva2U9XCIjZmZmXCIgZmlsbD1cIm5vbmVcIiBzdHJva2Utd2lkdGg9XCIyXCI+PHBhdGggZD1cIk0yNSAzOWM3LjczMiAwIDE0LTYuMjY4IDE0LTE0cy02LjI2OC0xNC0xNC0xNC0xNCA2LjI2OC0xNCAxNFwiIHN0cm9rZS1saW5lam9pbj1cInJvdW5kXCIvPjxwYXRoIGQ9XCJNNS4wMyAxNy44ODVsNS41NjUgOC4zMDggOC4zMDgtNS41NjdcIi8+PC9nPjwvc3ZnPic7XG4gICAgcm90YXRlLnBvc2l0aXZlLmlkID0gJ2t1dmFpZnktcm90YXRlLXBvc2l0aXZlLWJ1dHRvbicsIHJvdGF0ZS5wb3NpdGl2ZS5pbm5lckhUTUwgPSAnPHN2ZyB4bWxucz1cImh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnXCIgd2lkdGg9XCI1MFwiIGhlaWdodD1cIjUwXCIgdmlld0JveD1cIjAgMCA1MC4wMDAwMDEgNTAuMDAwMDAxXCI+PGcgc3Ryb2tlPVwiI2ZmZlwiIGZpbGw9XCJub25lXCIgc3Ryb2tlLXdpZHRoPVwiMlwiPjxwYXRoIGQ9XCJNMjUgMzljLTcuNzMyIDAtMTQtNi4yNjgtMTQtMTRzNi4yNjgtMTQgMTQtMTQgMTQgNi4yNjggMTQgMTRcIiBzdHJva2UtbGluZWpvaW49XCJyb3VuZFwiLz48cGF0aCBkPVwiTTQ0Ljk3IDE3Ljg4NWwtNS41NjUgOC4zMDgtOC4zMDgtNS41NjdcIi8+PC9nPjwvc3ZnPic7XG5cbiAgICBtZW51LmRpdi5hcHBlbmRDaGlsZChyb3RhdGUubmVnYXRpdmUpO1xuICAgIG1lbnUuZGl2LmFwcGVuZENoaWxkKHJvdGF0ZS5wb3NpdGl2ZSk7XG4gIH0sXG4gIG5lZ2F0aXZlUm90YXRlOiBmdW5jdGlvbiBuZWdhdGl2ZVJvdGF0ZShldmVudCkge1xuICAgIGltZy50cmFuc2Zvcm0oe1xuICAgICAgcm90YXRlVmFsdWU6IGltYWdlc1tjdXJyZW50SW5kZXhdLnJvdGF0ZSAtIDkwXG4gICAgfSk7XG5cbiAgICBldmVudC5wcmV2ZW50RGVmYXVsdCgpO1xuICB9LFxuICBwb3NpdGl2ZVJvdGF0ZTogZnVuY3Rpb24gcG9zaXRpdmVSb3RhdGUoZXZlbnQpIHtcbiAgICBpbWcudHJhbnNmb3JtKHtcbiAgICAgIHJvdGF0ZVZhbHVlOiBpbWFnZXNbY3VycmVudEluZGV4XS5yb3RhdGUgKyA5MFxuICAgIH0pO1xuXG4gICAgZXZlbnQucHJldmVudERlZmF1bHQoKTtcbiAgfSxcbiAga2V5ZG93bjogZnVuY3Rpb24ga2V5ZG93bihldmVudCkge1xuICAgIGlmIChldmVudC5rZXlDb2RlID09PSAzMykge1xuICAgICAgcm90YXRlLnBvc2l0aXZlUm90YXRlKGV2ZW50KTtcbiAgICB9XG4gICAgaWYgKGV2ZW50LmtleUNvZGUgPT09IDM0KSB7XG4gICAgICByb3RhdGUubmVnYXRpdmVSb3RhdGUoZXZlbnQpO1xuICAgIH1cbiAgfSxcbiAgYWRkRXZlbnRMaXN0ZW5lcnM6IGZ1bmN0aW9uIGFkZEV2ZW50TGlzdGVuZXJzKCkge1xuICAgIHJvdGF0ZS5uZWdhdGl2ZS5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIHJvdGF0ZS5uZWdhdGl2ZVJvdGF0ZSk7XG4gICAgcm90YXRlLnBvc2l0aXZlLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgcm90YXRlLnBvc2l0aXZlUm90YXRlKTtcblxuICAgIHdpbmRvdy5hZGRFdmVudExpc3RlbmVyKCdrZXlkb3duJywgcm90YXRlLmtleWRvd24pO1xuICB9LFxuICByZW1vdmVFdmVudExpc3RlbmVyczogZnVuY3Rpb24gcmVtb3ZlRXZlbnRMaXN0ZW5lcnMoKSB7XG4gICAgcm90YXRlLm5lZ2F0aXZlLnJlbW92ZUV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgcm90YXRlLm5lZ2F0aXZlUm90YXRlKTtcbiAgICByb3RhdGUucG9zaXRpdmUucmVtb3ZlRXZlbnRMaXN0ZW5lcignY2xpY2snLCByb3RhdGUucG9zaXRpdmVSb3RhdGUpO1xuXG4gICAgd2luZG93LnJlbW92ZUV2ZW50TGlzdGVuZXIoJ2tleWRvd24nLCByb3RhdGUua2V5ZG93bik7XG4gIH1cbn07XG5cbnZhciBuYXZpZ2F0aW9uID0ge1xuICBuZXh0OiBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdhJyksXG4gIHByZXY6IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2EnKSxcblxuICBhcHBlbmQ6IGZ1bmN0aW9uIGFwcGVuZCgpIHtcbiAgICBuYXZpZ2F0aW9uLm5leHQuaWQgPSAna3V2YWlmeS1uZXh0LWJ1dHRvbic7XG4gICAgbmF2aWdhdGlvbi5uZXh0LmlubmVySFRNTCA9ICc8c3ZnIHhtbG5zPVwiaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmdcIiB3aWR0aD1cIjUwXCIgaGVpZ2h0PVwiNTBcIiB2aWV3Qm94PVwiMCAwIDUwLjAwMDAwMSA1MC4wMDAwMDFcIj48cGF0aCBkPVwiTTE0LjQ2NyAxMGwyMCAxNS0yMCAxNVwiIGZpbGw9XCJub25lXCIgc3Ryb2tlPVwiI2ZmZlwiIHN0cm9rZS13aWR0aD1cIjJcIi8+PC9zdmc+JztcbiAgICBuYXZpZ2F0aW9uLnByZXYuaWQgPSAna3V2YWlmeS1wcmV2LWJ1dHRvbic7XG4gICAgbmF2aWdhdGlvbi5wcmV2LmlubmVySFRNTCA9ICc8c3ZnIHhtbG5zPVwiaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmdcIiB3aWR0aD1cIjUwXCIgaGVpZ2h0PVwiNTBcIiB2aWV3Qm94PVwiMCAwIDUwLjAwMDAwMSA1MC4wMDAwMDFcIj48cGF0aCBkPVwiTTM1LjUzMyAxMGwtMjAgMTUgMjAgMTVcIiBmaWxsPVwibm9uZVwiIHN0cm9rZT1cIiNmZmZcIiBzdHJva2Utd2lkdGg9XCIyXCIvPjwvc3ZnPic7XG5cbiAgICBvdmVybGF5LmVsZW1lbnQuYXBwZW5kQ2hpbGQobmF2aWdhdGlvbi5uZXh0KTtcbiAgICBvdmVybGF5LmVsZW1lbnQuYXBwZW5kQ2hpbGQobmF2aWdhdGlvbi5wcmV2KTtcbiAgfSxcbiAgdmlzaWJpbGl0eTogZnVuY3Rpb24gdmlzaWJpbGl0eSh3aGF0KSB7XG4gICAgaWYgKHdoYXQgPT09ICdkZXBlbmRzJykge1xuICAgICAgaWYgKG5leHRJbmRleCA9PT0gbnVsbCkge1xuICAgICAgICBuYXZpZ2F0aW9uLm5leHQuY2xhc3NMaXN0LnJlbW92ZSgndmlzaWJsZScpO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgbmF2aWdhdGlvbi5uZXh0LmNsYXNzTGlzdC5hZGQoJ3Zpc2libGUnKTtcbiAgICAgIH1cbiAgICAgIGlmIChwcmV2SW5kZXggPT09IG51bGwpIHtcbiAgICAgICAgbmF2aWdhdGlvbi5wcmV2LmNsYXNzTGlzdC5yZW1vdmUoJ3Zpc2libGUnKTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIG5hdmlnYXRpb24ucHJldi5jbGFzc0xpc3QuYWRkKCd2aXNpYmxlJyk7XG4gICAgICB9XG4gICAgfVxuICAgIGlmICh3aGF0ID09PSAnaGlkZScpIHtcbiAgICAgIG5hdmlnYXRpb24ubmV4dC5jbGFzc0xpc3QucmVtb3ZlKCd2aXNpYmxlJyk7XG4gICAgICBuYXZpZ2F0aW9uLnByZXYuY2xhc3NMaXN0LnJlbW92ZSgndmlzaWJsZScpO1xuICAgIH1cbiAgfSxcbiAgZ2V0TmV4dDogZnVuY3Rpb24gZ2V0TmV4dCgpIHtcbiAgICBpZiAobmV4dEluZGV4ICE9PSBudWxsKSB7XG4gICAgICBpbWcucHJlcGFyZShuZXh0SW5kZXgpO1xuICAgIH1cbiAgfSxcbiAgZ2V0UHJldjogZnVuY3Rpb24gZ2V0UHJldigpIHtcbiAgICBpZiAocHJldkluZGV4ICE9PSBudWxsKSB7XG4gICAgICBpbWcucHJlcGFyZShwcmV2SW5kZXgpO1xuICAgIH1cbiAgfSxcbiAgbmV4dEltZzogZnVuY3Rpb24gbmV4dEltZyhldmVudCkge1xuICAgIG5hdmlnYXRpb24uZ2V0TmV4dCgpO1xuXG4gICAgZXZlbnQucHJldmVudERlZmF1bHQoKTtcbiAgfSxcbiAgcHJldkltZzogZnVuY3Rpb24gcHJldkltZyhldmVudCkge1xuICAgIG5hdmlnYXRpb24uZ2V0UHJldigpO1xuXG4gICAgZXZlbnQucHJldmVudERlZmF1bHQoKTtcbiAgfSxcbiAga2V5ZG93bjogZnVuY3Rpb24ga2V5ZG93bihldmVudCkge1xuICAgIGlmIChldmVudC5rZXlDb2RlID09PSAzOSkge1xuICAgICAgbmF2aWdhdGlvbi5nZXROZXh0KGV2ZW50KTtcbiAgICB9XG4gICAgaWYgKGV2ZW50LmtleUNvZGUgPT09IDM3KSB7XG4gICAgICBuYXZpZ2F0aW9uLmdldFByZXYoZXZlbnQpO1xuICAgIH1cbiAgfSxcbiAgYWRkRXZlbnRMaXN0ZW5lcnM6IGZ1bmN0aW9uIGFkZEV2ZW50TGlzdGVuZXJzKCkge1xuICAgIG5hdmlnYXRpb24ubmV4dC5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIG5hdmlnYXRpb24ubmV4dEltZyk7XG4gICAgbmF2aWdhdGlvbi5wcmV2LmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgbmF2aWdhdGlvbi5wcmV2SW1nKTtcblxuICAgIHdpbmRvdy5hZGRFdmVudExpc3RlbmVyKCdrZXlkb3duJywgbmF2aWdhdGlvbi5rZXlkb3duKTtcbiAgfSxcbiAgcmVtb3ZlRXZlbnRMaXN0ZW5lcnM6IGZ1bmN0aW9uIHJlbW92ZUV2ZW50TGlzdGVuZXJzKCkge1xuICAgIG5hdmlnYXRpb24ubmV4dC5yZW1vdmVFdmVudExpc3RlbmVyKCdjbGljaycsIG5hdmlnYXRpb24ubmV4dEltZyk7XG4gICAgbmF2aWdhdGlvbi5wcmV2LnJlbW92ZUV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgbmF2aWdhdGlvbi5wcmV2SW1nKTtcblxuICAgIHdpbmRvdy5yZW1vdmVFdmVudExpc3RlbmVyKCdrZXlkb3duJywgbmF2aWdhdGlvbi5rZXlkb3duKTtcbiAgfVxufTtcblxudmFyIHNwaW5uZXIgPSB7XG4gIGVsZW1lbnQ6IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpLFxuXG4gIGFwcGVuZDogZnVuY3Rpb24gYXBwZW5kKCkge1xuICAgIHNwaW5uZXIuZWxlbWVudC5pZCA9ICdrdXZhaWZ5LXNwaW5uZXInO1xuICAgIHNwaW5uZXIuZWxlbWVudC5pbm5lckhUTUwgPSAnPGRpdiBjbGFzcz1cInNrLWZvbGRpbmctY3ViZVwiPjxkaXYgY2xhc3M9XCJzay1jdWJlMSBzay1jdWJlXCI+PC9kaXY+PGRpdiBjbGFzcz1cInNrLWN1YmUyIHNrLWN1YmVcIj48L2Rpdj48ZGl2IGNsYXNzPVwic2stY3ViZTQgc2stY3ViZVwiPjwvZGl2PjxkaXYgY2xhc3M9XCJzay1jdWJlMyBzay1jdWJlXCI+PC9kaXY+PC9kaXY+JztcbiAgICBzcGlubmVyLmVsZW1lbnQuc3R5bGUudHJhbnNpdGlvbiA9ICdvcGFjaXR5ICcgKyBvcHRpb25zLnRyYW5zaXRpb25TcGVlZCArICdtcyBlYXNlLCB2aXNpYmlsaXR5ICcgKyBvcHRpb25zLnRyYW5zaXRpb25TcGVlZCArICdtcyBlYXNlJztcblxuICAgIG92ZXJsYXkuZWxlbWVudC5hcHBlbmRDaGlsZChzcGlubmVyLmVsZW1lbnQpO1xuICB9LFxuICB2aXNpYmlsaXR5OiBmdW5jdGlvbiB2aXNpYmlsaXR5KHdoYXQpIHtcbiAgICBpZiAod2hhdCA9PT0gJ3Nob3cnKSB7XG4gICAgICBzcGlubmVyLmVsZW1lbnQuY2xhc3NMaXN0LmFkZCgndmlzaWJsZScpO1xuICAgIH1cbiAgICBpZiAod2hhdCA9PT0gJ2hpZGUnKSB7XG4gICAgICBzcGlubmVyLmVsZW1lbnQuY2xhc3NMaXN0LnJlbW92ZSgndmlzaWJsZScpO1xuICAgIH1cbiAgfVxufTtcblxudmFyIGNsb3NlRGl2ID0ge1xuICBlbGVtZW50OiBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKSxcblxuICBhcHBlbmQ6IGZ1bmN0aW9uIGFwcGVuZCgpIHtcbiAgICBjbG9zZURpdi5lbGVtZW50LmlkID0gJ2t1dmFpZnktY2xvc2UtZGl2JztcblxuICAgIG92ZXJsYXkuZWxlbWVudC5hcHBlbmRDaGlsZChjbG9zZURpdi5lbGVtZW50KTtcbiAgfSxcbiAgdmlzaWJpbGl0eTogZnVuY3Rpb24gdmlzaWJpbGl0eSh3aGF0KSB7XG4gICAgaWYgKHdoYXQgPT09ICdzaG93Jykge1xuICAgICAgY2xvc2VEaXYuZWxlbWVudC5jbGFzc0xpc3QuYWRkKCd2aXNpYmxlJyk7XG4gICAgfVxuICAgIGlmICh3aGF0ID09PSAnaGlkZScpIHtcbiAgICAgIGNsb3NlRGl2LmVsZW1lbnQuY2xhc3NMaXN0LnJlbW92ZSgndmlzaWJsZScpO1xuICAgIH1cbiAgfSxcbiAgY2xpY2s6IGZ1bmN0aW9uIGNsaWNrKGV2ZW50KSB7XG4gICAgX2Nsb3NlLmNsb3NlKCk7XG5cbiAgICBldmVudC5wcmV2ZW50RGVmYXVsdCgpO1xuICB9LFxuICBhZGRFdmVudExpc3RlbmVyczogZnVuY3Rpb24gYWRkRXZlbnRMaXN0ZW5lcnMoKSB7XG4gICAgY2xvc2VEaXYuZWxlbWVudC5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIGNsb3NlRGl2LmNsaWNrKTtcbiAgfSxcbiAgcmVtb3ZlRXZlbnRMaXN0ZW5lcnM6IGZ1bmN0aW9uIHJlbW92ZUV2ZW50TGlzdGVuZXJzKCkge1xuICAgIGNsb3NlRGl2LmVsZW1lbnQucmVtb3ZlRXZlbnRMaXN0ZW5lcignY2xpY2snLCBjbG9zZURpdi5jbGljayk7XG4gIH1cbn07XG5cbmV4cG9ydHMuZGVmYXVsdCA9IGluaXQ7XG5cbn0se31dLDI6W2Z1bmN0aW9uKHJlcXVpcmUsbW9kdWxlLGV4cG9ydHMpe1xuJ3VzZSBzdHJpY3QnO1xuXG52YXIgX2t1dmFpZnkgPSByZXF1aXJlKCcuL2t1dmFpZnknKTtcblxudmFyIF9rdXZhaWZ5MiA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQoX2t1dmFpZnkpO1xuXG5mdW5jdGlvbiBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KG9iaikgeyByZXR1cm4gb2JqICYmIG9iai5fX2VzTW9kdWxlID8gb2JqIDogeyBkZWZhdWx0OiBvYmogfTsgfVxuXG52YXIgbXlrdXZhaWZ5ID0gKDAsIF9rdXZhaWZ5Mi5kZWZhdWx0KSgpO1xudmFyIGRlbW9CdXR0b24gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcjZGVtby1idXR0b24nKTtcbnZhciBkZW1vTGluayA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJyNkZW1vLWxpbmsnKTtcblxuZGVtb0J1dHRvbi5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIGZ1bmN0aW9uIChldmVudCkge1xuICBkZW1vTGluay5jbGljaygpO1xuXG4gIGV2ZW50LnByZXZlbnREZWZhdWx0KCk7XG59KTtcblxufSx7XCIuL2t1dmFpZnlcIjoxfV19LHt9LFsyXSlcblxuIiwiJ3VzZSBzdHJpY3QnXG5cbmltcG9ydCBrdXZhaWZ5IGZyb20gJy4va3V2YWlmeSdcblxuY29uc3QgbXlrdXZhaWZ5ID0ga3V2YWlmeSgpXG5jb25zdCBkZW1vQnV0dG9uID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignI2RlbW8tYnV0dG9uJylcbmNvbnN0IGRlbW9MaW5rID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignI2RlbW8tbGluaycpXG5cbmRlbW9CdXR0b24uYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCBldmVudCA9PiB7XG4gIGRlbW9MaW5rLmNsaWNrKClcblxuICBldmVudC5wcmV2ZW50RGVmYXVsdCgpXG59KVxuIl0sInNvdXJjZVJvb3QiOiIvc291cmNlLyJ9
